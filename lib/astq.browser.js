/*
**  ASTq -- Abstract Syntax Tree (AST) Query Engine
**  Copyright (c) 2014-2015 Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.ASTQ=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.ASTY=e()}}(function(){return function e(t,n,r){function i(u,a){if(!n[u]){if(!t[u]){var f="function"==typeof _dereq_&&_dereq_;if(!a&&f)return f(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof _dereq_&&_dereq_,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},r=function(){function e(){}return n(e,null,{init:{value:function(e,t,n){if("undefined"==typeof e)throw new Error("init: invalid argument");if(this.ASTy=!0,this.T=e,this.L={L:0,C:0,O:0},this.A={},this.C=[],this.P=null,"object"==typeof t)for(var r in t)t.hasOwnProperty(r)&&this.set(r,t[r]);return"object"==typeof n&&n instanceof Array&&this.add(n),this},writable:!0,configurable:!0},type:{value:function(e){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=e,this;throw new Error("type: invalid number of arguments")},writable:!0,configurable:!0},pos:{value:function(e,t,n){if(0===arguments.length)return this.L;if(arguments.length<=3)return this.L.L=e||0,this.L.C=t||0,this.L.O=n||0,this;throw new Error("pos: invalid number of arguments")},writable:!0,configurable:!0},set:{value:function(){var e=this,t=arguments;if(1===arguments.length&&"object"==typeof arguments[0])!function(){var n=t;Object.keys(n[0]).forEach(function(t){e.A[t]=n[0][t]})}();else{if(2!==arguments.length)throw new Error("set: invalid arguments");this.A[arguments[0]]=arguments[1]}return this},writable:!0,configurable:!0},get:{value:function(e){if(1!==arguments.length)throw new Error("get: invalid number of arguments");if("string"!=typeof e)throw new Error("get: invalid argument");return this.A[e]},writable:!0,configurable:!0},attrs:{value:function(){return Object.keys(this.A)},writable:!0,configurable:!0},add:{value:function(){var e=this;if(0===arguments.length)throw new Error("add: missing argument(s)");var t=function(e,t){if(!("object"==typeof t&&"string"==typeof t.T&&"object"==typeof t.L&&"object"==typeof t.A&&"object"==typeof t.P&&"object"==typeof t.C&&t.C instanceof Array))throw new Error("add: invalid AST node: "+JSON.stringify(t));e.C.push(t),t.P=e};return null!==arguments&&Array.prototype.slice.call(arguments,0).forEach(function(n){"object"==typeof n&&n instanceof Array?n.forEach(function(n){t(e,n)}):null!==n&&t(e,n)}),this},writable:!0,configurable:!0},del:{value:function(){var e=this;if(0===arguments.length)throw new Error("del: invalid argument");return Array.prototype.slice.call(arguments,0).forEach(function(t){for(var n=!1,r=0;r<e.C.length;r++)if(e.C[r]===t){e.C.splice(r,1),t.P=null,n=!0;break}if(!n)throw new Error("del: child not found")}),this},writable:!0,configurable:!0},childs:{value:function(){return this.C},writable:!0,configurable:!0},parent:{value:function(){return this.P},writable:!0,configurable:!0}}),e}();t.exports=r},{}],2:[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},r=function(){function e(){}return n(e,null,{dump:{value:function(e){void 0===e&&(e=1/0);var t="";return this.walk(function(n,r){if(!(r>e)){for(var i=0;r>i;i++)t+="    ";t+=n.T+" ";var o=Object.keys(n.A);o.length>0&&!function(){t+="(";var e=!0;o.forEach(function(r){e?e=!1:t+=", ",t+=r+": ";var i=n.A[r];switch(typeof i){case"string":t+='"'+i.replace(/\n/,"\\n").replace(/"/,'\\"')+'"';break;case"object":t+=i instanceof RegExp?"/"+i.toString().replace(/^\//,"").replace(/\/$/,"").replace(/\//g,"\\/")+"/":JSON.stringify(i);break;default:t+=JSON.stringify(i)}}),t+=") "}(),t+="["+n.L.L+"/"+n.L.C+"]\n"}},"downward"),t},writable:!0,configurable:!0}}),e}();t.exports=r},{}],3:[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},r=function(){function e(){}return n(e,null,{merge:{value:function(e,t,n){var r=this;if("object"!=typeof e)throw new Error("merge: invalid AST node argument");if("undefined"==typeof t&&(t=!1),"undefined"==typeof n&&(n={}),t){var i=e.pos();this.pos(i.L,i.C,i.O)}return e.attrs().forEach(function(t){var i="undefined"!=typeof n[t]?n[t]:t;null!==i&&r.set(i,e.get(t))}),e.childs().forEach(function(e){r.add(e)}),this},writable:!0,configurable:!0}}),e}();t.exports=r},{}],4:[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},r=function(){function e(){}return n(e,null,{walk:{value:function(e,t){"undefined"==typeof t&&(t="downward");var n=function(r,i,o){("downward"===t||"both"===t)&&e.call(null,r,i,o,"downward"),r.C.forEach(function(e){n(e,i+1,r)}),("upward"===t||"both"===t)&&e.call(null,r,i,o,"upward")};return n(this,0,null),this},writable:!0,configurable:!0}}),e}();t.exports=r},{}],5:[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},r=e("./asty-base.js"),i=e("./asty-merge.js"),o=e("./asty-walk.js"),u=e("./asty-dump.js"),a=function(){function e(){var t=this;if(!(this instanceof e))return new e;this.ASTYNode=function(){};var n=[[r,"init","type","pos","set","get","attrs","add","del","childs","parent"],[i,"merge"],[o,"walk"],[u,"dump"]];return n.forEach(function(e){var n=e[0].prototype;e.slice(1).forEach(function(e){t.ASTYNode.prototype[e]=n[e]})}),this}return n(e,null,{extend:{value:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.ASTYNode.prototype[t]=e[t]);return this},writable:!0,configurable:!0},create:{value:function(e){return(new this.ASTYNode).init(e)},writable:!0,configurable:!0},isA:{value:function(e){return"object"==typeof e&&e instanceof this.ASTYNode&&"boolean"==typeof e.ASTy&&e.ASTy===!0},writable:!0,configurable:!0}}),e}();t.exports=a},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-walk.js":4}]},{},[1,2,3,4,5])(5)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],2:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.CacheLRU=e()}}(function(){return function e(t,i,r){function n(u,l){if(!i[u]){if(!t[u]){var a="function"==typeof _dereq_&&_dereq_;if(!l&&a)return a(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=i[u]={exports:{}};t[u][0].call(f.exports,function(e){var i=t[u][1][e];return n(i?i:e)},f,f.exports,e,t,i,r)}return i[u].exports}for(var o="function"==typeof _dereq_&&_dereq_,u=0;u<r.length;u++)n(r[u]);return n}({1:[function(e,t){"use strict";var i=function(e,t,i){t&&Object.defineProperties(e,t),i&&Object.defineProperties(e.prototype,i)},r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(){return r(this,e),this._index={},this._LRU={newer:null},this._MRU={older:null},this._LRU.newer=this._MRU,this._MRU.older=this._LRU,this._cur=0,this._max=1/0,this._dispose=function(){},this}return i(e,null,{limit:{value:function(e){var t=this._max;return arguments.length>0&&(this._max=e,this._purge()),t},writable:!0,configurable:!0},dispose:{value:function(e){return this._dispose=e,this},writable:!0,configurable:!0},length:{value:function(){return this._cur},writable:!0,configurable:!0},keys:{value:function(){return this.each(function(e,t){this.push(t)},[])},writable:!0,configurable:!0},values:{value:function(){return this.each(function(e){this.push(e)},[])},writable:!0,configurable:!0},each:{value:function(e,t){arguments<2&&(t=this);for(var i=0,r=this._MRU.older;r!==this._LRU;)e.call(t,r.val,r.key,i++),r=r.older;return t},writable:!0,configurable:!0},has:{value:function(e){var t=this._index[e];return void 0!==t},writable:!0,configurable:!0},peek:{value:function(e){var t=this._index[e];return void 0===t?void 0:t.expires<Date.now()?void this.del(t.key):t.val},writable:!0,configurable:!0},touch:{value:function(e){var t=this._index[e];if(void 0===t)throw new Error("touch: no such item");return this._promote(t),this},writable:!0,configurable:!0},get:{value:function(e){var t=this._index[e];return void 0===t?void 0:t.expires<Date.now()?void this.del(t.key):(this._promote(t),t.val)},writable:!0,configurable:!0},set:{value:function(e,t,i){arguments.length<3&&(i=1/0),i+=Date.now();var r=this._index[e];if(void 0===r)r={older:null,newer:null,key:e,val:t,expires:i},this._index[e]=r,this._attach(r),this._cur++,this._purge();else{var n=r.val;r.val=t,this._promote(r),this._dispose.call(void 0,r.key,n,"set")}return this},writable:!0,configurable:!0},del:{value:function(e){var t=this._index[e];if(void 0===t)throw new Error("del: no such item");return delete this._index[e],this._detach(t),this._cur--,this._dispose.call(void 0,e,t.val,"del"),this},writable:!0,configurable:!0},clear:{value:function(){for(;this._cur>0;)this.del(this._LRU.newer.key);return this},writable:!0,configurable:!0},_purge:{value:function(){for(;this._cur>this._max;)this.del(this._LRU.newer.key)},writable:!0,configurable:!0},_promote:{value:function(e){this._detach(e),this._attach(e)},writable:!0,configurable:!0},_detach:{value:function(e){e.older.newer=e.newer,e.newer.older=e.older,e.older=null,e.newer=null},writable:!0,configurable:!0},_attach:{value:function(e){e.older=this._MRU.older,e.newer=this._MRU,e.newer.older=e,e.older.newer=e},writable:!0,configurable:!0}}),e}();t.exports=n},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],3:[function(_dereq_,module,exports){
(function (global){
!function(e,n,r){"function"==typeof define&&"undefined"!=typeof define.amd?define(n,function(){return r(e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=r(e):e[n]=r(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,"PEGUtil",function(){var e={};e.makeAST=function(e,n,r,t){return function(){return t.util.__makeAST.call(null,e(),n(),r(),arguments)}},e.makeUnroll=function(e,n,r,t){return function(o,u,l){if("object"!=typeof u||!(u instanceof Array))throw new t("unroll: invalid list argument for unrolling",typeof u,"Array",r(),e(),n());if("undefined"!=typeof l){"number"==typeof l&&(l=[l]);var a=[];null!==o&&a.push(o);for(var i=0;i<u.length;i++)for(var f=0;f<l.length;f++)a.push(u[i][l[f]]);return a}return null!==o&&u.unshift(o),u}};var n=function(e,n){var r=e.length,t=n-20;0>t&&(t=0);var o=n+20;o>r&&(o=r);var u=function(e){return e.charCodeAt(0).toString(16).toUpperCase()},l=function(e,n,r){return e.substr(n,r).replace(/\\/g,"\\\\").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+u(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+u(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+u(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+u(e)})};return{prolog:l(e,t,n-t),token:l(e,n,1),epilog:l(e,n+1,o-(n+1))}};return e.parse=function(r,t,o){if("object"!=typeof r)throw new Error("invalid parser object (not an object)");if("function"!=typeof r.parse)throw new Error('invalid parser object (no "parse" function)');if("string"!=typeof t)throw new Error("invalid input text (not a string)");if("undefined"!=typeof o&&"object"!=typeof o)throw new Error("invalid options (not an object)");"undefined"==typeof o&&(o={});var u={ast:null,error:null};try{var l;l="function"==typeof o.makeAST?o.makeAST:function(e,n,r,t){return{line:e,column:n,offset:r,args:t}};var a={util:{makeUnroll:e.makeUnroll,makeAST:e.makeAST,__makeAST:l}};"string"==typeof o.startRule&&(a.startRule=o.startRule),u.ast=r.parse(t,a),u.error=null}catch(i){u.ast=null;var f=function(e,n){return"undefined"!=typeof e?e:n};u.error={line:f(i.line,0),column:f(i.column,0),message:i.message,found:f(i.found,""),expected:f(i.expected,""),location:n(t,f(i.offset,0))}}return u},e.errorMessage=function(e,n){for(var r=e.location,t="line "+e.line+" (column "+e.column+"): ",o="",u=0;u<t.length+r.prolog.length;u++)o+="-";var l=t+r.prolog+r.token+r.epilog+"\n"+o+"^\n"+e.message+(n?"":"\n");return l},e});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],4:[function(_dereq_,module,exports){
"use strict";var ASTQAdapterASTY={taste:function(t){return"object"==typeof t&&"boolean"==typeof t.ASTy},getParentNode:function(t){return t.parent()},getChildNodes:function(t){return t.childs()},getNodeType:function(t){return t.type()},getNodeAttrNames:function(t){return t.attrs()},getNodeAttrValue:function(t,e){return t.get(e)}};module.exports=ASTQAdapterASTY;
},{}],5:[function(_dereq_,module,exports){
"use strict";var ASTQAdapterMozAST={taste:function(t){return"object"==typeof t&&"string"==typeof t.type&&"object"==typeof t.loc},getParentNode:function(){throw new Error("Mozilla SpiderMonkey AST does not support parent node traversal")},getChildNodes:function(t){var e=this,o=[];for(var r in t)t.hasOwnProperty(r)&&this.taste(t[r])?o.push(t):t.hasOwnProperty(r)&&"object"==typeof t[r]&&t[r]instanceof Array&&t[r].forEach(function(t){e.taste(t)&&o.push(t)});return o},getNodeType:function(t){return t.type},getNodeAttrNames:function(t){var e=[];for(var o in t)t.hasOwnProperty(o)&&"object"!=typeof t[o]&&"type"!==o&&"loc"!==o&&e.push(o);return e},getNodeAttrValue:function(t,e){return t.hasOwnProperty(e)&&"object"!=typeof t[e]&&"type"!==e&&"loc"!==e?t[e]:void 0}};module.exports=ASTQAdapterMozAST;
},{}],6:[function(_dereq_,module,exports){
"use strict";var ASTQAdapterXMLDOM={taste:function(e){return"object"==typeof Node&&e instanceof Node&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},getParentNode:function(e){return e.parentNode},getChildNodes:function(e){return e.childNodes},getNodeType:function(e){return e.nodeName},getNodeAttrNames:function(e){return Array.prototype.slice.call(e.attributes,0).map(function(e){return e.nodeName})},getNodeAttrValue:function(e,t){return e.getAttribute(t)}};module.exports=ASTQAdapterXMLDOM;
},{}],7:[function(_dereq_,module,exports){
"use strict";var _prototypeProperties=function(t,e,r){e&&Object.defineProperties(t,e),r&&Object.defineProperties(t.prototype,r)},_classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ASTQAdapter=function(){function t(){return _classCallCheck(this,t),this._adapters=[],this}return _prototypeProperties(t,null,{register:{value:function(t){return this._adapters.unshift(t),this},writable:!0,configurable:!0},unregister:{value:function(t){if(void 0===t)this._adapters=[];else{for(var e=[],r=0;r<this._adapters.length;r++)this._adapters[r]!==t&&e.push(this._adapters[r]);this._adapters=e}return this},writable:!0,configurable:!0},select:{value:function(t){for(var e=0;e<this._adapters.length;e++)if(this._adapters[e].taste(t))return this._adapters[e];return void 0},writable:!0,configurable:!0}}),t}();module.exports=ASTQAdapter;
},{}],8:[function(_dereq_,module,exports){
"use strict";var stdfuncs={type:function(t,n){return t.getNodeType(n)},depth:function(t,n){for(var r=1,e=n;null!==(e=t.getParentNode(e));)r++;return r},pos:function(t,n){var r=t.getParentNode(n);if(null===r)return 1;for(var e=t.getChildNodes(r),u=0;u<e.length;u++)if(e[u]===n)return u+1;throw new Error("cannot find myself")},nth:function(t,n,r){r=parseInt(r,10);var e=t.getParentNode(n);if(null!==e){var u=t.getChildNodes(e);0>r&&(r=u-(r+1));for(var o=0;o<u.length;o++)if(u[o]===n)return o+1===r;return!1}return 1===r?!0:!1},first:function(t,n){return stdfuncs.nth(t,n,1)},last:function(t,n){return stdfuncs.nth(t,n,-1)},count:function(t,n,r){return"object"==typeof r&&r instanceof Array?r.length:"object"==typeof r?Object.keys(r).length:"string"==typeof r?r.length:String(r).length},substr:function(t,n,r,e,u){return String(r).substr(e,u)},lc:function(t,n,r){return String(r).toLowerCase()},uc:function(t,n,r){return String(r).toUpperCase()}};module.exports=stdfuncs;
},{}],9:[function(_dereq_,module,exports){
"use strict";var _prototypeProperties=function(n,t,e){t&&Object.defineProperties(n,t),e&&Object.defineProperties(n.prototype,e)},_classCallCheck=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},ASTQFuncs=function(){function n(){return _classCallCheck(this,n),this._funcs={},this}return _prototypeProperties(n,null,{register:{value:function(n,t){this._funcs[n]=t},writable:!0,configurable:!0},run:{value:function(n,t){var e=this._funcs[n];if("function"!=typeof e)throw new Error('invalid function "'+n+'"');return e.apply(null,t)},writable:!0,configurable:!0}}),n}();module.exports=ASTQFuncs;
},{}],10:[function(_dereq_,module,exports){
"use strict";var _interopRequire=function(e){return e&&e.__esModule?e["default"]:e},_prototypeProperties=function(e,r,t){r&&Object.defineProperties(e,r),t&&Object.defineProperties(e.prototype,t)},_inherits=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(e.__proto__=r)},_classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},util=_interopRequire(_dereq_("./astq-util.js")),ASTQQueryTrace=_interopRequire(_dereq_("./astq-query-trace.js")),ASTQQueryExec=function(e){function r(e,t,i,a){_classCallCheck(this,r),this.adapter=e,this.params=t,this.funcs=i,this.trace=a}return _inherits(r,e),_prototypeProperties(r,null,{execQuery:{value:function(e,r){var t=this;this.traceBegin(e,r);var i=[];return e.childs().forEach(function(e){i=i.concat(t.execPath(e,r))}),this.traceEnd(e,r,i),i},writable:!0,configurable:!0},execPath:{value:function(e,r){var t=this;this.traceBegin(e,r);var i=[r];return e.childs().forEach(function(e){var r=[];i.forEach(function(i){r=r.concat(t.execStep(e,i))}),i=r}),this.traceEnd(e,r,i),i},writable:!0,configurable:!0},execStep:{value:function(e,r){var t=this;this.traceBegin(e,r);var i=e.childs(),a=null,c=null,n=null,u=0;if(u<i.length&&"Axis"===i[u].type()&&(a=i[u++]),u<i.length&&"Match"===i[u].type()&&(c=i[u++]),u<i.length&&"Filter"===i[u].type()&&(n=i[u++]),null===c)throw new Error("no matching part in query step");var l=[],s=c.get("id"),o=function(e){var r=t.adapter.getNodeType(e);if("*"===s||s===r){var i=!0;null!==n&&(t.execFilter(n,e)||(i=!1)),i&&l.push(e)}};if(null!==a){var h=a.get("op");if("/"===h)this.adapter.getChildNodes(r).forEach(function(e){return o(e)});else if("//"===h)!function(){var e=function(r){o(r),t.adapter.getChildNodes(r).forEach(function(r){return e(r)})};t.adapter.getChildNodes(r).forEach(function(r){return e(r)})}();else if("-/"===h){var p=this.adapter.getParentNode(r);if(null!==p){for(var x=this.adapter.getChildNodes(p),f=null,d=0;d<x.length&&x[d]!==r;d++)f=x[d];o(f)}}else if("-//"===h){var b=this.adapter.getParentNode(r);if(null!==b)for(var x=this.adapter.getChildNodes(b),g=0;g<x.length&&x[g]!==r;g++)o(x[g])}else if("+/"===h){var E=this.adapter.getParentNode(r);if(null!==E){var x=this.adapter.getChildNodes(E),v=void 0;for(v=0;v<x.length&&x[v]!==r;v++);v<x.length&&(v++,o(x[v]))}}else if("+//"===h){var m=this.adapter.getParentNode(r);if(null!==m){var x=this.adapter.getChildNodes(m),w=void 0;for(w=0;w<x.length&&x[w]!==r;w++);if(w<x.length)for(w++;w<x.length;)o(x[w++])}}else if("../"===h){var y=this.adapter.getParentNode(r);null!==y&&o(y)}else if("..//"===h)for(var B=r;;){var C=this.adapter.getParentNode(B);if(null===C)break;o(C),B=C}}else o(r);return this.traceEnd(e,r,l),l},writable:!0,configurable:!0},execFilter:{value:function(e,r){this.traceBegin(e,r);var t=e.childs()[0],i=this.execExpr(t,r);return i=util.truthy(i),this.traceEnd(e,r,i),i},writable:!0,configurable:!0},execExpr:{value:function(e,r){switch(e.type()){case"ConditionalBinary":return this.execExprConditionalBinary(e,r);case"ConditionalTernary":return this.execExprConditionalTernary(e,r);case"Logical":return this.execExprLogical(e,r);case"Bitwise":return this.execExprBitwise(e,r);case"Relational":return this.execExprRelational(e,r);case"Arithmetical":return this.execExprArithmetical(e,r);case"Unary":return this.execExprUnary(e,r);case"FuncCall":return this.execExprFuncCall(e,r);case"Attribute":return this.execExprAttribute(e,r);case"Param":return this.execExprParam(e,r);case"LiteralString":return this.execExprLiteralString(e,r);case"LiteralRegExp":return this.execExprLiteralRegExp(e,r);case"LiteralNumber":return this.execExprLiteralNumber(e,r);case"LiteralValue":return this.execExprLiteralValue(e,r);case"Path":return this.execExprPath(e,r)}},writable:!0,configurable:!0},execExprConditionalBinary:{value:function(e,r){this.traceBegin(e,r);var t=this.execExpr(e.childs()[0],r);return util.truthy(t)||(t=this.execExpr(e.childs()[1],r)),this.traceEnd(e,r,t),t},writable:!0,configurable:!0},execExprConditionalTernary:{value:function(e,r){this.traceBegin(e,r);var t=this.execExpr(e.childs()[0],r);return t=util.truthy(t)?this.execExpr(e.childs()[1],r):this.execExpr(e.childs()[2],r),this.traceEnd(e,r,t),t},writable:!0,configurable:!0},execExprLogical:{value:function(e,r){this.traceBegin(e,r);var t=!1;switch(e.get("op")){case"&&":t=util.truthy(this.execExpr(e.childs()[0],r)),t&&(t=t&&util.truthy(this.execExpr(e.childs()[1],r)));break;case"||":t=util.truthy(this.execExpr(e.childs()[0],r)),t||(t=t||util.truthy(this.execExpr(e.childs()[1],r)))}return this.traceEnd(e,r,t),t},writable:!0,configurable:!0},execExprBitwise:{value:function(e,r){this.traceBegin(e,r);var t=util.coerce(this.execExpr(e.childs()[0],r),"number"),i=util.coerce(this.execExpr(e.childs()[1],r),"number"),a=void 0;switch(e.get("op")){case"&":a=t&i;break;case"|":a=t|i;break;case"<<":a=t<<i;break;case">>":a=t>>i}return this.traceEnd(e,r,a),a},writable:!0,configurable:!0},execExprRelational:{value:function(e,r){this.traceBegin(e,r);var t=this.execExpr(e.childs()[0],r),i=this.execExpr(e.childs()[1],r),a=void 0;switch(e.get("op")){case"==":a=t===i;break;case"!=":a=t!==i;break;case"<=":a=util.coerce(t,"number")<=util.coerce(i,"number");break;case">=":a=util.coerce(t,"number")>=util.coerce(i,"number");break;case"<":a=util.coerce(t,"number")<util.coerce(i,"number");break;case">":a=util.coerce(t,"number")>util.coerce(i,"number");break;case"=~":a=null!==util.coerce(t,"string").match(util.coerce(i,"regexp"));break;case"!~":a=null===util.coerce(t,"string").match(util.coerce(i,"regexp"))}return this.traceEnd(e,r,a),a},writable:!0,configurable:!0},execExprArithmetical:{value:function(e,r){this.traceBegin(e,r);var t=this.execExpr(e.childs()[0],r),i=this.execExpr(e.childs()[1],r),a=void 0;switch(e.get("op")){case"+":a="string"==typeof t?t+util.coerce(i,"string"):util.coerce(t,"number")+util.coerce(i,"number");break;case"-":a=util.coerce(t,"number")+util.coerce(i,"number");break;case"*":a=util.coerce(t,"number")*util.coerce(i,"number");break;case"/":a=util.coerce(t,"number")/util.coerce(i,"number");break;case"%":a=util.coerce(t,"number")%util.coerce(i,"number");break;case"**":a=Math.pow(util.coerce(t,"number"),util.coerce(i,"number"))}return this.traceEnd(e,r,a),a},writable:!0,configurable:!0},execExprUnary:{value:function(e,r){this.traceBegin(e,r);var t=this.execExpr(e.childs()[0],r),i=void 0;switch(e.get("op")){case"!":i=!util.coerce(t,"boolean");break;case"~":i=~util.coerce(t,"number")}return this.traceEnd(e,r,i),i},writable:!0,configurable:!0},execExprFuncCall:{value:function(e,r){var t=this;this.traceBegin(e,r);var i=e.get("id"),a=[this.adapter,r];e.childs().forEach(function(e){a.push(t.execExpr(e,r))});var c=this.funcs.run(i,a);return this.traceEnd(e,r,c),c},writable:!0,configurable:!0},execExprAttribute:{value:function(e,r){this.traceBegin(e,r);var t=e.get("id"),i=this.adapter.getNodeAttrValue(r,t);return this.traceEnd(e,r,i),i},writable:!0,configurable:!0},execExprParam:{value:function(e,r){this.traceBegin(e,r);var t=e.get("id");if("undefined"==typeof this.params[t])throw new Error('invalid parameter "'+t+'"');var i=this.params[t];return this.traceEnd(e,r,i),i},writable:!0,configurable:!0},execExprLiteralString:{value:function(e,r){this.traceBegin(e,r);var t=e.get("value");return this.traceEnd(e,r,t),t},writable:!0,configurable:!0},execExprLiteralRegExp:{value:function(e,r){this.traceBegin(e,r);var t=e.get("value");return this.traceEnd(e,r,t),t},writable:!0,configurable:!0},execExprLiteralNumber:{value:function(e,r){this.traceBegin(e,r);var t=e.get("value");return this.traceEnd(e,r,t),t},writable:!0,configurable:!0},execExprLiteralValue:{value:function(e,r){this.traceBegin(e,r);var t=e.get("value");return this.traceEnd(e,r,t),t},writable:!0,configurable:!0},execExprPath:{value:function(e,r){this.traceBegin(e,r);var t=this.execPath(e,r);return this.traceEnd(e,r,t),t},writable:!0,configurable:!0}}),r}(ASTQQueryTrace);module.exports=ASTQQueryExec;
},{"./astq-query-trace.js":11,"./astq-util.js":13}],11:[function(_dereq_,module,exports){
"use strict";var _interopRequire=function(e){return e&&e.__esModule?e["default"]:e},_prototypeProperties=function(e,t,r){t&&Object.defineProperties(e,t),r&&Object.defineProperties(e.prototype,r)},_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},util=_interopRequire(_dereq_("./astq-util.js")),ASTQQueryTrace=function(){function e(){_classCallCheck(this,e)}return _prototypeProperties(e,null,{prefixOf:{value:function(e,t){for(var r=0,i=e;null!==(i=i.parent());)r++;var a=util.pad("",4*r);for(r=0,i=t;null!==(i=this.adapter.getParentNode(i));)r++;var o=util.pad("",4*r);return{prefix1:a,prefix2:o}},writable:!0,configurable:!0},traceBegin:{value:function(e,t){if(this.trace){var r=this.prefixOf(e,t),i=r.prefix1,a=r.prefix2;console.log("ASTQ: execute: | "+util.pad(i+e.type()+" (",-60)+" | "+a+this.adapter.getNodeType(t))}},writable:!0,configurable:!0},traceEnd:{value:function(e,t,r){var i=this;if(this.trace){var a=this.prefixOf(e,t),o=a.prefix1,n=a.prefix2,u=void 0;void 0===r?u="undefined":"object"==typeof r&&r instanceof Array?(u="[",r.forEach(function(e){u+="node("+i.adapter.getNodeType(e)+"),"}),u=u.replace(/,$/,"")+"]"):u=typeof r+"("+r+")",u.length>60&&(u=u.substr(0,60)+"..."),console.log("ASTQ: execute: | "+util.pad(o+"): "+u,-60)+" | "+n+this.adapter.getNodeType(t))}},writable:!0,configurable:!0}}),e}();module.exports=ASTQQueryTrace;
},{"./astq-util.js":13}],12:[function(_dereq_,module,exports){
"use strict";var _interopRequire=function(t){return t&&t.__esModule?t["default"]:t},_prototypeProperties=function(t,e,r){e&&Object.defineProperties(t,e),r&&Object.defineProperties(t.prototype,r)},_classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ASTY=_dereq_("asty"),PEGUtil=_dereq_("pegjs-util"),ASTQQueryParse=function(){function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,e,r,n,s,u){this.message=t,this.expected=e,this.found=r,this.offset=n,this.line=s,this.column=u,this.name="SyntaxError"}function r(t){function r(){return ru}function n(){return i(ru).line}function s(){return i(ru).column}function u(t){throw a(t,null,ru)}function i(e){function r(e,r,n){var s,u;for(s=r;n>s;s++)u=t.charAt(s),"\n"===u?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===u||"\u2028"===u||"\u2029"===u?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return nu!==e&&(nu>e&&(nu=0,su={line:1,column:1,seenCR:!1}),r(su,nu,e),nu=e),su}function l(t){uu>eu||(eu>uu&&(uu=eu,iu=[]),iu.push(t))}function a(r,n,s){function u(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function l(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,s,u,i=new Array(t.length);for(u=0;u<t.length;u++)i[u]=t[u].description;return n=t.length>1?i.slice(0,-1).join(", ")+" or "+i[t.length-1]:i[0],s=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+s+" found."}var a=i(s),o=s<t.length?t.charAt(s):null;return null!==n&&u(n),new e(null!==r?r:l(n,o),n,o,s,a.line,a.column)}function o(){var t,e,r,n,s,u=36*eu+0,i=au[u];return i?(eu=i.nextPos,i.result):(t=eu,e=V(),e!==$?(r=c(),r!==$?(n=V(),n!==$?(s=G(),s!==$?(ru=t,e=K(r),t=e):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J),au[u]={nextPos:eu,result:t},t)}function c(){var e,r,n,s,u,i,a,o,c=36*eu+1,f=au[c];if(f)return eu=f.nextPos,f.result;if(e=eu,r=p(),r!==$){for(n=[],s=eu,u=V(),u!==$?(44===t.charCodeAt(eu)?(i=W,eu++):(i=$,0===lu&&l(X)),i!==$?(a=V(),a!==$?(o=p(),o!==$?(u=[u,i,a,o],s=u):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J);s!==$;)n.push(s),s=eu,u=V(),u!==$?(44===t.charCodeAt(eu)?(i=W,eu++):(i=$,0===lu&&l(X)),i!==$?(a=V(),a!==$?(o=p(),o!==$?(u=[u,i,a,o],s=u):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J);n!==$?(ru=e,r=te(r,n),e=r):(eu=e,e=J)}else eu=e,e=J;return au[c]={nextPos:eu,result:e},e}function p(){var t,e,r,n,s,u,i=36*eu+2,l=au[i];if(l)return eu=l.nextPos,l.result;if(t=eu,e=f(),e!==$){for(r=[],n=eu,s=V(),s!==$?(u=d(),u!==$?(s=[s,u],n=s):(eu=n,n=J)):(eu=n,n=J);n!==$;)r.push(n),n=eu,s=V(),s!==$?(u=d(),u!==$?(s=[s,u],n=s):(eu=n,n=J)):(eu=n,n=J);r!==$?(ru=t,e=ee(e,r),t=e):(eu=t,t=J)}else eu=t,t=J;return au[i]={nextPos:eu,result:t},t}function f(){var t,e,r,n,s,u,i=36*eu+3,l=au[i];return l?(eu=l.nextPos,l.result):(t=eu,e=h(),e===$&&(e=re),e!==$?(r=V(),r!==$?(n=v(),n!==$?(s=V(),s!==$?(u=A(),u===$&&(u=re),u!==$?(ru=t,e=ne(e,n,u),t=e):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J),au[i]={nextPos:eu,result:t},t)}function d(){var t,e,r,n,s,u,i=36*eu+4,l=au[i];return l?(eu=l.nextPos,l.result):(t=eu,e=h(),e!==$?(r=V(),r!==$?(n=v(),n!==$?(s=V(),s!==$?(u=A(),u===$&&(u=re),u!==$?(ru=t,e=ne(e,n,u),t=e):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J),au[i]={nextPos:eu,result:t},t)}function h(){var e,r,n,s=36*eu+5,u=au[s];return u?(eu=u.nextPos,u.result):(lu++,e=eu,r=eu,t.substr(eu,2)===ue?(n=ue,eu+=2):(n=$,0===lu&&l(ie)),n===$&&(47===t.charCodeAt(eu)?(n=le,eu++):(n=$,0===lu&&l(ae)),n===$&&(t.substr(eu,3)===oe?(n=oe,eu+=3):(n=$,0===lu&&l(ce)),n===$&&(t.substr(eu,2)===pe?(n=pe,eu+=2):(n=$,0===lu&&l(fe)),n===$&&(t.substr(eu,3)===de?(n=de,eu+=3):(n=$,0===lu&&l(he)),n===$&&(t.substr(eu,2)===ve?(n=ve,eu+=2):(n=$,0===lu&&l(Ae)),n===$&&(t.substr(eu,4)===ye?(n=ye,eu+=4):(n=$,0===lu&&l(xe)),n===$&&(t.substr(eu,3)===be?(n=be,eu+=3):(n=$,0===lu&&l(Pe))))))))),n!==$&&(n=t.substring(r,eu)),r=n,r!==$&&(ru=e,r=ge(r)),e=r,lu--,e===$&&(r=$,0===lu&&l(se)),au[s]={nextPos:eu,result:e},e)}function v(){var e,r,n=36*eu+6,s=au[n];return s?(eu=s.nextPos,s.result):(e=eu,r=j(),r!==$&&(ru=e,r=Ce(r)),e=r,e===$&&(e=eu,42===t.charCodeAt(eu)?(r=me,eu++):(r=$,0===lu&&l(Se)),r!==$&&(ru=e,r=Qe()),e=r),au[n]={nextPos:eu,result:e},e)}function A(){var e,r,n,s,u,i,a=36*eu+7,o=au[a];return o?(eu=o.nextPos,o.result):(e=eu,91===t.charCodeAt(eu)?(r=we,eu++):(r=$,0===lu&&l(Ee)),r!==$?(n=V(),n!==$?(s=y(),s!==$?(u=V(),u!==$?(93===t.charCodeAt(eu)?(i=Re,eu++):(i=$,0===lu&&l(Te)),i!==$?(ru=e,r=Fe(s),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),au[a]={nextPos:eu,result:e},e)}function y(){var e,r,n,s,u,i,a,o,c,p,f=36*eu+8,d=au[f];return d?(eu=d.nextPos,d.result):(e=eu,r=x(),r!==$?(n=V(),n!==$?(t.substr(eu,2)===Le?(s=Le,eu+=2):(s=$,0===lu&&l(_e)),s!==$?(u=V(),u!==$?(i=x(),i!==$?(ru=e,r=qe(r,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=eu,r=x(),r!==$?(n=V(),n!==$?(63===t.charCodeAt(eu)?(s=Ne,eu++):(s=$,0===lu&&l(je)),s!==$?(u=V(),u!==$?(i=x(),i!==$?(a=V(),a!==$?(58===t.charCodeAt(eu)?(o=ke,eu++):(o=$,0===lu&&l(ze)),o!==$?(c=V(),c!==$?(p=x(),p!==$?(ru=e,r=Ie(r,i,p),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=x())),au[f]={nextPos:eu,result:e},e)}function x(){var e,r,n,s,u,i,a=36*eu+9,o=au[a];return o?(eu=o.nextPos,o.result):(e=eu,r=b(),r!==$?(n=V(),n!==$?(s=eu,t.substr(eu,2)===Ue?(u=Ue,eu+=2):(u=$,0===lu&&l(Ze)),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=x(),i!==$?(ru=e,r=Ve(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=b()),au[a]={nextPos:eu,result:e},e)}function b(){var e,r,n,s,u,i,a=36*eu+10,o=au[a];return o?(eu=o.nextPos,o.result):(e=eu,r=P(),r!==$?(n=V(),n!==$?(s=eu,t.substr(eu,2)===Me?(u=Me,eu+=2):(u=$,0===lu&&l(Be)),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=b(),i!==$?(ru=e,r=Ve(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=P()),au[a]={nextPos:eu,result:e},e)}function P(){var e,r,n,s,u,i,a=36*eu+11,o=au[a];return o?(eu=o.nextPos,o.result):(e=eu,r=g(),r!==$?(n=V(),n!==$?(s=eu,124===t.charCodeAt(eu)?(u=Ge,eu++):(u=$,0===lu&&l(Oe)),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=P(),i!==$?(ru=e,r=Ye(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=g()),au[a]={nextPos:eu,result:e},e)}function g(){var e,r,n,s,u,i,a=36*eu+12,o=au[a];return o?(eu=o.nextPos,o.result):(e=eu,r=C(),r!==$?(n=V(),n!==$?(s=eu,94===t.charCodeAt(eu)?(u=$e,eu++):(u=$,0===lu&&l(De)),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=g(),i!==$?(ru=e,r=Ye(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=C()),au[a]={nextPos:eu,result:e},e)}function C(){var e,r,n,s,u,i,a=36*eu+13,o=au[a];return o?(eu=o.nextPos,o.result):(e=eu,r=m(),r!==$?(n=V(),n!==$?(s=eu,38===t.charCodeAt(eu)?(u=He,eu++):(u=$,0===lu&&l(Je)),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=C(),i!==$?(ru=e,r=Ye(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=m()),au[a]={nextPos:eu,result:e},e)}function m(){var e,r,n,s,u,i,a=36*eu+14,o=au[a];return o?(eu=o.nextPos,o.result):(e=eu,r=S(),r!==$?(n=V(),n!==$?(s=eu,t.substr(eu,2)===Ke?(u=Ke,eu+=2):(u=$,0===lu&&l(We)),u===$&&(t.substr(eu,2)===Xe?(u=Xe,eu+=2):(u=$,0===lu&&l(tr)),u===$&&(t.substr(eu,2)===er?(u=er,eu+=2):(u=$,0===lu&&l(rr)),u===$&&(t.substr(eu,2)===nr?(u=nr,eu+=2):(u=$,0===lu&&l(sr)),u===$&&(60===t.charCodeAt(eu)?(u=ur,eu++):(u=$,0===lu&&l(ir)),u===$&&(62===t.charCodeAt(eu)?(u=lr,eu++):(u=$,0===lu&&l(ar)),u===$&&(t.substr(eu,2)===or?(u=or,eu+=2):(u=$,0===lu&&l(cr)),u===$&&(t.substr(eu,2)===pr?(u=pr,eu+=2):(u=$,0===lu&&l(fr))))))))),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=m(),i!==$?(ru=e,r=dr(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=S()),au[a]={nextPos:eu,result:e},e)}function S(){var e,r,n,s,u,i,a=36*eu+15,o=au[a];return o?(eu=o.nextPos,o.result):(e=eu,r=Q(),r!==$?(n=V(),n!==$?(s=eu,t.substr(eu,2)===hr?(u=hr,eu+=2):(u=$,0===lu&&l(vr)),u===$&&(t.substr(eu,2)===Ar?(u=Ar,eu+=2):(u=$,0===lu&&l(yr))),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=S(),i!==$?(ru=e,r=Ye(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=Q()),au[a]={nextPos:eu,result:e},e)}function Q(){var e,r,n,s,u,i,a=36*eu+16,o=au[a];return o?(eu=o.nextPos,o.result):(e=eu,r=w(),r!==$?(n=V(),n!==$?(s=eu,43===t.charCodeAt(eu)?(u=xr,eu++):(u=$,0===lu&&l(br)),u===$&&(45===t.charCodeAt(eu)?(u=Pr,eu++):(u=$,0===lu&&l(gr))),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=Q(),i!==$?(ru=e,r=Cr(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=w()),au[a]={nextPos:eu,result:e},e)}function w(){var e,r,n,s,u,i,a=36*eu+17,o=au[a];return o?(eu=o.nextPos,o.result):(e=eu,r=E(),r!==$?(n=V(),n!==$?(s=eu,t.substr(eu,2)===mr?(u=mr,eu+=2):(u=$,0===lu&&l(Sr)),u===$&&(42===t.charCodeAt(eu)?(u=me,eu++):(u=$,0===lu&&l(Se)),u===$&&(47===t.charCodeAt(eu)?(u=le,eu++):(u=$,0===lu&&l(ae)),u===$&&(37===t.charCodeAt(eu)?(u=Qr,eu++):(u=$,0===lu&&l(wr))))),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=w(),i!==$?(ru=e,r=Cr(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=E()),au[a]={nextPos:eu,result:e},e)}function E(){var e,r,n,s=36*eu+18,u=au[s];return u?(eu=u.nextPos,u.result):(e=eu,r=eu,33===t.charCodeAt(eu)?(n=Er,eu++):(n=$,0===lu&&l(Rr)),n===$&&(126===t.charCodeAt(eu)?(n=Tr,eu++):(n=$,0===lu&&l(Fr))),n!==$&&(n=t.substring(r,eu)),r=n,r!==$?(n=R(),n!==$?(ru=e,r=Lr(r,n),e=r):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=R()),au[s]={nextPos:eu,result:e},e)}function R(){var t,e=36*eu+19,r=au[e];return r?(eu=r.nextPos,r.result):(t=T(),t===$&&(t=L(),t===$&&(t=_(),t===$&&(t=q(),t===$&&(t=N(),t===$&&(t=p()))))),au[e]={nextPos:eu,result:t},t)}function T(){var e,r,n,s,u,i,a,o,c=36*eu+20,p=au[c];return p?(eu=p.nextPos,p.result):(e=eu,r=j(),r!==$?(n=V(),n!==$?(40===t.charCodeAt(eu)?(s=_r,eu++):(s=$,0===lu&&l(qr)),s!==$?(u=V(),u!==$?(i=F(),i===$&&(i=re),i!==$?(a=V(),a!==$?(41===t.charCodeAt(eu)?(o=Nr,eu++):(o=$,0===lu&&l(jr)),o!==$?(ru=e,r=kr(r,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),au[c]={nextPos:eu,result:e},e)}function F(){var e,r,n,s,u,i,a,o,c=36*eu+21,p=au[c];if(p)return eu=p.nextPos,p.result;if(e=eu,r=y(),r!==$){for(n=[],s=eu,u=V(),u!==$?(44===t.charCodeAt(eu)?(i=W,eu++):(i=$,0===lu&&l(X)),i!==$?(a=V(),a!==$?(o=y(),o!==$?(u=[u,i,a,o],s=u):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J);s!==$;)n.push(s),s=eu,u=V(),u!==$?(44===t.charCodeAt(eu)?(i=W,eu++):(i=$,0===lu&&l(X)),i!==$?(a=V(),a!==$?(o=y(),o!==$?(u=[u,i,a,o],s=u):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J);n!==$?(ru=e,r=zr(r,n),e=r):(eu=e,e=J)}else eu=e,e=J;return au[c]={nextPos:eu,result:e},e}function L(){var e,r,n,s=36*eu+22,u=au[s];return u?(eu=u.nextPos,u.result):(lu++,e=eu,64===t.charCodeAt(eu)?(r=Ur,eu++):(r=$,0===lu&&l(Zr)),r!==$?(n=j(),n!==$?(ru=e,r=Vr(n),e=r):(eu=e,e=J)):(eu=e,e=J),lu--,e===$&&(r=$,0===lu&&l(Ir)),au[s]={nextPos:eu,result:e},e)}function _(){var e,r,n,s,u,i,a=36*eu+23,o=au[a];return o?(eu=o.nextPos,o.result):(lu++,e=eu,123===t.charCodeAt(eu)?(r=Br,eu++):(r=$,0===lu&&l(Gr)),r!==$?(n=V(),n!==$?(s=j(),s!==$?(u=V(),u!==$?(125===t.charCodeAt(eu)?(i=Or,eu++):(i=$,0===lu&&l(Yr)),i!==$?(ru=e,r=$r(s),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),lu--,e===$&&(r=$,0===lu&&l(Mr)),au[a]={nextPos:eu,result:e},e)}function q(){var t,e=36*eu+24,r=au[e];return r?(eu=r.nextPos,r.result):(t=k(),t===$&&(t=I(),t===$&&(t=U(),t===$&&(t=Z()))),au[e]={nextPos:eu,result:t},t)}function N(){var e,r,n,s,u,i,a=36*eu+25,o=au[a];return o?(eu=o.nextPos,o.result):(e=eu,40===t.charCodeAt(eu)?(r=_r,eu++):(r=$,0===lu&&l(qr)),r!==$?(n=V(),n!==$?(s=y(),s!==$?(u=V(),u!==$?(41===t.charCodeAt(eu)?(i=Nr,eu++):(i=$,0===lu&&l(jr)),i!==$?(ru=e,r=Dr(s),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),au[a]={nextPos:eu,result:e},e)}function j(){var e,r,n,s,u,i,a,o=36*eu+26,c=au[o];if(c)return eu=c.nextPos,c.result;if(lu++,e=eu,r=eu,n=eu,s=eu,lu++,u=Z(),lu--,u===$?s=Jr:(eu=s,s=J),s!==$)if(Kr.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===lu&&l(Wr)),u!==$){for(i=[],Xr.test(t.charAt(eu))?(a=t.charAt(eu),eu++):(a=$,0===lu&&l(tn));a!==$;)i.push(a),Xr.test(t.charAt(eu))?(a=t.charAt(eu),eu++):(a=$,0===lu&&l(tn));i!==$?(s=[s,u,i],n=s):(eu=n,n=J)}else eu=n,n=J;else eu=n,n=J;return n!==$&&(n=t.substring(r,eu)),r=n,r!==$&&(ru=e,r=en(r)),e=r,lu--,e===$&&(r=$,0===lu&&l(Hr)),au[o]={nextPos:eu,result:e},e}function k(){var e,r,n,s,u,i=36*eu+27,a=au[i];if(a)return eu=a.nextPos,a.result;if(lu++,e=eu,34===t.charCodeAt(eu)?(r=nn,eu++):(r=$,0===lu&&l(sn)),r!==$){for(n=[],s=z(),s===$&&(un.test(t.charAt(eu))?(s=t.charAt(eu),eu++):(s=$,0===lu&&l(ln)));s!==$;)n.push(s),s=z(),s===$&&(un.test(t.charAt(eu))?(s=t.charAt(eu),eu++):(s=$,0===lu&&l(ln)));n!==$?(34===t.charCodeAt(eu)?(s=nn,eu++):(s=$,0===lu&&l(sn)),s!==$?(ru=e,r=an(n),e=r):(eu=e,e=J)):(eu=e,e=J)}else eu=e,e=J;if(e===$)if(e=eu,39===t.charCodeAt(eu)?(r=on,eu++):(r=$,0===lu&&l(cn)),r!==$){for(n=eu,s=[],t.substr(eu,2)===pn?(u=pn,eu+=2):(u=$,0===lu&&l(fn)),u===$&&(dn.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===lu&&l(hn)));u!==$;)s.push(u),t.substr(eu,2)===pn?(u=pn,eu+=2):(u=$,0===lu&&l(fn)),u===$&&(dn.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===lu&&l(hn)));s!==$&&(s=t.substring(n,eu)),n=s,n!==$?(39===t.charCodeAt(eu)?(s=on,eu++):(s=$,0===lu&&l(cn)),s!==$?(ru=e,r=vn(n),e=r):(eu=e,e=J)):(eu=e,e=J)}else eu=e,e=J;return lu--,e===$&&(r=$,0===lu&&l(rn)),au[i]={nextPos:eu,result:e},e}function z(){var e,r,n,s,u,i,a,o,c=36*eu+28,p=au[c];return p?(eu=p.nextPos,p.result):(lu++,e=eu,t.substr(eu,2)===yn?(r=yn,eu+=2):(r=$,0===lu&&l(xn)),r!==$&&(ru=e,r=bn()),e=r,e===$&&(e=eu,t.substr(eu,2)===Pn?(r=Pn,eu+=2):(r=$,0===lu&&l(gn)),r!==$&&(ru=e,r=Cn()),e=r,e===$&&(e=eu,39===t.charCodeAt(eu)?(r=on,eu++):(r=$,0===lu&&l(cn)),r!==$&&(ru=e,r=mn()),e=r,e===$&&(e=eu,t.substr(eu,2)===Sn?(r=Sn,eu+=2):(r=$,0===lu&&l(Qn)),r!==$&&(ru=e,r=wn()),e=r,e===$&&(e=eu,t.substr(eu,2)===En?(r=En,eu+=2):(r=$,0===lu&&l(Rn)),r!==$&&(ru=e,r=Tn()),e=r,e===$&&(e=eu,t.substr(eu,2)===Fn?(r=Fn,eu+=2):(r=$,0===lu&&l(Ln)),r!==$&&(ru=e,r=_n()),e=r,e===$&&(e=eu,t.substr(eu,2)===qn?(r=qn,eu+=2):(r=$,0===lu&&l(Nn)),r!==$&&(ru=e,r=jn()),e=r,e===$&&(e=eu,t.substr(eu,2)===kn?(r=kn,eu+=2):(r=$,0===lu&&l(zn)),r!==$&&(ru=e,r=In()),e=r,e===$&&(e=eu,t.substr(eu,2)===Un?(r=Un,eu+=2):(r=$,0===lu&&l(Zn)),r!==$&&(ru=e,r=Vn()),e=r,e===$&&(e=eu,t.substr(eu,2)===Mn?(r=Mn,eu+=2):(r=$,0===lu&&l(Bn)),r!==$&&(ru=e,r=Gn()),e=r,e===$&&(e=eu,t.substr(eu,2)===On?(r=On,eu+=2):(r=$,0===lu&&l(Yn)),r!==$?(n=eu,s=eu,$n.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===lu&&l(Dn)),u!==$?($n.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(Dn)),i!==$?(u=[u,i],s=u):(eu=s,s=J)):(eu=s,s=J),s!==$&&(s=t.substring(n,eu)),n=s,n!==$?(ru=e,r=Hn(n),e=r):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=eu,t.substr(eu,2)===Jn?(r=Jn,eu+=2):(r=$,0===lu&&l(Kn)),r!==$?(n=eu,s=eu,$n.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===lu&&l(Dn)),u!==$?($n.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(Dn)),i!==$?($n.test(t.charAt(eu))?(a=t.charAt(eu),eu++):(a=$,0===lu&&l(Dn)),a!==$?($n.test(t.charAt(eu))?(o=t.charAt(eu),eu++):(o=$,0===lu&&l(Dn)),o!==$?(u=[u,i,a,o],s=u):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J),s!==$&&(s=t.substring(n,eu)),n=s,n!==$?(ru=e,r=Hn(n),e=r):(eu=e,e=J)):(eu=e,e=J)))))))))))),lu--,e===$&&(r=$,0===lu&&l(An)),au[c]={nextPos:eu,result:e},e)}function I(){var e,r,n,s,u,i=36*eu+29,a=au[i];if(a)return eu=a.nextPos,a.result;if(lu++,e=eu,47===t.charCodeAt(eu)?(r=le,eu++):(r=$,0===lu&&l(ae)),r!==$){for(n=eu,s=[],t.substr(eu,2)===Xn?(u=Xn,eu+=2):(u=$,0===lu&&l(ts)),u===$&&(es.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===lu&&l(rs)));u!==$;)s.push(u),t.substr(eu,2)===Xn?(u=Xn,eu+=2):(u=$,0===lu&&l(ts)),u===$&&(es.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===lu&&l(rs)));s!==$&&(s=t.substring(n,eu)),n=s,n!==$?(47===t.charCodeAt(eu)?(s=le,eu++):(s=$,0===lu&&l(ae)),s!==$?(ru=e,r=ns(n),e=r):(eu=e,e=J)):(eu=e,e=J)}else eu=e,e=J;return lu--,e===$&&(r=$,0===lu&&l(Wn)),au[i]={nextPos:eu,result:e},e}function U(){var e,r,n,s,u,i,a,o,c,p,f,d,h=36*eu+30,v=au[h];if(v)return eu=v.nextPos,v.result;if(lu++,e=eu,r=eu,us.test(t.charAt(eu))?(n=t.charAt(eu),eu++):(n=$,0===lu&&l(is)),n===$&&(n=re),n!==$&&(n=t.substring(r,eu)),r=n,r!==$)if(t.substr(eu,2)===ls?(n=ls,eu+=2):(n=$,0===lu&&l(as)),n!==$){if(s=eu,u=[],os.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(cs)),i!==$)for(;i!==$;)u.push(i),os.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(cs));else u=J;u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(ru=e,r=ps(r,s),e=r):(eu=e,e=J)}else eu=e,e=J;else eu=e,e=J;if(e===$){if(e=eu,r=eu,us.test(t.charAt(eu))?(n=t.charAt(eu),eu++):(n=$,0===lu&&l(is)),n===$&&(n=re),n!==$&&(n=t.substring(r,eu)),r=n,r!==$)if(t.substr(eu,2)===fs?(n=fs,eu+=2):(n=$,0===lu&&l(ds)),n!==$){if(s=eu,u=[],hs.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(vs)),i!==$)for(;i!==$;)u.push(i),hs.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(vs));else u=J;u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(ru=e,r=As(r,s),e=r):(eu=e,e=J)}else eu=e,e=J;else eu=e,e=J;if(e===$){if(e=eu,r=eu,us.test(t.charAt(eu))?(n=t.charAt(eu),eu++):(n=$,0===lu&&l(is)),n===$&&(n=re),n!==$&&(n=t.substring(r,eu)),r=n,r!==$)if(t.substr(eu,2)===ys?(n=ys,eu+=2):(n=$,0===lu&&l(xs)),n!==$){if(s=eu,u=[],$n.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(Dn)),i!==$)for(;i!==$;)u.push(i),$n.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(Dn));else u=J;u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(ru=e,r=bs(r,s),e=r):(eu=e,e=J)}else eu=e,e=J;else eu=e,e=J;if(e===$){if(e=eu,r=eu,n=eu,us.test(t.charAt(eu))?(s=t.charAt(eu),eu++):(s=$,0===lu&&l(is)),s===$&&(s=re),s!==$){for(u=[],Ps.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(gs));i!==$;)u.push(i),Ps.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(gs));if(u!==$)if(46===t.charCodeAt(eu)?(i=Cs,eu++):(i=$,0===lu&&l(ms)),i!==$){if(a=[],Ps.test(t.charAt(eu))?(o=t.charAt(eu),eu++):(o=$,0===lu&&l(gs)),o!==$)for(;o!==$;)a.push(o),Ps.test(t.charAt(eu))?(o=t.charAt(eu),eu++):(o=$,0===lu&&l(gs));else a=J;if(a!==$){if(o=eu,Ss.test(t.charAt(eu))?(c=t.charAt(eu),eu++):(c=$,0===lu&&l(Qs)),c!==$)if(us.test(t.charAt(eu))?(p=t.charAt(eu),eu++):(p=$,0===lu&&l(is)),p===$&&(p=re),p!==$){if(f=[],Ps.test(t.charAt(eu))?(d=t.charAt(eu),eu++):(d=$,0===lu&&l(gs)),d!==$)for(;d!==$;)f.push(d),Ps.test(t.charAt(eu))?(d=t.charAt(eu),eu++):(d=$,0===lu&&l(gs));else f=J;f!==$?(c=[c,p,f],o=c):(eu=o,o=J)}else eu=o,o=J;else eu=o,o=J;o===$&&(o=re),o!==$?(s=[s,u,i,a,o],n=s):(eu=n,n=J)}else eu=n,n=J}else eu=n,n=J;else eu=n,n=J}else eu=n,n=J;if(n!==$&&(n=t.substring(r,eu)),r=n,r!==$&&(ru=e,r=ws(r)),e=r,e===$){if(e=eu,r=eu,n=eu,us.test(t.charAt(eu))?(s=t.charAt(eu),eu++):(s=$,0===lu&&l(is)),s===$&&(s=re),s!==$){if(u=[],Ps.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(gs)),i!==$)for(;i!==$;)u.push(i),Ps.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(gs));else u=J;u!==$?(s=[s,u],n=s):(eu=n,n=J)}else eu=n,n=J;n!==$&&(n=t.substring(r,eu)),r=n,r!==$&&(ru=e,r=Es(r)),e=r}}}}return lu--,e===$&&(r=$,0===lu&&l(ss)),au[h]={nextPos:eu,result:e},e}function Z(){var e,r,n=36*eu+31,s=au[n];return s?(eu=s.nextPos,s.result):(lu++,e=eu,t.substr(eu,4)===Ts?(r=Ts,eu+=4):(r=$,0===lu&&l(Fs)),r!==$&&(ru=e,r=Ls()),e=r,e===$&&(e=eu,t.substr(eu,5)===_s?(r=_s,eu+=5):(r=$,0===lu&&l(qs)),r!==$&&(ru=e,r=Ns()),e=r,e===$&&(e=eu,t.substr(eu,4)===js?(r=js,eu+=4):(r=$,0===lu&&l(ks)),r!==$&&(ru=e,r=zs()),e=r,e===$&&(e=eu,t.substr(eu,3)===Is?(r=Is,eu+=3):(r=$,0===lu&&l(Us)),r!==$&&(ru=e,r=Zs()),e=r,e===$&&(e=eu,t.substr(eu,9)===Vs?(r=Vs,eu+=9):(r=$,0===lu&&l(Ms)),r!==$&&(ru=e,r=Bs()),e=r)))),lu--,e===$&&(r=$,0===lu&&l(Rs)),au[n]={nextPos:eu,result:e},e)}function V(){var t,e,r=36*eu+32,n=au[r];if(n)return eu=n.nextPos,n.result;for(lu++,t=[],e=M(),e===$&&(e=B());e!==$;)t.push(e),e=M(),e===$&&(e=B());return lu--,t===$&&(e=$,0===lu&&l(Gs)),au[r]={nextPos:eu,result:t},t}function M(){var e,r,n,s,u,i,a=36*eu+33,o=au[a];if(o)return eu=o.nextPos,o.result;if(lu++,e=eu,t.substr(eu,2)===Ys?(r=Ys,eu+=2):(r=$,0===lu&&l($s)),r!==$){for(n=[],s=eu,u=eu,lu++,t.substr(eu,2)===Ds?(i=Ds,eu+=2):(i=$,0===lu&&l(Hs)),lu--,i===$?u=Jr:(eu=u,u=J),u!==$?(t.length>eu?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(Js)),i!==$?(u=[u,i],s=u):(eu=s,s=J)):(eu=s,s=J);s!==$;)n.push(s),s=eu,u=eu,lu++,t.substr(eu,2)===Ds?(i=Ds,eu+=2):(i=$,0===lu&&l(Hs)),lu--,i===$?u=Jr:(eu=u,u=J),u!==$?(t.length>eu?(i=t.charAt(eu),eu++):(i=$,0===lu&&l(Js)),i!==$?(u=[u,i],s=u):(eu=s,s=J)):(eu=s,s=J);n!==$?(t.substr(eu,2)===Ds?(s=Ds,eu+=2):(s=$,0===lu&&l(Hs)),s!==$?(r=[r,n,s],e=r):(eu=e,e=J)):(eu=e,e=J)}else eu=e,e=J;return lu--,e===$&&(r=$,0===lu&&l(Os)),au[a]={nextPos:eu,result:e},e}function B(){var e,r,n=36*eu+34,s=au[n];if(s)return eu=s.nextPos,s.result;if(lu++,e=[],Ws.test(t.charAt(eu))?(r=t.charAt(eu),eu++):(r=$,0===lu&&l(Xs)),r!==$)for(;r!==$;)e.push(r),Ws.test(t.charAt(eu))?(r=t.charAt(eu),eu++):(r=$,0===lu&&l(Xs));else e=J;return lu--,e===$&&(r=$,0===lu&&l(Ks)),au[n]={nextPos:eu,result:e},e}function G(){var e,r,n=36*eu+35,s=au[n];return s?(eu=s.nextPos,s.result):(lu++,e=eu,lu++,t.length>eu?(r=t.charAt(eu),eu++):(r=$,0===lu&&l(Js)),lu--,r===$?e=Jr:(eu=e,e=J),lu--,e===$&&(r=$,0===lu&&l(tu)),au[n]={nextPos:eu,result:e},e)}var O,Y=arguments.length>1?arguments[1]:{},$={},D={query:o},H=o,J=$,K=function(t){return t},W=",",X={type:"literal",value:",",description:'","'},te=function(t,e){return cu("Query").add(ou(t,e,3))},ee=function(t,e){return cu("Path").add(ou(t,e,1))},re=null,ne=function(t,e,r){return cu("Step").add(t,e,r)},se={type:"other",description:"axis"},ue="//",ie={type:"literal",value:"//",description:'"//"'},le="/",ae={type:"literal",value:"/",description:'"/"'},oe="+//",ce={type:"literal",value:"+//",description:'"+//"'},pe="+/",fe={type:"literal",value:"+/",description:'"+/"'},de="-//",he={type:"literal",value:"-//",description:'"-//"'},ve="-/",Ae={type:"literal",value:"-/",description:'"-/"'},ye="..//",xe={type:"literal",value:"..//",description:'"..//"'},be="../",Pe={type:"literal",value:"../",description:'"../"'},ge=function(t){return cu("Axis").set({op:t})},Ce=function(t){return cu("Match").merge(t)},me="*",Se={type:"literal",value:"*",description:'"*"'},Qe=function(){return cu("Match").set({id:"*"})},we="[",Ee={type:"literal",value:"[",description:'"["'},Re="]",Te={type:"literal",value:"]",description:'"]"'},Fe=function(t){return cu("Filter").add(t)},Le="?:",_e={type:"literal",value:"?:",description:'"?:"'},qe=function(t,e){return cu("ConditionalBinary").add(t,e)},Ne="?",je={type:"literal",value:"?",description:'"?"'},ke=":",ze={type:"literal",value:":",description:'":"'},Ie=function(t,e,r){return cu("ConditionalTernary").add(t,e,r)},Ue="||",Ze={type:"literal",value:"||",description:'"||"'},Ve=function(t,e,r){return cu("Logical").set({op:e}).add(t,r)},Me="&&",Be={type:"literal",value:"&&",description:'"&&"'},Ge="|",Oe={type:"literal",value:"|",description:'"|"'},Ye=function(t,e,r){return cu("Bitwise").set({op:e}).add(t,r)},$e="^",De={type:"literal",value:"^",description:'"^"'},He="&",Je={type:"literal",value:"&",description:'"&"'},Ke="==",We={type:"literal",value:"==",description:'"=="'},Xe="!=",tr={type:"literal",value:"!=",description:'"!="'},er="<=",rr={type:"literal",value:"<=",description:'"<="'},nr=">=",sr={type:"literal",value:">=",description:'">="'},ur="<",ir={type:"literal",value:"<",description:'"<"'},lr=">",ar={type:"literal",value:">",description:'">"'},or="=~",cr={type:"literal",value:"=~",description:'"=~"'},pr="!~",fr={type:"literal",value:"!~",description:'"!~"'},dr=function(t,e,r){return cu("Relational").set({op:e}).add(t,r)},hr="<<",vr={type:"literal",value:"<<",description:'"<<"'},Ar=">>",yr={type:"literal",value:">>",description:'">>"'},xr="+",br={type:"literal",value:"+",description:'"+"'},Pr="-",gr={type:"literal",value:"-",description:'"-"'},Cr=function(t,e,r){return cu("Arithmetical").set({op:e}).add(t,r)},mr="**",Sr={type:"literal",value:"**",description:'"**"'},Qr="%",wr={type:"literal",value:"%",description:'"%"'},Er="!",Rr={type:"literal",value:"!",description:'"!"'},Tr="~",Fr={type:"literal",value:"~",description:'"~"'},Lr=function(t,e){return cu("Unary").set({op:t}).add(e)},_r="(",qr={type:"literal",value:"(",description:'"("'},Nr=")",jr={type:"literal",value:")",description:'")"'},kr=function(t,e){return cu("FuncCall").merge(t).add(e)},zr=function(t,e){return ou(t,e,3)},Ir={type:"other",description:"node attribute"},Ur="@",Zr={type:"literal",value:"@",description:'"@"'},Vr=function(t){return cu("Attribute").merge(t)},Mr={type:"other",description:"query parameter reference"},Br="{",Gr={type:"literal",value:"{",description:'"{"'},Or="}",Yr={type:"literal",value:"}",description:'"}"'},$r=function(t){return cu("Param").merge(t)},Dr=function(t){return t},Hr={type:"other",description:"identifier"},Jr=void 0,Kr=/^[a-zA-Z_]/,Wr={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},Xr=/^[a-zA-Z0-9_\-]/,tn={type:"class",value:"[a-zA-Z0-9_\\-]",description:"[a-zA-Z0-9_\\-]"},en=function(t){return cu("Identifier").set({id:t})},rn={type:"other",description:"quoted string literal"},nn='"',sn={type:"literal",value:'"',description:'"\\""'},un=/^[^"]/,ln={type:"class",value:'[^"]',description:'[^"]'},an=function(t){return cu("LiteralString").set({value:t.join("")})},on="'",cn={type:"literal",value:"'",description:'"\'"'},pn="\\'",fn={type:"literal",value:"\\'",description:'"\\\\\'"'},dn=/^[^']/,hn={type:"class",value:"[^']",description:"[^']"},vn=function(t){return cu("LiteralString").set({value:t.replace(/\\'/g,"'")})},An={type:"other",description:"escaped string character"},yn="\\\\",xn={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},bn=function(){return"\\"},Pn='\\"',gn={type:"literal",value:'\\"',description:'"\\\\\\""'},Cn=function(){return'"'},mn=function(){return"'"},Sn="\\b",Qn={type:"literal",value:"\\b",description:'"\\\\b"'},wn=function(){return"\b"},En="\\v",Rn={type:"literal",value:"\\v",description:'"\\\\v"'},Tn=function(){return""},Fn="\\f",Ln={type:"literal",value:"\\f",description:'"\\\\f"'},_n=function(){return"\f"},qn="\\t",Nn={type:"literal",value:"\\t",description:'"\\\\t"'},jn=function(){return"	"},kn="\\r",zn={type:"literal",value:"\\r",description:'"\\\\r"'},In=function(){return"\r"},Un="\\n",Zn={type:"literal",value:"\\n",description:'"\\\\n"'},Vn=function(){return"\n"},Mn="\\e",Bn={type:"literal",value:"\\e",description:'"\\\\e"'},Gn=function(){return""},On="\\x",Yn={type:"literal",value:"\\x",description:'"\\\\x"'},$n=/^[0-9a-fA-F]/,Dn={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},Hn=function(t){return String.fromCharCode(parseInt(t,16))},Jn="\\u",Kn={type:"literal",value:"\\u",description:'"\\\\u"'},Wn={type:"other",description:"regular expression literal"},Xn="\\/",ts={type:"literal",value:"\\/",description:'"\\\\/"'},es=/^[^\/]/,rs={type:"class",value:"[^\\/]",description:"[^\\/]"},ns=function(t){var e;try{e=new RegExp(t.replace(/\\\//g,"/"))}catch(r){u(r.message)}return cu("LiteralRegExp").set({value:e})},ss={type:"other",description:"numeric literal"},us=/^[+\-]/,is={type:"class",value:"[+\\-]",description:"[+\\-]"},ls="0b",as={type:"literal",value:"0b",description:'"0b"'},os=/^[01]/,cs={type:"class",value:"[01]",description:"[01]"},ps=function(t,e){return cu("LiteralNumber").set({value:parseInt(t+e,2)})},fs="0o",ds={type:"literal",value:"0o",description:'"0o"'},hs=/^[0-7]/,vs={type:"class",value:"[0-7]",description:"[0-7]"},As=function(t,e){return cu("LiteralNumber").set({value:parseInt(t+e,8)})},ys="0x",xs={type:"literal",value:"0x",description:'"0x"'},bs=function(t,e){return cu("LiteralNumber").set({value:parseInt(t+e,16)})},Ps=/^[0-9]/,gs={type:"class",value:"[0-9]",description:"[0-9]"},Cs=".",ms={type:"literal",value:".",description:'"."'},Ss=/^[eE]/,Qs={type:"class",value:"[eE]",description:"[eE]"},ws=function(t){return cu("LiteralNumber").set({value:parseFloat(t)})},Es=function(t){return cu("LiteralNumber").set({value:parseInt(t,10)})},Rs={type:"other",description:"global value"},Ts="true",Fs={type:"literal",value:"true",description:'"true"'},Ls=function(){return cu("LiteralValue").set({value:!0})},_s="false",qs={type:"literal",value:"false",description:'"false"'},Ns=function(){return cu("LiteralValue").set({value:!1})},js="null",ks={type:"literal",value:"null",description:'"null"'},zs=function(){return cu("LiteralValue").set({value:null})},Is="NaN",Us={type:"literal",value:"NaN",description:'"NaN"'},Zs=function(){return cu("LiteralValue").set({value:0/0})},Vs="undefined",Ms={type:"literal",value:"undefined",description:'"undefined"'},Bs=function(){return cu("LiteralValue").set({value:void 0})},Gs={type:"other",description:"optional blank"},Os={type:"other",description:"multi-line comment"},Ys="/*",$s={type:"literal",value:"/*",description:'"/*"'},Ds="*/",Hs={type:"literal",value:"*/",description:'"*/"'},Js={type:"any",description:"any character"},Ks={type:"other",description:"any whitespaces"},Ws=/^[ \t\r\n]/,Xs={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},tu={type:"other",description:"end of file"},eu=0,ru=0,nu=0,su={line:1,column:1,seenCR:!1},uu=0,iu=[],lu=0,au={};if("startRule"in Y){if(!(Y.startRule in D))throw new Error("Can't start parsing from rule \""+Y.startRule+'".');H=D[Y.startRule]}var ou=Y.util.makeUnroll(n,s,r,e),cu=Y.util.makeAST(n,s,r,Y);if(O=H(),O!==$&&eu===t.length)return O;throw O!==$&&eu<t.length&&l({type:"end",description:"end of input"}),a(null,iu,uu)}return t(e,Error),{SyntaxError:e,parse:r}}(),ASTQQueryExec=_interopRequire(_dereq_("./astq-query-exec.js")),ASTQQuery=function(){function t(e){_classCallCheck(this,t),this.asty=new ASTY,this.ast=null,e&&this.compile(e)}return _prototypeProperties(t,null,{compile:{value:function(t,e){var r=this;e&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+t);var n=PEGUtil.parse(ASTQQueryParse,t,{startRule:"query",makeAST:function(t,e,n,s){return r.asty.create.apply(r.asty,s).pos(t,e,n)}});if(null!==n.error)throw new Error("ASTQ: compile: query parsing failed:\n"+PEGUtil.errorMessage(n.error,!0).replace(/^/gm,"ERROR: "));return this.ast=n.ast,e&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ")),this},writable:!0,configurable:!0},dump:{value:function(){return this.ast.dump()},writable:!0,configurable:!0},execute:{value:function(t,e,r,n,s){s&&console.log("ASTQ: execute: +--------------------------------------------------------------+----------------------------------------");var u=new ASTQQueryExec(e,r,n,s);return u.execQuery(this.ast,t)},writable:!0,configurable:!0}}),t}();module.exports=ASTQQuery;
},{"./astq-query-exec.js":10,"asty":1,"pegjs-util":3}],13:[function(_dereq_,module,exports){
"use strict";var _prototypeProperties=function(e,r,t){r&&Object.defineProperties(e,r),t&&Object.defineProperties(e.prototype,t)},_classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},ASTQUtil=function(){function e(){_classCallCheck(this,e)}return _prototypeProperties(e,{pad:{value:function r(e,t){var a=0>t?-t:t;if(e.length>a)e=e.substr(0,a);else{var r=Array(a+1-e.length).join(" ");e=0>t?e+r:r+e}return e},writable:!0,configurable:!0},truthy:{value:function(e){var r=void 0;switch(typeof e){case"boolean":r=e;break;case"number":r=0!==e&&!isNaN(e);break;case"string":r=""!==e;break;case"object":r=!1,null!==e&&(r=!0,e instanceof Array&&(r=e.length>0));break;default:r=!1}return r},writable:!0,configurable:!0},coerce:{value:function(e,r){if(typeof e!==r)try{switch(r){case"boolean":e=Boolean(e);break;case"number":e=Number(e);break;case"string":e=String(e);break;case"regexp":e=new RegExp(e)}}catch(t){throw new Error("cannot coerce value into type "+r)}return e},writable:!0,configurable:!0}}),e}();module.exports=ASTQUtil;
},{}],14:[function(_dereq_,module,exports){
"use strict";var version={major:1,minor:2,micro:2,date:20150211};module.exports=version;
},{}],15:[function(_dereq_,module,exports){
"use strict";var _interopRequire=function(e){return e&&e.__esModule?e["default"]:e},_prototypeProperties=function(e,r,t){r&&Object.defineProperties(e,r),t&&Object.defineProperties(e.prototype,t)},_classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},CacheLRU=_dereq_("cache-lru"),ASTQAdapter=_interopRequire(_dereq_("./astq-adapter.js")),ASTQAdapterASTY=_interopRequire(_dereq_("./astq-adapter-asty.js")),ASTQAdapterMOZAST=_interopRequire(_dereq_("./astq-adapter-mozast.js")),ASTQAdapterXMLDOM=_interopRequire(_dereq_("./astq-adapter-xmldom.js")),ASTQFuncs=_interopRequire(_dereq_("./astq-funcs.js")),ASTQFuncsSTD=_interopRequire(_dereq_("./astq-funcs-std.js")),ASTQQuery=_interopRequire(_dereq_("./astq-query.js")),ASTQVersion=_interopRequire(_dereq_("./astq-version.js")),ASTQ=function(){function e(){_classCallCheck(this,e),this._adapter=new ASTQAdapter,this._adapter.register(ASTQAdapterMOZAST),this._adapter.register(ASTQAdapterXMLDOM),this._adapter.register(ASTQAdapterASTY),this._funcs=new ASTQFuncs;for(var r in ASTQFuncsSTD)this.func(r,ASTQFuncsSTD[r]);this._cache=new CacheLRU}return _prototypeProperties(e,null,{version:{value:function(){return ASTQVersion},writable:!0,configurable:!0},adapter:{value:function r(r){if(1!==arguments.length)throw new Error("ASTQ#adapter: invalid number of arguments");return this._adapter.unregister(),this._adapter.register(r),this},writable:!0,configurable:!0},func:{value:function t(e,t){if(2!==arguments.length)throw new Error("ASTQ#func: invalid number of arguments");return this._funcs.register(e,t),this},writable:!0,configurable:!0},cache:{value:function(e){if(1!==arguments.length)throw new Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(e),this},writable:!0,configurable:!0},compile:{value:function(e,r){if(arguments.length<1)throw new Error("ASTQ#compile: too less arguments");if(arguments.length>2)throw new Error("ASTQ#compile: too many arguments");void 0===r&&(r=!1);var t=this._cache.get(e);return void 0===t&&(t=new ASTQQuery,t.compile(e,r),this._cache.set(e,t)),t},writable:!0,configurable:!0},execute:{value:function(e,r,t,n){if(arguments.length<2)throw new Error("ASTQ#execute: too less arguments");if(arguments.length>4)throw new Error("ASTQ#execute: too many arguments");void 0===t&&(t={}),void 0===n&&(n=!1);var i=this._adapter.select(e);if(void 0===i)throw new Error("ASTQ#execute: no suitable adapter found for node");return r.execute(e,i,t,this._funcs,n)},writable:!0,configurable:!0},query:{value:function(e,r,t,n){if(arguments.length<2)throw new Error("ASTQ#query: too less arguments");if(arguments.length>4)throw new Error("ASTQ#query: too many arguments");return void 0===t&&(t={}),void 0===n&&(n=!1),this.execute(e,this.compile(r,n),t,n)},writable:!0,configurable:!0}}),e}();module.exports=ASTQ;
},{"./astq-adapter-asty.js":4,"./astq-adapter-mozast.js":5,"./astq-adapter-xmldom.js":6,"./astq-adapter.js":7,"./astq-funcs-std.js":8,"./astq-funcs.js":9,"./astq-query.js":12,"./astq-version.js":14,"cache-lru":2}]},{},[4,5,6,7,8,9,10,11,12,13,14,15])(15)
});


//# sourceMappingURL=astq.browser.map