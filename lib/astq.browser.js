/*
**  ASTq -- Abstract Syntax Tree (AST) Query Engine
**  Copyright (c) 2014-2016 Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ASTQ = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.ASTY=e()}}(function(){return function e(n,t,r){function o(u,a){if(!t[u]){if(!n[u]){var f="function"==typeof _dereq_&&_dereq_;if(!a&&f)return f(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var c=t[u]={exports:{}};n[u][0].call(c.exports,function(e){var t=n[u][1][e];return o(t?t:e)},c,c.exports,e,n,t,r)}return t[u].exports}for(var i="function"==typeof _dereq_&&_dereq_,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(e,n,t,r){if(arguments.length<2)throw new Error("init: invalid number of arguments");if(this.ctx=e,this.ASTy=!0,this.T=n,this.L={L:0,C:0,O:0},this.A={},this.C=[],this.P=null,"object"===("undefined"==typeof t?"undefined":o(t)))for(var i in t)t.hasOwnProperty(i)&&this.set(i,t[i]);return"object"===("undefined"==typeof r?"undefined":o(r))&&r instanceof Array&&this.add(r),this}},{key:"type",value:function(e){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=e,this;throw new Error("type: invalid number of arguments")}},{key:"pos",value:function(e,n,t){if(0===arguments.length)return{line:this.L.L,column:this.L.C,offset:this.L.O};if(arguments.length<=3)return this.L.L=e||0,this.L.C=n||0,this.L.O=t||0,this;throw new Error("pos: invalid number of arguments")}},{key:"set",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];if(1===t.length&&"object"===o(t[0]))Object.keys(t[0]).forEach(function(n){e.A[n]=t[0][n]});else{if(2!==t.length)throw new Error("set: invalid number of arguments");this.A[t[0]]=t[1]}return this}},{key:"unset",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];if(1===t.length&&"object"===o(t[0])&&t[0]instanceof Array)t[0].forEach(function(n){delete e.A[n]});else{if(1!==t.length)throw new Error("unset: invalid number of arguments");delete this.A[t[0]]}return this}},{key:"get",value:function(e){if(1!==arguments.length)throw new Error("get: invalid number of arguments");if("string"!=typeof e)throw new Error("get: invalid key argument");return this.A[e]}},{key:"attrs",value:function(){return Object.keys(this.A)}},{key:"nth",value:function(){if(null===this.P)return 1;var e=this.P.C.indexOf(this);if(0>e)throw new Error("nth: internal error -- node not in childs of its parent");return e}},{key:"ins",value:function(e){for(var n=this,t=arguments.length,r=Array(t>1?t-1:0),i=1;t>i;i++)r[i-1]=arguments[i];if(0===r.length)throw new Error("ins: invalid number of arguments");if(0>e&&(e=this.C.length+1-e),!(e>=0&&e<=this.C.length))throw new Error("ins: invalid position");var u=function(t){if(!n.ctx.isA(t))throw new Error("ins: invalid AST node argument");n.C.splice(e++,0,t),t.P=n};return r.forEach(function(e){"object"===("undefined"==typeof e?"undefined":o(e))&&e instanceof Array?e.forEach(function(e){u(e)}):null!==e&&u(e)}),this}},{key:"add",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];if(0===t.length)throw new Error("add: invalid number of arguments");var i=function(n){if(!e.ctx.isA(n))throw new Error("add: invalid AST node argument");e.C.push(n),n.P=e};return t.forEach(function(e){"object"===("undefined"==typeof e?"undefined":o(e))&&e instanceof Array?e.forEach(function(e){i(e)}):null!==e&&i(e)}),this}},{key:"del",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];if(0===t.length)throw new Error("del: invalid number of argument");return t.forEach(function(n){if(!e.ctx.isA(n))throw new Error("del: invalid AST node argument");for(var t=!1,r=0;r<e.C.length;r++)if(e.C[r]===n){e.C.splice(r,1),n.P=null,t=!0;break}if(!t)throw new Error("del: AST node not found in childs")}),this}},{key:"childs",value:function(){return this.C}},{key:"parent",value:function(){return this.P}},{key:"serialize",value:function(){return this.ctx.serialize(this.ctx,this)}}]),e}();t["default"]=u},{}],2:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return i(e,[{key:"dump",value:function(e){void 0===e&&(e=1/0);var n="";return this.walk(function(t,r){if(!(r>e)){for(var i=0;r>i;i++)n+="    ";n+=t.T+" ";var u=Object.keys(t.A);u.length>0&&!function(){n+="(";var e=!0;u.forEach(function(r){e?e=!1:n+=", ",n+=r+": ";var i=t.A[r];switch("undefined"==typeof i?"undefined":o(i)){case"boolean":case"number":n+=i.toString();break;case"string":var u=function(e){return e.charCodeAt(0).toString(16).toUpperCase()};n+='"'+i.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+u(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+u(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+u(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+u(e)})+'"';break;case"object":n+=i instanceof RegExp?i.source:JSON.stringify(i);break;default:n+=JSON.stringify(i)}}),n+=") "}(),n+="["+t.L.L+"/"+t.L.C+"]\n"}},"downward"),n}}]),e}();t["default"]=u},{}],3:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"merge",value:function(e){var n=this,t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!this.ctx.isA(e))throw new Error("merge: invalid AST node argument");if(t){var o=e.pos();this.pos(o.L,o.C,o.O)}return e.attrs().forEach(function(t){var o="undefined"!=typeof r[t]?r[t]:t;null!==o&&n.set(o,e.get(t))}),e.childs().forEach(function(e){n.add(e)}),this}}]),e}();t["default"]=i},{}],4:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return i(e,null,[{key:"serialize",value:function(e,n){var t=function r(e){var n={T:e.T,L:{L:e.L.L,C:e.L.C,O:e.L.O}},t=Object.keys(e.A);return t.length>0&&(n.A={},t.forEach(function(t){var r=e.A[t];switch("undefined"==typeof r?"undefined":o(r)){case"boolean":case"number":case"string":n.A[t]=r;break;default:n.A[t]=JSON.parse(JSON.stringify(r))}})),e.C.length>0&&(n.C=e.C.map(function(e){return r(e)})),n};if(!e.isA(n))throw new Error("serialize: not an ASTy node");return JSON.stringify({ASTy:t(n)})}},{key:"unserialize",value:function(e,n){var t=function i(n){var t=e.create(n.T);return t.pos(n.L.L,n.L.C,n.L.O),"object"===o(n.A)&&Object.keys(n.A).forEach(function(e){var r=n.A[e];switch("undefined"==typeof r?"undefined":o(r)){case"boolean":case"number":case"string":t.set(e,r);break;default:t.set(e,JSON.parse(JSON.stringify(r)))}}),"object"===o(n.C)&&n.C instanceof Array&&t.add(n.C.map(function(e){return i(e)})),t},r=JSON.parse(n);if("object"!==("undefined"==typeof r?"undefined":o(r))||"object"!==o(r.ASTy))throw new Error("unserialize: not an ASTy JSON export");return t(r.ASTy)}}]),e}();t["default"]=u},{}],5:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={major:1,minor:4,micro:6,date:20160627};t["default"]=r},{}],6:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"walk",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?"downward":arguments[1],t=function r(t,o,i){"downward"!==n&&"both"!==n||e.call(null,t,o,i,"downward"),t.C.forEach(function(e){r(e,o+1,t)}),"upward"!==n&&"both"!==n||e.call(null,t,o,i,"upward")};return t(this,0,null),this}}]),e}();t["default"]=i},{}],7:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=e("./asty-base.js"),f=r(a),s=e("./asty-merge.js"),c=r(s),l=e("./asty-walk.js"),d=r(l),y=e("./asty-dump.js"),h=r(y),p=e("./asty-serialize.js"),v=r(p),b=e("./asty-version.js"),g=r(b),w=function(){function e(){var n=this;o(this,e),this.ASTYNode=function(){};var t=[[f["default"],"init","type","pos","set","unset","get","attrs","nth","ins","add","del","childs","parent","serialize"],[c["default"],"merge"],[d["default"],"walk"],[h["default"],"dump"]];return t.forEach(function(e){var t=e[0].prototype;e.slice(1).forEach(function(e){n.ASTYNode.prototype[e]=t[e]})}),this}return u(e,[{key:"version",value:function(){return g["default"]}},{key:"extend",value:function(e){for(var n in e)e.hasOwnProperty(n)&&(this.ASTYNode.prototype[n]=e[n]);return this}},{key:"create",value:function(e){return(new this.ASTYNode).init(this,e)}},{key:"isA",value:function(e){return"object"===("undefined"==typeof e?"undefined":i(e))&&e instanceof this.ASTYNode&&"boolean"==typeof e.ASTy&&e.ASTy===!0}},{key:"serialize",value:function(e){return v["default"].serialize(this,e)}},{key:"unserialize",value:function(e){return v["default"].unserialize(this,e)}}]),e}();n.exports=w},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-serialize.js":4,"./asty-version.js":5,"./asty-walk.js":6}]},{},[1,2,3,4,5,6,7])(7)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],2:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.CacheLRU=e()}}(function(){return function e(t,n,i){function r(u,s){if(!n[u]){if(!t[u]){var l="function"==typeof _dereq_&&_dereq_;if(!s&&l)return l(u,!0);if(o)return o(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var a=n[u]={exports:{}};t[u][0].call(a.exports,function(e){var n=t[u][1][e];return r(n?n:e)},a,a.exports,e,t,n,i)}return n[u].exports}for(var o="function"==typeof _dereq_&&_dereq_,u=0;u<i.length;u++)r(i[u]);return r}({1:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){return i(this,e),this._index={},this._LRU={newer:null},this._MRU={older:null},this._LRU.newer=this._MRU,this._MRU.older=this._LRU,this._cur=0,this._max=1/0,this._dispose=function(){},this}return r(e,[{key:"limit",value:function(e){var t=this._max;return arguments.length>0&&(this._max=e,this._purge()),t}},{key:"dispose",value:function(e){return this._dispose=e,this}},{key:"length",value:function(){return this._cur}},{key:"keys",value:function(){return this.each(function(e,t){this.push(t)},[])}},{key:"values",value:function(){return this.each(function(e){this.push(e)},[])}},{key:"each",value:function(e,t){2>arguments&&(t=this);for(var n=0,i=this._MRU.older;i!==this._LRU;)e.call(t,i.val,i.key,n++),i=i.older;return t}},{key:"has",value:function(e){var t=this._index[e];return void 0!==t}},{key:"peek",value:function(e){var t=this._index[e];return void 0!==t?t.expires<Date.now()?void this.del(t.key):t.val:void 0}},{key:"touch",value:function(e){var t=this._index[e];if(void 0===t)throw new Error("touch: no such item");return this._promote(t),this}},{key:"get",value:function(e){var t=this._index[e];return void 0!==t?t.expires<Date.now()?void this.del(t.key):(this._promote(t),t.val):void 0}},{key:"set",value:function(e,t,n){arguments.length<3&&(n=1/0),n+=Date.now();var i=this._index[e];if(void 0===i)i={older:null,newer:null,key:e,val:t,expires:n},this._index[e]=i,this._attach(i),this._cur++,this._purge();else{var r=i.val;i.val=t,this._promote(i),this._dispose.call(void 0,i.key,r,"set")}return this}},{key:"del",value:function(e){var t=this._index[e];if(void 0===t)throw new Error("del: no such item");return delete this._index[e],this._detach(t),this._cur--,this._dispose.call(void 0,e,t.val,"del"),this}},{key:"clear",value:function(){for(;this._cur>0;)this.del(this._LRU.newer.key);return this}},{key:"_purge",value:function(){for(;this._cur>this._max;)this.del(this._LRU.newer.key)}},{key:"_promote",value:function(e){this._detach(e),this._attach(e)}},{key:"_detach",value:function(e){e.older.newer=e.newer,e.newer.older=e.older,e.older=null,e.newer=null}},{key:"_attach",value:function(e){e.older=this._MRU.older,e.newer=this._MRU,e.newer.older=e,e.older.newer=e}}]),e}();t.exports=o},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],3:[function(_dereq_,module,exports){
(function (global){
!function(e,n,r){"function"==typeof define&&"undefined"!=typeof define.amd?define(n,function(){return r(e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=r(e):e[n]=r(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,"PEGUtil",function(){var e={};e.makeAST=function(e,n){return function(){return n.util.__makeAST.call(null,e().start.line,e().start.column,e().start.offset,arguments)}},e.makeUnroll=function(e,n){return function(r,t,o){if("object"!=typeof t||!(t instanceof Array))throw new n.util.__SyntaxError("unroll: invalid list argument for unrolling",typeof t,"Array",e());if("undefined"!=typeof o){"number"==typeof o&&(o=[o]);var a=[];null!==r&&a.push(r);for(var l=0;l<t.length;l++)for(var u=0;u<o.length;u++)a.push(t[l][o[u]]);return a}return null!==r&&t.unshift(r),t}};var n=function(e,n){var r=e.length,t=n-20;0>t&&(t=0);var o=n+20;o>r&&(o=r);var a=function(e){return e.charCodeAt(0).toString(16).toUpperCase()},l=function(e,n,r){return e.substr(n,r).replace(/\\/g,"\\\\").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+a(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+a(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+a(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+a(e)})};return{prolog:l(e,t,n-t),token:l(e,n,1),epilog:l(e,n+1,o-(n+1))}};return e.parse=function(r,t,o){if("object"!=typeof r)throw new Error("invalid parser object (not an object)");if("function"!=typeof r.parse)throw new Error('invalid parser object (no "parse" function)');if("string"!=typeof t)throw new Error("invalid input text (not a string)");if("undefined"!=typeof o&&"object"!=typeof o)throw new Error("invalid options (not an object)");"undefined"==typeof o&&(o={});var a={ast:null,error:null};try{var l;l="function"==typeof o.makeAST?o.makeAST:function(e,n){return{line:e().start.line,column:e().start.column,offset:e().start.offset,args:n}},o.util={makeUnroll:e.makeUnroll,makeAST:e.makeAST,__makeAST:l,__SyntaxError:r.SyntaxError},a.ast=r.parse(t,o),a.error=null}catch(u){if(a.ast=null,u instanceof r.SyntaxError){var i=function(e,n){return"undefined"!=typeof e?e:n};a.error={line:i(u.location.start.line,0),column:i(u.location.start.column,0),message:u.message,found:i(u.found,""),expected:i(u.expected,""),location:n(t,i(u.location.start.offset,0))}}else a.error={line:0,column:0,message:u.message,found:"",expected:"",location:n("",0)}}return a},e.errorMessage=function(e,n){for(var r=e.location,t="line "+e.line+" (column "+e.column+"): ",o="",a=0;a<t.length+r.prolog.length;a++)o+="-";var l=t+r.prolog+r.token+r.epilog+"\n"+o+"^\n"+e.message+(n?"":"\n");return l},e});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],4:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ASTQAdapterASTY=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&"boolean"==typeof e.ASTy}},{key:"getParentNode",value:function(e){return e.parent()}},{key:"getChildNodes",value:function(e){return e.childs()}},{key:"getNodeType",value:function(e){return e.type()}},{key:"getNodeAttrNames",value:function(e){return e.attrs()}},{key:"getNodeAttrValue",value:function(e,t){return e.get(t)}}]),e}();exports["default"]=ASTQAdapterASTY;
},{}],5:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ASTQAdapterMozAST=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e&&"string"==typeof e.type&&""!==e.type}},{key:"getParentNode",value:function(e,t){if("*"!==t&&"parent"!==t)throw new Error('no such axis named "'+t+'" for walking to parent nodes');if("undefined"!=typeof e.parent)return e.parent;throw new Error("Your Mozilla SpiderMonkey AST does not support parent node traversal")}},{key:"getChildNodes",value:function(e,t){var n=this,o=[],r=function(e,t){e.hasOwnProperty(t)&&n.taste(e[t])?o.push(e[t]):e.hasOwnProperty(t)&&"object"===_typeof(e[t])&&e[t]instanceof Array&&e[t].forEach(function(e){n.taste(e)&&o.push(e)})};if("*"===t)for(var a in e)r(e,a);else{if("undefined"==typeof e[t])throw new Error('no such axis named "'+t+'" for walking to child nodes');r(e,t)}return o}},{key:"getNodeType",value:function(e){return e.type}},{key:"getNodeAttrNames",value:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&"object"!==_typeof(e[n])&&"type"!==n&&"loc"!==n&&t.push(n);return t}},{key:"getNodeAttrValue",value:function(e,t){return e.hasOwnProperty(t)&&"object"!==_typeof(e[t])&&"type"!==t&&"loc"!==t?e[t]:void 0}}]),e}();exports["default"]=ASTQAdapterMozAST;
},{}],6:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ASTQAdapterXMLDOM=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof Node?"undefined":_typeof(Node))&&e instanceof Node&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return e.childNodes}},{key:"getNodeType",value:function(e){return e.nodeName}},{key:"getNodeAttrNames",value:function(e){return Array.prototype.slice.call(e.attributes,0).map(function(e){return e.nodeName})}},{key:"getNodeAttrValue",value:function(e,t){return e.getAttribute(t)}}]),e}();exports["default"]=ASTQAdapterXMLDOM;
},{}],7:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),ASTQAdapter=function(){function e(){return _classCallCheck(this,e),this._adapters=[],this}return _createClass(e,[{key:"register",value:function(e){return this._adapters.unshift(e),this}},{key:"unregister",value:function(e){if(void 0===e)this._adapters=[];else{for(var t=[],r=0;r<this._adapters.length;r++)this._adapters[r]!==e&&t.push(this._adapters[r]);this._adapters=t}return this}},{key:"select",value:function(e){for(var t=0;t<this._adapters.length;t++)if(this._adapters[t].taste(e))return this._adapters[t]}}]),e}();exports["default"]=ASTQAdapter;
},{}],8:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},_pos=function(n,t){var e=n.getParentNode(t,"*");if(null===e)return 1;for(var r=n.getChildNodes(e,"*"),o=0;o<r.length;o++)if(r[o]===t)return o+1;throw new Error("cannot find myself")},parents=function n(t,e){for(var n=[];null!==(e=t.getParentNode(e,"*"));)n.push(e);return n},stdfuncs={type:function(n,t){return n.getNodeType(t)},depth:function t(n,e){for(var t=1,r=e;null!==(r=n.getParentNode(r,"*"));)t++;return t},pos:function(n,t){return _pos(n,t)},nth:function(n,t,e){e=parseInt(e,10);var r=n.getParentNode(t,"*");if(null!==r){var o=n.getChildNodes(r,"*");0>e&&(e=o.length-(e+1));for(var u=0;u<o.length;u++)if(o[u]===t)return u+1===e;return!1}return 1===e},first:function(n,t){return stdfuncs.nth(n,t,1)},last:function(n,t){return stdfuncs.nth(n,t,-1)},count:function(n,t,e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e instanceof Array?e.length:"object"===("undefined"==typeof e?"undefined":_typeof(e))?Object.keys(e).length:"string"==typeof e?e.length:String(e).length},below:function(n,t,e){if(!n.taste(e))throw new Error('invalid argument to function "below" (node expected)');for(var r=t;null!==(r=n.getParentNode(r,"*"));)if(r===e)return!0;return!1},follows:function(n,t,e){if(!n.taste(e))throw new Error('invalid argument to function "follows" (node expected)');if(t===e)return!1;var r=[t].concat(parents(n,t)).reverse(),o=[e].concat(parents(n,e)).reverse(),u=Math.min(r.length,o.length),f=void 0;for(f=0;u>f&&r[f]===o[f];f++);if(0===f)throw new Error("internal error: root nodes have to be same same");return f===u?o.length<r.length:_pos(n,r[f])>_pos(n,o[f])},"in":function(n,t,e){if(!("object"===("undefined"==typeof e?"undefined":_typeof(e))&&e instanceof Array))throw new Error('invalid argument to function "in" (array expected)');for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},substr:function(n,t,e,r,o){return String(e).substr(r,o)},index:function(n,t,e,r,o){return String(e).indexOf(r,o)},trim:function(n,t,e){return String(e).trim()},lc:function(n,t,e){return String(e).toLowerCase()},uc:function(n,t,e){return String(e).toUpperCase()}};exports["default"]=stdfuncs;
},{}],9:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),ASTQFuncs=function(){function e(){return _classCallCheck(this,e),this._funcs={},this}return _createClass(e,[{key:"register",value:function(e,n){this._funcs[e]=n}},{key:"run",value:function(e,n){var t=this._funcs[e];if("function"!=typeof t)throw new Error('invalid function "'+e+'"');return t.apply(null,n)}}]),e}();exports["default"]=ASTQFuncs;
},{}],10:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_astqUtil=_dereq_("./astq-util.js"),_astqUtil2=_interopRequireDefault(_astqUtil),_astqQueryTrace=_dereq_("./astq-query-trace.js"),_astqQueryTrace2=_interopRequireDefault(_astqQueryTrace),ASTQQueryExec=function(e){function t(e,r,a,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return n.adapter=e,n.params=r,n.funcs=a,n.trace=i,n}return _inherits(t,e),_createClass(t,[{key:"execQuery",value:function(e,t){var r=this;this.traceBegin(e,t);var a=[];return e.childs().forEach(function(e){a=a.concat(r.execPath(e,t))}),this.traceEnd(e,t,a),a}},{key:"execPath",value:function(e,t){var r=this;this.traceBegin(e,t);var a=[t],i=[],n=!1;return e.childs().forEach(function(e){var t=[];a.forEach(function(a){t=t.concat(r.execStep(e,a))}),a=t,e.get("isResult")&&(n=!0,i=i.concat(a))}),this.traceEnd(e,t,a),n?i:a}},{key:"execStep",value:function(e,t){var r=this;this.traceBegin(e,t);var a=e.childs(),i=null,n=null,c=null,l=0;if(l<a.length&&"Axis"===a[l].type()&&(i=a[l++]),l<a.length&&"Match"===a[l].type()&&(n=a[l++]),l<a.length&&"Filter"===a[l].type()&&(c=a[l++]),null===n)throw new Error("no matching part in query step");var s=[],u=n.get("id"),o=function(e){var t=r.adapter.getNodeType(e);if("*"===u||u===t){var a=!0;null!==c&&(r.execFilter(c,e)||(a=!1)),a&&s.push(e)}};return null!==i?!function(){var e=i.get("op"),a=i.get("type");if("/"===e)r.adapter.getChildNodes(t,a).forEach(function(e){return o(e)});else if("//"===e)!function(){var e=function i(e){o(e),r.adapter.getChildNodes(e,a).forEach(function(e){return i(e)})};r.adapter.getChildNodes(t,a).forEach(function(t){return e(t)})}();else if("-/"===e){var n=r.adapter.getParentNode(t,"*");if(null!==n){for(var c=r.adapter.getChildNodes(n,a),l=null,u=0;u<c.length&&c[u]!==t;u++)l=c[u];null!==l&&o(l)}}else if("-//"===e){var h=r.adapter.getParentNode(t,"*");if(null!==h){for(var d=r.adapter.getChildNodes(h,a),f=0;f<d.length&&d[f]!==t;f++);for(f--;f>=0;f--)o(d[f])}}else if("+/"===e){var p=r.adapter.getParentNode(t,"*");if(null!==p){var x=r.adapter.getChildNodes(p,a),E=void 0;for(E=0;E<x.length&&x[E]!==t;E++);E<x.length&&o(x[++E])}}else if("+//"===e){var v=r.adapter.getParentNode(t,"*");if(null!==v){var g=r.adapter.getChildNodes(v,a),b=void 0;for(b=0;b<g.length&&g[b]!==t;b++);if(b<g.length)for(b++;b<g.length;b++)o(g[b])}}else if("../"===e){var y=r.adapter.getParentNode(t,a);null!==y&&o(y)}else if("..//"===e)for(var _=t;;){var q=r.adapter.getParentNode(_,a);if(null===q)break;o(q),_=q}else"<//"===e?!function(){for(var e={sentinel:t,take:!0};;){var i=r.adapter.getParentNode(t,"*");if(null===i)break;t=i}var n=function c(t){t===e.sentinel&&(e.take=!1),e.take&&o(t),e.take&&r.adapter.getChildNodes(t,a).forEach(function(e){return c(e)})};t!==e.sentinel&&(o(t),r.adapter.getChildNodes(t,a).forEach(function(e){return n(e)})),s=s.reverse()}():">//"===e&&!function(){for(var e={sentinel:t,take:!1};;){var i=r.adapter.getParentNode(t,"*");if(null===i)break;t=i}var n=function c(t){e.take&&o(t),t===e.sentinel&&(e.take=!0),r.adapter.getChildNodes(t,a).forEach(function(e){return c(e)})};r.adapter.getChildNodes(t,a).forEach(function(e){return n(e)})}()}():o(t),this.traceEnd(e,t,s),s}},{key:"execFilter",value:function(e,t){this.traceBegin(e,t);var r=e.childs()[0],a=this.execExpr(r,t);return a=_astqUtil2["default"].truthy(a),this.traceEnd(e,t,a),a}},{key:"execExpr",value:function(e,t){switch(e.type()){case"ConditionalBinary":return this.execExprConditionalBinary(e,t);case"ConditionalTernary":return this.execExprConditionalTernary(e,t);case"Logical":return this.execExprLogical(e,t);case"Bitwise":return this.execExprBitwise(e,t);case"Relational":return this.execExprRelational(e,t);case"Arithmetical":return this.execExprArithmetical(e,t);case"Unary":return this.execExprUnary(e,t);case"FuncCall":return this.execExprFuncCall(e,t);case"Attribute":return this.execExprAttribute(e,t);case"Param":return this.execExprParam(e,t);case"LiteralString":return this.execExprLiteralString(e,t);case"LiteralRegExp":return this.execExprLiteralRegExp(e,t);case"LiteralNumber":return this.execExprLiteralNumber(e,t);case"LiteralValue":return this.execExprLiteralValue(e,t);case"Path":return this.execExprPath(e,t)}}},{key:"execExprConditionalBinary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return _astqUtil2["default"].truthy(r)||(r=this.execExpr(e.childs()[1],t)),this.traceEnd(e,t,r),r}},{key:"execExprConditionalTernary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return r=_astqUtil2["default"].truthy(r)?this.execExpr(e.childs()[1],t):this.execExpr(e.childs()[2],t),this.traceEnd(e,t,r),r}},{key:"execExprLogical",value:function(e,t){this.traceBegin(e,t);var r=!1;switch(e.get("op")){case"&&":r=_astqUtil2["default"].truthy(this.execExpr(e.childs()[0],t)),r&&(r=r&&_astqUtil2["default"].truthy(this.execExpr(e.childs()[1],t)));break;case"||":r=_astqUtil2["default"].truthy(this.execExpr(e.childs()[0],t)),r||(r=r||_astqUtil2["default"].truthy(this.execExpr(e.childs()[1],t)))}return this.traceEnd(e,t,r),r}},{key:"execExprBitwise",value:function(e,t){this.traceBegin(e,t);var r=_astqUtil2["default"].coerce(this.execExpr(e.childs()[0],t),"number"),a=_astqUtil2["default"].coerce(this.execExpr(e.childs()[1],t),"number"),i=void 0;switch(e.get("op")){case"&":i=r&a;break;case"|":i=r|a;break;case"<<":i=r<<a;break;case">>":i=r>>a}return this.traceEnd(e,t,i),i}},{key:"execExprRelational",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),a=this.execExpr(e.childs()[1],t),i=void 0;switch(e.get("op")){case"==":i=r===a;break;case"!=":i=r!==a;break;case"<=":i=_astqUtil2["default"].coerce(r,"number")<=_astqUtil2["default"].coerce(a,"number");break;case">=":i=_astqUtil2["default"].coerce(r,"number")>=_astqUtil2["default"].coerce(a,"number");break;case"<":i=_astqUtil2["default"].coerce(r,"number")<_astqUtil2["default"].coerce(a,"number");break;case">":i=_astqUtil2["default"].coerce(r,"number")>_astqUtil2["default"].coerce(a,"number");break;case"=~":i=null!==_astqUtil2["default"].coerce(r,"string").match(_astqUtil2["default"].coerce(a,"regexp"));break;case"!~":i=null===_astqUtil2["default"].coerce(r,"string").match(_astqUtil2["default"].coerce(a,"regexp"))}return this.traceEnd(e,t,i),i}},{key:"execExprArithmetical",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),a=this.execExpr(e.childs()[1],t),i=void 0;switch(e.get("op")){case"+":i="string"==typeof r?r+_astqUtil2["default"].coerce(a,"string"):_astqUtil2["default"].coerce(r,"number")+_astqUtil2["default"].coerce(a,"number");break;case"-":i=_astqUtil2["default"].coerce(r,"number")+_astqUtil2["default"].coerce(a,"number");break;case"*":i=_astqUtil2["default"].coerce(r,"number")*_astqUtil2["default"].coerce(a,"number");break;case"/":i=_astqUtil2["default"].coerce(r,"number")/_astqUtil2["default"].coerce(a,"number");break;case"%":i=_astqUtil2["default"].coerce(r,"number")%_astqUtil2["default"].coerce(a,"number");break;case"**":i=Math.pow(_astqUtil2["default"].coerce(r,"number"),_astqUtil2["default"].coerce(a,"number"))}return this.traceEnd(e,t,i),i}},{key:"execExprUnary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),a=void 0;switch(e.get("op")){case"!":a=!_astqUtil2["default"].coerce(r,"boolean");break;case"~":a=~_astqUtil2["default"].coerce(r,"number")}return this.traceEnd(e,t,a),a}},{key:"execExprFuncCall",value:function(e,t){var r=this;this.traceBegin(e,t);var a=e.get("id"),i=[this.adapter,t];e.childs().forEach(function(e){i.push(r.execExpr(e,t))});var n=this.funcs.run(a,i);return this.traceEnd(e,t,n),n}},{key:"execExprAttribute",value:function(e,t){this.traceBegin(e,t);var r=e.get("id"),a=this.adapter.getNodeAttrValue(t,r);return this.traceEnd(e,t,a),a}},{key:"execExprParam",value:function(e,t){this.traceBegin(e,t);var r=e.get("id");if("undefined"==typeof this.params[r])throw new Error('invalid parameter "'+r+'"');var a=this.params[r];return this.traceEnd(e,t,a),a}},{key:"execExprLiteralString",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralRegExp",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralNumber",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralValue",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprPath",value:function(e,t){this.traceBegin(e,t);var r=this.execPath(e,t);return this.traceEnd(e,t,r),r}}]),t}(_astqQueryTrace2["default"]);exports["default"]=ASTQQueryExec;
},{"./astq-query-trace.js":11,"./astq-util.js":13}],11:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_astqUtil=_dereq_("./astq-util.js"),_astqUtil2=_interopRequireDefault(_astqUtil),ASTQQueryTrace=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"prefixOf",value:function(e,t){for(var r=0,n=e;null!==(n=n.parent());)r++;var a=_astqUtil2["default"].pad("",4*r);for(r=0,n=t;null!==(n=this.adapter.getParentNode(n,"*"));)r++;var o=_astqUtil2["default"].pad("",4*r);return{prefix1:a,prefix2:o}}},{key:"traceBegin",value:function(e,t){if(this.trace){var r=this.prefixOf(e,t),n=r.prefix1,a=r.prefix2;console.log("ASTQ: execute: | "+_astqUtil2["default"].pad(n+e.type()+" (",-60)+" | "+a+this.adapter.getNodeType(t))}}},{key:"traceEnd",value:function(e,t,r){var n=this;if(this.trace){var a=this.prefixOf(e,t),o=a.prefix1,i=a.prefix2,f=void 0;void 0===r?f="undefined":"object"===("undefined"==typeof r?"undefined":_typeof(r))&&r instanceof Array?(f="[",r.forEach(function(e){f+="node("+n.adapter.getNodeType(e)+"),"}),f=f.replace(/,$/,"")+"]"):f=("undefined"==typeof r?"undefined":_typeof(r))+"("+r+")",f.length>60&&(f=f.substr(0,60)+"..."),console.log("ASTQ: execute: | "+_astqUtil2["default"].pad(o+"): "+f,-60)+" | "+i+this.adapter.getNodeType(t))}}}]),e}();exports["default"]=ASTQQueryTrace;
},{"./astq-util.js":13}],12:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_astqQueryExec=_dereq_("./astq-query-exec.js"),_astqQueryExec2=_interopRequireDefault(_astqQueryExec),ASTY=_dereq_("asty"),PEGUtil=_dereq_("pegjs-util"),ASTQQueryParse=function(){function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,s){this.message=t,this.expected=r,this.found=n,this.location=s,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t){function r(){return u(ls,is)}function n(e){throw l(e,null,t.substring(ls,is),u(ls,is))}function s(e){var r,n,s=as[e];if(s)return s;for(r=e-1;!as[r];)r--;for(s=as[r],s={line:s.line,column:s.column,seenCR:s.seenCR};e>r;)n=t.charAt(r),"\n"===n?(s.seenCR||s.line++,s.column=1,s.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(s.line++,s.column=1,s.seenCR=!0):(s.column++,s.seenCR=!1),r++;return as[e]=s,s}function u(t,e){var r=s(t),n=s(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function i(t){os>is||(is>os&&(os=is,cs=[]),cs.push(t))}function l(t,r,n,s){function u(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function i(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,s,u,i=new Array(t.length);for(u=0;u<t.length;u++)i[u]=t[u].description;return n=t.length>1?i.slice(0,-1).join(", ")+" or "+i[t.length-1]:i[0],s=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+s+" found."}return null!==r&&u(r),new e(null!==t?t:i(r,n),r,n,s)}function a(){var t,e,r,n,s,u=38*is+0,i=fs[u];return i?(is=i.nextPos,i.result):(t=is,e=V(),e!==$?(r=o(),r!==$?(n=V(),n!==$?(s=O(),s!==$?(ls=t,e=K(r),t=e):(is=t,t=$)):(is=t,t=$)):(is=t,t=$)):(is=t,t=$),fs[u]={nextPos:is,result:t},t)}function o(){var e,r,n,s,u,l,a,o,p=38*is+1,f=fs[p];if(f)return is=f.nextPos,f.result;if(e=is,r=c(),r!==$){for(n=[],s=is,u=V(),u!==$?(44===t.charCodeAt(is)?(l=W,is++):(l=$,0===ps&&i(X)),l!==$?(a=V(),a!==$?(o=c(),o!==$?(u=[u,l,a,o],s=u):(is=s,s=$)):(is=s,s=$)):(is=s,s=$)):(is=s,s=$);s!==$;)n.push(s),s=is,u=V(),u!==$?(44===t.charCodeAt(is)?(l=W,is++):(l=$,0===ps&&i(X)),l!==$?(a=V(),a!==$?(o=c(),o!==$?(u=[u,l,a,o],s=u):(is=s,s=$)):(is=s,s=$)):(is=s,s=$)):(is=s,s=$);n!==$?(ls=e,r=tt(r,n),e=r):(is=e,e=$)}else is=e,e=$;return fs[p]={nextPos:is,result:e},e}function c(){var t,e,r,n,s,u,i=38*is+2,l=fs[i];if(l)return is=l.nextPos,l.result;if(t=is,e=p(),e!==$){for(r=[],n=is,s=V(),s!==$?(u=f(),u!==$?(s=[s,u],n=s):(is=n,n=$)):(is=n,n=$);n!==$;)r.push(n),n=is,s=V(),s!==$?(u=f(),u!==$?(s=[s,u],n=s):(is=n,n=$)):(is=n,n=$);r!==$?(ls=t,e=et(e,r),t=e):(is=t,t=$)}else is=t,t=$;return fs[i]={nextPos:is,result:t},t}function p(){var e,r,n,s,u,l,a,o,c=38*is+3,p=fs[c];return p?(is=p.nextPos,p.result):(e=is,r=d(),r===$&&(r=null),r!==$?(n=V(),n!==$?(s=v(),s!==$?(u=V(),u!==$?(33===t.charCodeAt(is)?(l=rt,is++):(l=$,0===ps&&i(nt)),l===$&&(l=null),l!==$?(a=V(),a!==$?(o=A(),o===$&&(o=null),o!==$?(ls=e,r=st(r,s,l,o),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),fs[c]={nextPos:is,result:e},e)}function f(){var e,r,n,s,u,l,a,o,c=38*is+4,p=fs[c];return p?(is=p.nextPos,p.result):(e=is,r=d(),r!==$?(n=V(),n!==$?(s=v(),s!==$?(u=V(),u!==$?(33===t.charCodeAt(is)?(l=rt,is++):(l=$,0===ps&&i(nt)),l===$&&(l=null),l!==$?(a=V(),a!==$?(o=A(),o===$&&(o=null),o!==$?(ls=e,r=st(r,s,l,o),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),fs[c]={nextPos:is,result:e},e)}function d(){var e,r,n,s=38*is+5,u=fs[s];return u?(is=u.nextPos,u.result):(ps++,e=is,r=is,t.substr(is,2)===it?(n=it,is+=2):(n=$,0===ps&&i(lt)),n===$&&(47===t.charCodeAt(is)?(n=at,is++):(n=$,0===ps&&i(ot)),n===$&&(t.substr(is,3)===ct?(n=ct,is+=3):(n=$,0===ps&&i(pt)),n===$&&(t.substr(is,2)===ft?(n=ft,is+=2):(n=$,0===ps&&i(dt)),n===$&&(t.substr(is,3)===ht?(n=ht,is+=3):(n=$,0===ps&&i(vt)),n===$&&(t.substr(is,2)===At?(n=At,is+=2):(n=$,0===ps&&i(yt)),n===$&&(t.substr(is,4)===xt?(n=xt,is+=4):(n=$,0===ps&&i(bt)),n===$&&(t.substr(is,3)===Pt?(n=Pt,is+=3):(n=$,0===ps&&i(gt)),n===$&&(t.substr(is,3)===Ct?(n=Ct,is+=3):(n=$,0===ps&&i(mt)),n===$&&(t.substr(is,3)===Et?(n=Et,is+=3):(n=$,0===ps&&i(St))))))))))),r=n!==$?t.substring(r,is):n,r!==$?(n=h(),n===$&&(n=null),n!==$?(ls=e,r=Rt(r,n),e=r):(is=e,e=$)):(is=e,e=$),ps--,e===$&&(r=$,0===ps&&i(ut)),fs[s]={nextPos:is,result:e},e)}function h(){var e,r,n,s,u=38*is+6,l=fs[u];return l?(is=l.nextPos,l.result):(e=is,58===t.charCodeAt(is)?(r=Qt,is++):(r=$,0===ps&&i(_t)),r!==$?(n=is,s=k(),n=s!==$?t.substring(n,is):s,n!==$?(ls=e,r=qt(n),e=r):(is=e,e=$)):(is=e,e=$),fs[u]={nextPos:is,result:e},e)}function v(){var e,r,n=38*is+7,s=fs[n];return s?(is=s.nextPos,s.result):(e=is,r=k(),r!==$&&(ls=e,r=Tt(r)),e=r,e===$&&(e=is,42===t.charCodeAt(is)?(r=wt,is++):(r=$,0===ps&&i(Ft)),r!==$&&(ls=e,r=Lt()),e=r),fs[n]={nextPos:is,result:e},e)}function A(){var e,r,n,s,u,l,a=38*is+8,o=fs[a];return o?(is=o.nextPos,o.result):(e=is,91===t.charCodeAt(is)?(r=Nt,is++):(r=$,0===ps&&i(kt)),r!==$?(n=V(),n!==$?(s=y(),s!==$?(u=V(),u!==$?(93===t.charCodeAt(is)?(l=jt,is++):(l=$,0===ps&&i(zt)),l!==$?(ls=e,r=It(s),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),fs[a]={nextPos:is,result:e},e)}function y(){var e,r,n,s,u,l,a,o,c,p,f=38*is+9,d=fs[f];return d?(is=d.nextPos,d.result):(e=is,r=x(),r!==$?(n=V(),n!==$?(t.substr(is,2)===Ut?(s=Ut,is+=2):(s=$,0===ps&&i(Zt)),s!==$?(u=V(),u!==$?(l=x(),l!==$?(ls=e,r=Mt(r,l),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),e===$&&(e=is,r=x(),r!==$?(n=V(),n!==$?(63===t.charCodeAt(is)?(s=Vt,is++):(s=$,0===ps&&i(Bt)),s!==$?(u=V(),u!==$?(l=x(),l!==$?(a=V(),a!==$?(58===t.charCodeAt(is)?(o=Qt,is++):(o=$,0===ps&&i(_t)),o!==$?(c=V(),c!==$?(p=x(),p!==$?(ls=e,r=Gt(r,l,p),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),e===$&&(e=x())),fs[f]={nextPos:is,result:e},e)}function x(){var e,r,n,s,u,l,a=38*is+10,o=fs[a];return o?(is=o.nextPos,o.result):(e=is,r=b(),r!==$?(n=V(),n!==$?(s=is,t.substr(is,2)===Ot?(u=Ot,is+=2):(u=$,0===ps&&i(Dt)),s=u!==$?t.substring(s,is):u,s!==$?(u=V(),u!==$?(l=x(),l!==$?(ls=e,r=Yt(r,s,l),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),e===$&&(e=b()),fs[a]={nextPos:is,result:e},e)}function b(){var e,r,n,s,u,l,a=38*is+11,o=fs[a];return o?(is=o.nextPos,o.result):(e=is,r=P(),r!==$?(n=V(),n!==$?(s=is,t.substr(is,2)===$t?(u=$t,is+=2):(u=$,0===ps&&i(Ht)),s=u!==$?t.substring(s,is):u,s!==$?(u=V(),u!==$?(l=b(),l!==$?(ls=e,r=Yt(r,s,l),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),e===$&&(e=P()),fs[a]={nextPos:is,result:e},e)}function P(){var e,r,n,s,u,l,a=38*is+12,o=fs[a];return o?(is=o.nextPos,o.result):(e=is,r=g(),r!==$?(n=V(),n!==$?(s=is,124===t.charCodeAt(is)?(u=Jt,is++):(u=$,0===ps&&i(Kt)),s=u!==$?t.substring(s,is):u,s!==$?(u=V(),u!==$?(l=P(),l!==$?(ls=e,r=Wt(r,s,l),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),e===$&&(e=g()),fs[a]={nextPos:is,result:e},e)}function g(){var e,r,n,s,u,l,a=38*is+13,o=fs[a];return o?(is=o.nextPos,o.result):(e=is,r=C(),r!==$?(n=V(),n!==$?(s=is,94===t.charCodeAt(is)?(u=Xt,is++):(u=$,0===ps&&i(te)),s=u!==$?t.substring(s,is):u,s!==$?(u=V(),u!==$?(l=g(),l!==$?(ls=e,r=Wt(r,s,l),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),e===$&&(e=C()),fs[a]={nextPos:is,result:e},e)}function C(){var e,r,n,s,u,l,a=38*is+14,o=fs[a];return o?(is=o.nextPos,o.result):(e=is,r=m(),r!==$?(n=V(),n!==$?(s=is,38===t.charCodeAt(is)?(u=ee,is++):(u=$,0===ps&&i(re)),s=u!==$?t.substring(s,is):u,s!==$?(u=V(),u!==$?(l=C(),l!==$?(ls=e,r=Wt(r,s,l),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),e===$&&(e=m()),fs[a]={nextPos:is,result:e},e)}function m(){var e,r,n,s,u,l,a=38*is+15,o=fs[a];return o?(is=o.nextPos,o.result):(e=is,r=E(),r!==$?(n=V(),n!==$?(s=is,t.substr(is,2)===ne?(u=ne,is+=2):(u=$,0===ps&&i(se)),u===$&&(t.substr(is,2)===ue?(u=ue,is+=2):(u=$,0===ps&&i(ie)),u===$&&(t.substr(is,2)===le?(u=le,is+=2):(u=$,0===ps&&i(ae)),u===$&&(t.substr(is,2)===oe?(u=oe,is+=2):(u=$,0===ps&&i(ce)),u===$&&(60===t.charCodeAt(is)?(u=pe,is++):(u=$,0===ps&&i(fe)),u===$&&(62===t.charCodeAt(is)?(u=de,is++):(u=$,0===ps&&i(he)),u===$&&(t.substr(is,2)===ve?(u=ve,is+=2):(u=$,0===ps&&i(Ae)),u===$&&(t.substr(is,2)===ye?(u=ye,is+=2):(u=$,0===ps&&i(xe))))))))),s=u!==$?t.substring(s,is):u,s!==$?(u=V(),u!==$?(l=m(),l!==$?(ls=e,r=be(r,s,l),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),e===$&&(e=E()),fs[a]={nextPos:is,result:e},e)}function E(){var e,r,n,s,u,l,a=38*is+16,o=fs[a];return o?(is=o.nextPos,o.result):(e=is,r=S(),r!==$?(n=V(),n!==$?(s=is,t.substr(is,2)===Pe?(u=Pe,is+=2):(u=$,0===ps&&i(ge)),u===$&&(t.substr(is,2)===Ce?(u=Ce,is+=2):(u=$,0===ps&&i(me))),s=u!==$?t.substring(s,is):u,s!==$?(u=V(),u!==$?(l=E(),l!==$?(ls=e,r=Wt(r,s,l),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),e===$&&(e=S()),fs[a]={nextPos:is,result:e},e)}function S(){var e,r,n,s,u,l,a=38*is+17,o=fs[a];return o?(is=o.nextPos,o.result):(e=is,r=R(),r!==$?(n=V(),n!==$?(s=is,43===t.charCodeAt(is)?(u=Ee,is++):(u=$,0===ps&&i(Se)),u===$&&(45===t.charCodeAt(is)?(u=Re,is++):(u=$,0===ps&&i(Qe))),s=u!==$?t.substring(s,is):u,s!==$?(u=V(),u!==$?(l=S(),l!==$?(ls=e,r=_e(r,s,l),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),e===$&&(e=R()),fs[a]={nextPos:is,result:e},e)}function R(){var e,r,n,s,u,l,a=38*is+18,o=fs[a];return o?(is=o.nextPos,o.result):(e=is,r=Q(),r!==$?(n=V(),n!==$?(s=is,t.substr(is,2)===qe?(u=qe,is+=2):(u=$,0===ps&&i(Te)),u===$&&(42===t.charCodeAt(is)?(u=wt,is++):(u=$,0===ps&&i(Ft)),u===$&&(47===t.charCodeAt(is)?(u=at,is++):(u=$,0===ps&&i(ot)),u===$&&(37===t.charCodeAt(is)?(u=we,is++):(u=$,0===ps&&i(Fe))))),s=u!==$?t.substring(s,is):u,s!==$?(u=V(),u!==$?(l=R(),l!==$?(ls=e,r=_e(r,s,l),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),e===$&&(e=Q()),fs[a]={nextPos:is,result:e},e)}function Q(){var e,r,n,s=38*is+19,u=fs[s];return u?(is=u.nextPos,u.result):(e=is,r=is,33===t.charCodeAt(is)?(n=rt,is++):(n=$,0===ps&&i(nt)),n===$&&(126===t.charCodeAt(is)?(n=Le,is++):(n=$,0===ps&&i(Ne))),r=n!==$?t.substring(r,is):n,r!==$?(n=_(),n!==$?(ls=e,r=ke(r,n),e=r):(is=e,e=$)):(is=e,e=$),e===$&&(e=_()),fs[s]={nextPos:is,result:e},e)}function _(){var t,e=38*is+20,r=fs[e];return r?(is=r.nextPos,r.result):(t=q(),t===$&&(t=w(),t===$&&(t=F(),t===$&&(t=L(),t===$&&(t=N(),t===$&&(t=c()))))),fs[e]={nextPos:is,result:t},t)}function q(){var e,r,n,s,u,l,a,o,c=38*is+21,p=fs[c];return p?(is=p.nextPos,p.result):(e=is,r=k(),r!==$?(n=V(),n!==$?(40===t.charCodeAt(is)?(s=je,is++):(s=$,0===ps&&i(ze)),s!==$?(u=V(),u!==$?(l=T(),l===$&&(l=null),l!==$?(a=V(),a!==$?(41===t.charCodeAt(is)?(o=Ie,is++):(o=$,0===ps&&i(Ue)),o!==$?(ls=e,r=Ze(r,l),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),fs[c]={nextPos:is,result:e},e)}function T(){var e,r,n,s,u,l,a,o,c=38*is+22,p=fs[c];if(p)return is=p.nextPos,p.result;if(e=is,r=y(),r!==$){for(n=[],s=is,u=V(),u!==$?(44===t.charCodeAt(is)?(l=W,is++):(l=$,0===ps&&i(X)),l!==$?(a=V(),a!==$?(o=y(),o!==$?(u=[u,l,a,o],s=u):(is=s,s=$)):(is=s,s=$)):(is=s,s=$)):(is=s,s=$);s!==$;)n.push(s),s=is,u=V(),u!==$?(44===t.charCodeAt(is)?(l=W,is++):(l=$,0===ps&&i(X)),l!==$?(a=V(),a!==$?(o=y(),o!==$?(u=[u,l,a,o],s=u):(is=s,s=$)):(is=s,s=$)):(is=s,s=$)):(is=s,s=$);n!==$?(ls=e,r=Me(r,n),e=r):(is=e,e=$)}else is=e,e=$;return fs[c]={nextPos:is,result:e},e}function w(){var e,r,n,s=38*is+23,u=fs[s];return u?(is=u.nextPos,u.result):(ps++,e=is,64===t.charCodeAt(is)?(r=Be,is++):(r=$,0===ps&&i(Ge)),r!==$?(n=k(),n!==$?(ls=e,r=Oe(n),e=r):(is=e,e=$)):(is=e,e=$),ps--,e===$&&(r=$,0===ps&&i(Ve)),fs[s]={nextPos:is,result:e},e)}function F(){var e,r,n,s,u,l,a=38*is+24,o=fs[a];return o?(is=o.nextPos,o.result):(ps++,e=is,123===t.charCodeAt(is)?(r=Ye,is++):(r=$,0===ps&&i($e)),r!==$?(n=V(),n!==$?(s=k(),s!==$?(u=V(),u!==$?(125===t.charCodeAt(is)?(l=He,is++):(l=$,0===ps&&i(Je)),l!==$?(ls=e,r=Ke(s),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),ps--,e===$&&(r=$,0===ps&&i(De)),fs[a]={nextPos:is,result:e},e)}function L(){var t,e=38*is+25,r=fs[e];return r?(is=r.nextPos,r.result):(t=j(),t===$&&(t=U(),t===$&&(t=Z(),t===$&&(t=M()))),fs[e]={nextPos:is,result:t},t)}function N(){var e,r,n,s,u,l,a=38*is+26,o=fs[a];return o?(is=o.nextPos,o.result):(e=is,40===t.charCodeAt(is)?(r=je,is++):(r=$,0===ps&&i(ze)),r!==$?(n=V(),n!==$?(s=y(),s!==$?(u=V(),u!==$?(41===t.charCodeAt(is)?(l=Ie,is++):(l=$,0===ps&&i(Ue)),l!==$?(ls=e,r=We(s),e=r):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$)):(is=e,e=$),fs[a]={nextPos:is,result:e},e)}function k(){var e,r,n,s,u,l,a,o=38*is+27,c=fs[o];if(c)return is=c.nextPos,c.result;if(ps++,e=is,r=is,n=is,s=is,ps++,u=M(),ps--,u===$?s=void 0:(is=s,s=$),s!==$)if(tr.test(t.charAt(is))?(u=t.charAt(is),is++):(u=$,0===ps&&i(er)),u!==$){for(l=[],rr.test(t.charAt(is))?(a=t.charAt(is),is++):(a=$,0===ps&&i(nr));a!==$;)l.push(a),rr.test(t.charAt(is))?(a=t.charAt(is),is++):(a=$,0===ps&&i(nr));l!==$?(s=[s,u,l],n=s):(is=n,n=$)}else is=n,n=$;else is=n,n=$;return r=n!==$?t.substring(r,is):n,r!==$&&(ls=e,r=sr(r)),e=r,ps--,e===$&&(r=$,0===ps&&i(Xe)),fs[o]={nextPos:is,result:e},e}function j(){var e,r,n,s,u=38*is+28,l=fs[u];if(l)return is=l.nextPos,l.result;if(ps++,e=is,34===t.charCodeAt(is)?(r=ir,is++):(r=$,0===ps&&i(lr)),r!==$){for(n=[],s=z(),s===$&&(ar.test(t.charAt(is))?(s=t.charAt(is),is++):(s=$,0===ps&&i(or)));s!==$;)n.push(s),s=z(),s===$&&(ar.test(t.charAt(is))?(s=t.charAt(is),is++):(s=$,0===ps&&i(or)));n!==$?(34===t.charCodeAt(is)?(s=ir,is++):(s=$,0===ps&&i(lr)),s!==$?(ls=e,r=cr(n),e=r):(is=e,e=$)):(is=e,e=$)}else is=e,e=$;if(e===$)if(e=is,39===t.charCodeAt(is)?(r=pr,is++):(r=$,0===ps&&i(fr)),r!==$){for(n=[],s=I(),s===$&&(dr.test(t.charAt(is))?(s=t.charAt(is),is++):(s=$,0===ps&&i(hr)));s!==$;)n.push(s),s=I(),s===$&&(dr.test(t.charAt(is))?(s=t.charAt(is),is++):(s=$,0===ps&&i(hr)));n!==$?(39===t.charCodeAt(is)?(s=pr,is++):(s=$,0===ps&&i(fr)),s!==$?(ls=e,r=cr(n),e=r):(is=e,e=$)):(is=e,e=$)}else is=e,e=$;return ps--,e===$&&(r=$,0===ps&&i(ur)),fs[u]={nextPos:is,result:e},e}function z(){var e,r,n,s,u,l,a,o,c=38*is+29,p=fs[c];return p?(is=p.nextPos,p.result):(ps++,e=is,t.substr(is,2)===Ar?(r=Ar,is+=2):(r=$,0===ps&&i(yr)),r!==$&&(ls=e,r=xr()),e=r,e===$&&(e=is,t.substr(is,2)===br?(r=br,is+=2):(r=$,0===ps&&i(Pr)),r!==$&&(ls=e,r=gr()),e=r,e===$&&(e=is,t.substr(is,2)===Cr?(r=Cr,is+=2):(r=$,0===ps&&i(mr)),r!==$&&(ls=e,r=Er()),e=r,e===$&&(e=is,t.substr(is,2)===Sr?(r=Sr,is+=2):(r=$,0===ps&&i(Rr)),r!==$&&(ls=e,r=Qr()),e=r,e===$&&(e=is,t.substr(is,2)===_r?(r=_r,is+=2):(r=$,0===ps&&i(qr)),r!==$&&(ls=e,r=Tr()),e=r,e===$&&(e=is,t.substr(is,2)===wr?(r=wr,is+=2):(r=$,0===ps&&i(Fr)),r!==$&&(ls=e,r=Lr()),e=r,e===$&&(e=is,t.substr(is,2)===Nr?(r=Nr,is+=2):(r=$,0===ps&&i(kr)),r!==$&&(ls=e,r=jr()),e=r,e===$&&(e=is,t.substr(is,2)===zr?(r=zr,is+=2):(r=$,0===ps&&i(Ir)),r!==$&&(ls=e,r=Ur()),e=r,e===$&&(e=is,t.substr(is,2)===Zr?(r=Zr,is+=2):(r=$,0===ps&&i(Mr)),r!==$&&(ls=e,r=Vr()),e=r,e===$&&(e=is,t.substr(is,2)===Br?(r=Br,is+=2):(r=$,0===ps&&i(Gr)),r!==$?(n=is,s=is,Or.test(t.charAt(is))?(u=t.charAt(is),is++):(u=$,0===ps&&i(Dr)),u!==$?(Or.test(t.charAt(is))?(l=t.charAt(is),is++):(l=$,0===ps&&i(Dr)),l!==$?(u=[u,l],s=u):(is=s,s=$)):(is=s,s=$),n=s!==$?t.substring(n,is):s,n!==$?(ls=e,r=Yr(n),e=r):(is=e,e=$)):(is=e,e=$),e===$&&(e=is,t.substr(is,2)===$r?(r=$r,is+=2):(r=$,0===ps&&i(Hr)),r!==$?(n=is,s=is,Or.test(t.charAt(is))?(u=t.charAt(is),is++):(u=$,0===ps&&i(Dr)),u!==$?(Or.test(t.charAt(is))?(l=t.charAt(is),is++):(l=$,0===ps&&i(Dr)),l!==$?(Or.test(t.charAt(is))?(a=t.charAt(is),is++):(a=$,0===ps&&i(Dr)),a!==$?(Or.test(t.charAt(is))?(o=t.charAt(is),is++):(o=$,0===ps&&i(Dr)),o!==$?(u=[u,l,a,o],s=u):(is=s,s=$)):(is=s,s=$)):(is=s,s=$)):(is=s,s=$),n=s!==$?t.substring(n,is):s,n!==$?(ls=e,r=Yr(n),e=r):(is=e,e=$)):(is=e,e=$))))))))))),ps--,e===$&&(r=$,0===ps&&i(vr)),fs[c]={nextPos:is,result:e},e)}function I(){var e,r,n=38*is+30,s=fs[n];return s?(is=s.nextPos,s.result):(ps++,e=is,t.substr(is,2)===Kr?(r=Kr,is+=2):(r=$,0===ps&&i(Wr)),r!==$&&(ls=e,r=Xr()),e=r,ps--,e===$&&(r=$,0===ps&&i(Jr)),fs[n]={nextPos:is,result:e},e)}function U(){var e,r,n,s,u,l=38*is+31,a=fs[l];if(a)return is=a.nextPos,a.result;if(ps++,e=is,96===t.charCodeAt(is)?(r=en,is++):(r=$,0===ps&&i(rn)),r!==$){for(n=is,s=[],t.substr(is,2)===nn?(u=nn,is+=2):(u=$,0===ps&&i(sn)),u===$&&(un.test(t.charAt(is))?(u=t.charAt(is),is++):(u=$,0===ps&&i(ln)));u!==$;)s.push(u),t.substr(is,2)===nn?(u=nn,is+=2):(u=$,0===ps&&i(sn)),u===$&&(un.test(t.charAt(is))?(u=t.charAt(is),is++):(u=$,0===ps&&i(ln)));n=s!==$?t.substring(n,is):s,n!==$?(96===t.charCodeAt(is)?(s=en,is++):(s=$,0===ps&&i(rn)),s!==$?(ls=e,r=an(n),e=r):(is=e,e=$)):(is=e,e=$)}else is=e,e=$;return ps--,e===$&&(r=$,0===ps&&i(tn)),fs[l]={nextPos:is,result:e},e}function Z(){var e,r,n,s,u,l,a,o,c,p,f,d,h=38*is+32,v=fs[h];if(v)return is=v.nextPos,v.result;if(ps++,e=is,r=is,cn.test(t.charAt(is))?(n=t.charAt(is),is++):(n=$,0===ps&&i(pn)),n===$&&(n=null),r=n!==$?t.substring(r,is):n,r!==$)if(t.substr(is,2)===fn?(n=fn,is+=2):(n=$,0===ps&&i(dn)),n!==$){if(s=is,u=[],hn.test(t.charAt(is))?(l=t.charAt(is),is++):(l=$,0===ps&&i(vn)),l!==$)for(;l!==$;)u.push(l),hn.test(t.charAt(is))?(l=t.charAt(is),is++):(l=$,0===ps&&i(vn));else u=$;s=u!==$?t.substring(s,is):u,s!==$?(ls=e,r=An(r,s),e=r):(is=e,e=$)}else is=e,e=$;else is=e,e=$;if(e===$){if(e=is,r=is,cn.test(t.charAt(is))?(n=t.charAt(is),is++):(n=$,0===ps&&i(pn)),n===$&&(n=null),r=n!==$?t.substring(r,is):n,r!==$)if(t.substr(is,2)===yn?(n=yn,is+=2):(n=$,0===ps&&i(xn)),n!==$){if(s=is,u=[],bn.test(t.charAt(is))?(l=t.charAt(is),is++):(l=$,0===ps&&i(Pn)),l!==$)for(;l!==$;)u.push(l),bn.test(t.charAt(is))?(l=t.charAt(is),is++):(l=$,0===ps&&i(Pn));else u=$;s=u!==$?t.substring(s,is):u,s!==$?(ls=e,r=gn(r,s),e=r):(is=e,e=$)}else is=e,e=$;else is=e,e=$;if(e===$){if(e=is,r=is,cn.test(t.charAt(is))?(n=t.charAt(is),is++):(n=$,0===ps&&i(pn)),n===$&&(n=null),r=n!==$?t.substring(r,is):n,r!==$)if(t.substr(is,2)===Cn?(n=Cn,is+=2):(n=$,0===ps&&i(mn)),n!==$){if(s=is,u=[],Or.test(t.charAt(is))?(l=t.charAt(is),is++):(l=$,0===ps&&i(Dr)),l!==$)for(;l!==$;)u.push(l),Or.test(t.charAt(is))?(l=t.charAt(is),is++):(l=$,0===ps&&i(Dr));else u=$;s=u!==$?t.substring(s,is):u,s!==$?(ls=e,r=En(r,s),e=r):(is=e,e=$)}else is=e,e=$;else is=e,e=$;if(e===$){if(e=is,r=is,n=is,cn.test(t.charAt(is))?(s=t.charAt(is),is++):(s=$,0===ps&&i(pn)),s===$&&(s=null),s!==$){for(u=[],Sn.test(t.charAt(is))?(l=t.charAt(is),is++):(l=$,0===ps&&i(Rn));l!==$;)u.push(l),Sn.test(t.charAt(is))?(l=t.charAt(is),is++):(l=$,0===ps&&i(Rn));if(u!==$)if(46===t.charCodeAt(is)?(l=Qn,is++):(l=$,0===ps&&i(_n)),l!==$){if(a=[],Sn.test(t.charAt(is))?(o=t.charAt(is),is++):(o=$,0===ps&&i(Rn)),o!==$)for(;o!==$;)a.push(o),Sn.test(t.charAt(is))?(o=t.charAt(is),is++):(o=$,0===ps&&i(Rn));else a=$;if(a!==$){if(o=is,qn.test(t.charAt(is))?(c=t.charAt(is),is++):(c=$,0===ps&&i(Tn)),c!==$)if(cn.test(t.charAt(is))?(p=t.charAt(is),is++):(p=$,0===ps&&i(pn)),p===$&&(p=null),p!==$){if(f=[],Sn.test(t.charAt(is))?(d=t.charAt(is),is++):(d=$,0===ps&&i(Rn)),d!==$)for(;d!==$;)f.push(d),Sn.test(t.charAt(is))?(d=t.charAt(is),is++):(d=$,0===ps&&i(Rn));else f=$;f!==$?(c=[c,p,f],o=c):(is=o,o=$)}else is=o,o=$;else is=o,o=$;o===$&&(o=null),o!==$?(s=[s,u,l,a,o],n=s):(is=n,n=$)}else is=n,n=$}else is=n,n=$;else is=n,n=$}else is=n,n=$;if(r=n!==$?t.substring(r,is):n,r!==$&&(ls=e,r=wn(r)),e=r,e===$){if(e=is,r=is,n=is,cn.test(t.charAt(is))?(s=t.charAt(is),is++):(s=$,0===ps&&i(pn)),s===$&&(s=null),s!==$){if(u=[],Sn.test(t.charAt(is))?(l=t.charAt(is),is++):(l=$,0===ps&&i(Rn)),l!==$)for(;l!==$;)u.push(l),Sn.test(t.charAt(is))?(l=t.charAt(is),is++):(l=$,0===ps&&i(Rn));else u=$;u!==$?(s=[s,u],n=s):(is=n,n=$)}else is=n,n=$;r=n!==$?t.substring(r,is):n,r!==$&&(ls=e,r=Fn(r)),e=r}}}}return ps--,e===$&&(r=$,0===ps&&i(on)),fs[h]={nextPos:is,result:e},e}function M(){var e,r,n=38*is+33,s=fs[n];return s?(is=s.nextPos,s.result):(ps++,e=is,t.substr(is,4)===Nn?(r=Nn,is+=4):(r=$,0===ps&&i(kn)),r!==$&&(ls=e,r=jn()),e=r,e===$&&(e=is,t.substr(is,5)===zn?(r=zn,is+=5):(r=$,0===ps&&i(In)),r!==$&&(ls=e,r=Un()),e=r,e===$&&(e=is,t.substr(is,4)===Zn?(r=Zn,is+=4):(r=$,0===ps&&i(Mn)),r!==$&&(ls=e,r=Vn()),e=r,e===$&&(e=is,t.substr(is,3)===Bn?(r=Bn,is+=3):(r=$,0===ps&&i(Gn)),r!==$&&(ls=e,r=On()),e=r,e===$&&(e=is,t.substr(is,9)===Dn?(r=Dn,is+=9):(r=$,0===ps&&i(Yn)),r!==$&&(ls=e,r=$n()),e=r)))),ps--,e===$&&(r=$,0===ps&&i(Ln)),fs[n]={nextPos:is,result:e},e)}function V(){var t,e,r=38*is+34,n=fs[r];if(n)return is=n.nextPos,n.result;for(ps++,t=[],e=B(),e===$&&(e=G());e!==$;)t.push(e),e=B(),e===$&&(e=G());return ps--,t===$&&(e=$,0===ps&&i(Hn)),fs[r]={nextPos:is,result:t},t}function B(){var e,r,n,s,u,l,a=38*is+35,o=fs[a];if(o)return is=o.nextPos,o.result;if(ps++,e=is,t.substr(is,2)===Kn?(r=Kn,is+=2):(r=$,0===ps&&i(Wn)),r!==$){for(n=[],s=is,u=is,ps++,t.substr(is,2)===Xn?(l=Xn,is+=2):(l=$,0===ps&&i(ts)),ps--,l===$?u=void 0:(is=u,u=$),u!==$?(t.length>is?(l=t.charAt(is),is++):(l=$,0===ps&&i(es)),l!==$?(u=[u,l],s=u):(is=s,s=$)):(is=s,s=$);s!==$;)n.push(s),s=is,u=is,ps++,t.substr(is,2)===Xn?(l=Xn,is+=2):(l=$,0===ps&&i(ts)),ps--,l===$?u=void 0:(is=u,u=$),u!==$?(t.length>is?(l=t.charAt(is),is++):(l=$,0===ps&&i(es)),l!==$?(u=[u,l],s=u):(is=s,s=$)):(is=s,s=$);n!==$?(t.substr(is,2)===Xn?(s=Xn,is+=2):(s=$,0===ps&&i(ts)),s!==$?(r=[r,n,s],e=r):(is=e,e=$)):(is=e,e=$)}else is=e,e=$;return ps--,e===$&&(r=$,0===ps&&i(Jn)),fs[a]={nextPos:is,result:e},e}function G(){var e,r,n=38*is+36,s=fs[n];if(s)return is=s.nextPos,s.result;if(ps++,e=[],ns.test(t.charAt(is))?(r=t.charAt(is),is++):(r=$,0===ps&&i(ss)),r!==$)for(;r!==$;)e.push(r),ns.test(t.charAt(is))?(r=t.charAt(is),is++):(r=$,0===ps&&i(ss));else e=$;return ps--,e===$&&(r=$,0===ps&&i(rs)),fs[n]={nextPos:is,result:e},e}function O(){var e,r,n=38*is+37,s=fs[n];return s?(is=s.nextPos,s.result):(ps++,e=is,ps++,t.length>is?(r=t.charAt(is),is++):(r=$,0===ps&&i(es)),ps--,r===$?e=void 0:(is=e,e=$),ps--,e===$&&(r=$,0===ps&&i(us)),fs[n]={nextPos:is,result:e},e)}var D,Y=arguments.length>1?arguments[1]:{},$={},H={query:a},J=a,K=function(t){return t},W=",",X={type:"literal",value:",",description:'","'},tt=function(t,e){return hs("Query").add(ds(t,e,3))},et=function(t,e){return hs("Path").add(ds(t,e,1))},rt="!",nt={type:"literal",value:"!",description:'"!"'},st=function(t,e,r,n){return hs("Step").add(t,e,n).set(null!==r?{isResult:!0}:{})},ut={type:"other",description:"axis"},it="//",lt={type:"literal",value:"//",description:'"//"'},at="/",ot={type:"literal",value:"/",description:'"/"'},ct="-//",pt={type:"literal",value:"-//",description:'"-//"'},ft="-/",dt={type:"literal",value:"-/",description:'"-/"'},ht="+//",vt={type:"literal",value:"+//",description:'"+//"'},At="+/",yt={type:"literal",value:"+/",description:'"+/"'},xt="..//",bt={type:"literal",value:"..//",description:'"..//"'},Pt="../",gt={type:"literal",value:"../",description:'"../"'},Ct="<//",mt={type:"literal",value:"<//",description:'"<//"'},Et=">//",St={type:"literal",value:">//",description:'">//"'},Rt=function(t,e){return hs("Axis").set({op:t,type:null!==e?e:"*"})},Qt=":",_t={type:"literal",value:":",description:'":"'},qt=function(t){return t},Tt=function(t){return hs("Match").merge(t)},wt="*",Ft={type:"literal",value:"*",description:'"*"'},Lt=function(){return hs("Match").set({id:"*"})},Nt="[",kt={type:"literal",value:"[",description:'"["'},jt="]",zt={type:"literal",value:"]",description:'"]"'},It=function(t){return hs("Filter").add(t)},Ut="?:",Zt={type:"literal",value:"?:",description:'"?:"'},Mt=function(t,e){return hs("ConditionalBinary").add(t,e)},Vt="?",Bt={type:"literal",value:"?",description:'"?"'},Gt=function(t,e,r){return hs("ConditionalTernary").add(t,e,r)},Ot="||",Dt={type:"literal",value:"||",description:'"||"'},Yt=function(t,e,r){return hs("Logical").set({op:e}).add(t,r)},$t="&&",Ht={type:"literal",value:"&&",description:'"&&"'},Jt="|",Kt={type:"literal",value:"|",description:'"|"'},Wt=function(t,e,r){return hs("Bitwise").set({op:e}).add(t,r)},Xt="^",te={type:"literal",value:"^",description:'"^"'},ee="&",re={type:"literal",value:"&",description:'"&"'},ne="==",se={type:"literal",value:"==",description:'"=="'},ue="!=",ie={type:"literal",value:"!=",description:'"!="'},le="<=",ae={type:"literal",value:"<=",description:'"<="'},oe=">=",ce={type:"literal",value:">=",description:'">="'},pe="<",fe={type:"literal",value:"<",description:'"<"'},de=">",he={type:"literal",value:">",description:'">"'},ve="=~",Ae={type:"literal",value:"=~",description:'"=~"'},ye="!~",xe={type:"literal",value:"!~",description:'"!~"'},be=function(t,e,r){return hs("Relational").set({op:e}).add(t,r)},Pe="<<",ge={type:"literal",value:"<<",description:'"<<"'},Ce=">>",me={type:"literal",value:">>",description:'">>"'},Ee="+",Se={type:"literal",value:"+",description:'"+"'},Re="-",Qe={type:"literal",value:"-",description:'"-"'},_e=function(t,e,r){return hs("Arithmetical").set({op:e}).add(t,r)},qe="**",Te={type:"literal",value:"**",description:'"**"'},we="%",Fe={type:"literal",value:"%",description:'"%"'},Le="~",Ne={type:"literal",value:"~",description:'"~"'},ke=function(t,e){return hs("Unary").set({op:t}).add(e)},je="(",ze={type:"literal",value:"(",description:'"("'},Ie=")",Ue={type:"literal",value:")",description:'")"'},Ze=function(t,e){return hs("FuncCall").merge(t).add(e)},Me=function(t,e){return ds(t,e,3)},Ve={type:"other",description:"node attribute"},Be="@",Ge={type:"literal",value:"@",description:'"@"'},Oe=function(t){return hs("Attribute").merge(t)},De={type:"other",description:"query parameter reference"},Ye="{",$e={type:"literal",value:"{",description:'"{"'},He="}",Je={type:"literal",value:"}",description:'"}"'},Ke=function(t){return hs("Param").merge(t)},We=function(t){return t},Xe={type:"other",description:"identifier"},tr=/^[a-zA-Z_]/,er={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},rr=/^[a-zA-Z0-9_\-]/,nr={type:"class",value:"[a-zA-Z0-9_-]",description:"[a-zA-Z0-9_-]"},sr=function(t){return hs("Identifier").set({id:t})},ur={type:"other",description:"quoted string literal"},ir='"',lr={type:"literal",value:'"',description:'"\\""'},ar=/^[^"]/,or={type:"class",value:'[^"]',description:'[^"]'},cr=function(t){return hs("LiteralString").set({value:t.join("")})},pr="'",fr={type:"literal",value:"'",description:'"\'"'},dr=/^[^']/,hr={type:"class",value:"[^']",description:"[^']"},vr={type:"other",description:"escaped double-quoted-string character"},Ar="\\\\",yr={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},xr=function(){return"\\"},br='\\"',Pr={type:"literal",value:'\\"',description:'"\\\\\\""'},gr=function(){return'"'},Cr="\\b",mr={type:"literal",value:"\\b",description:'"\\\\b"'},Er=function(){return"\b"},Sr="\\v",Rr={type:"literal",value:"\\v",description:'"\\\\v"'},Qr=function(){return"\x0B"},_r="\\f",qr={type:"literal",value:"\\f",description:'"\\\\f"'},Tr=function(){return"\f"},wr="\\t",Fr={type:"literal",value:"\\t",description:'"\\\\t"'},Lr=function(){return"	"},Nr="\\r",kr={type:"literal",value:"\\r",description:'"\\\\r"'},jr=function(){return"\r"},zr="\\n",Ir={type:"literal",value:"\\n",description:'"\\\\n"'},Ur=function(){return"\n"},Zr="\\e",Mr={type:"literal",value:"\\e",description:'"\\\\e"'},Vr=function(){return""},Br="\\x",Gr={type:"literal",value:"\\x",description:'"\\\\x"'},Or=/^[0-9a-fA-F]/,Dr={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},Yr=function(t){return String.fromCharCode(parseInt(t,16))},$r="\\u",Hr={type:"literal",value:"\\u",description:'"\\\\u"'},Jr={type:"other",description:"escaped single-quoted-string character"},Kr="\\'",Wr={type:"literal",value:"\\'",description:'"\\\\\'"'},Xr=function(){return"'"},tn={type:"other",description:"regular expression literal"},en="`",rn={type:"literal",value:"`",description:'"`"'},nn="\\`",sn={type:"literal",value:"\\`",description:'"\\\\`"'},un=/^[^`]/,ln={type:"class",value:"[^`]",description:"[^`]"},an=function(t){var e;try{e=new RegExp(t.replace(/\\`/g,"`"))}catch(r){n(r.message)}return hs("LiteralRegExp").set({value:e})},on={type:"other",description:"numeric literal"},cn=/^[+\-]/,pn={type:"class",value:"[+-]",description:"[+-]"},fn="0b",dn={type:"literal",value:"0b",description:'"0b"'},hn=/^[01]/,vn={type:"class",value:"[01]",description:"[01]"},An=function(t,e){return hs("LiteralNumber").set({value:parseInt(t+e,2)})},yn="0o",xn={type:"literal",value:"0o",description:'"0o"'},bn=/^[0-7]/,Pn={type:"class",value:"[0-7]",description:"[0-7]"},gn=function(t,e){return hs("LiteralNumber").set({value:parseInt(t+e,8)})},Cn="0x",mn={type:"literal",value:"0x",description:'"0x"'},En=function(t,e){return hs("LiteralNumber").set({value:parseInt(t+e,16)})},Sn=/^[0-9]/,Rn={type:"class",value:"[0-9]",description:"[0-9]"},Qn=".",_n={type:"literal",value:".",description:'"."'},qn=/^[eE]/,Tn={type:"class",value:"[eE]",description:"[eE]"},wn=function(t){return hs("LiteralNumber").set({value:parseFloat(t)})},Fn=function(t){return hs("LiteralNumber").set({value:parseInt(t,10)})},Ln={type:"other",description:"global value"},Nn="true",kn={type:"literal",value:"true",description:'"true"'},jn=function(){return hs("LiteralValue").set({value:!0})},zn="false",In={type:"literal",value:"false",description:'"false"'},Un=function(){return hs("LiteralValue").set({value:!1})},Zn="null",Mn={type:"literal",value:"null",description:'"null"'},Vn=function(){return hs("LiteralValue").set({value:null})},Bn="NaN",Gn={type:"literal",value:"NaN",description:'"NaN"'},On=function(){return hs("LiteralValue").set({value:NaN})},Dn="undefined",Yn={type:"literal",value:"undefined",description:'"undefined"'},$n=function(){return hs("LiteralValue").set({value:void 0})},Hn={type:"other",description:"optional blank"},Jn={type:"other",description:"multi-line comment"},Kn="/*",Wn={type:"literal",value:"/*",description:'"/*"'},Xn="*/",ts={type:"literal",value:"*/",description:'"*/"'},es={type:"any",description:"any character"},rs={type:"other",description:"any whitespaces"},ns=/^[ \t\r\n]/,ss={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},us={type:"other",description:"end of file"},is=0,ls=0,as=[{line:1,column:1,seenCR:!1}],os=0,cs=[],ps=0,fs={};if("startRule"in Y){if(!(Y.startRule in H))throw new Error("Can't start parsing from rule \""+Y.startRule+'".');J=H[Y.startRule]}var ds=Y.util.makeUnroll(r,Y),hs=Y.util.makeAST(r,Y);if(D=J(),D!==$&&is===t.length)return D;throw D!==$&&is<t.length&&i({type:"end",description:"end of input"}),l(null,cs,os<t.length?t.charAt(os):null,os<t.length?u(os,os+1):u(os,os))}return t(e,Error),{SyntaxError:e,parse:r}}(),ASTQQuery=function(){function t(e){_classCallCheck(this,t),this.asty=new ASTY,this.ast=null,e&&this.compile(e)}return _createClass(t,[{key:"compile",value:function(t,e){var r=this;e&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+t);var n=PEGUtil.parse(ASTQQueryParse,t,{startRule:"query",makeAST:function(t,e,n,s){return r.asty.create.apply(r.asty,s).pos(t,e,n)}});if(null!==n.error)throw new Error("ASTQ: compile: query parsing failed:\n"+PEGUtil.errorMessage(n.error,!0).replace(/^/gm,"ERROR: "));
return this.ast=n.ast,e&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ")),this}},{key:"dump",value:function(){return this.ast.dump()}},{key:"execute",value:function(t,e,r,n,s){s&&console.log("ASTQ: execute: +--------------------------------------------------------------+----------------------------------------");var u=new _astqQueryExec2["default"](e,r,n,s);return u.execQuery(this.ast,t)}}]),t}();exports["default"]=ASTQQuery;
},{"./astq-query-exec.js":10,"asty":1,"pegjs-util":3}],13:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),ASTQUtil=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"pad",value:function n(e,t){var r=0>t?-t:t;if(e.length>r)e=e.substr(0,r);else{var n=Array(r+1-e.length).join(" ");e=0>t?e+n:n+e}return e}},{key:"truthy",value:function(e){var n=void 0;switch("undefined"==typeof e?"undefined":_typeof(e)){case"boolean":n=e;break;case"number":n=0!==e&&!isNaN(e);break;case"string":n=""!==e;break;case"object":n=!1,null!==e&&(n=!0,e instanceof Array&&(n=e.length>0));break;default:n=!1}return n}},{key:"coerce",value:function(e,n){if(("undefined"==typeof e?"undefined":_typeof(e))!==n)try{switch(n){case"boolean":"boolean"!=typeof e&&(e=Boolean(e));break;case"number":"number"!=typeof e&&(e=Number(e));break;case"string":"string"!=typeof e&&(e=String(e));break;case"regexp":"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e instanceof RegExp||(e=new RegExp(e))}}catch(t){throw new Error("cannot coerce value into type "+n)}return e}}]),e}();exports["default"]=ASTQUtil;
},{}],14:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var version={major:1,minor:7,micro:1,date:20160627};exports["default"]=version;
},{}],15:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_astqAdapter=_dereq_("./astq-adapter.js"),_astqAdapter2=_interopRequireDefault(_astqAdapter),_astqAdapterAsty=_dereq_("./astq-adapter-asty.js"),_astqAdapterAsty2=_interopRequireDefault(_astqAdapterAsty),_astqAdapterMozast=_dereq_("./astq-adapter-mozast.js"),_astqAdapterMozast2=_interopRequireDefault(_astqAdapterMozast),_astqAdapterXmldom=_dereq_("./astq-adapter-xmldom.js"),_astqAdapterXmldom2=_interopRequireDefault(_astqAdapterXmldom),_astqFuncs=_dereq_("./astq-funcs.js"),_astqFuncs2=_interopRequireDefault(_astqFuncs),_astqFuncsStd=_dereq_("./astq-funcs-std.js"),_astqFuncsStd2=_interopRequireDefault(_astqFuncsStd),_astqQuery=_dereq_("./astq-query.js"),_astqQuery2=_interopRequireDefault(_astqQuery),_astqVersion=_dereq_("./astq-version.js"),_astqVersion2=_interopRequireDefault(_astqVersion),CacheLRU=_dereq_("cache-lru"),ASTQ=function(){function e(){_classCallCheck(this,e),this._adapter=(new _astqAdapter2["default"]).register(_astqAdapterMozast2["default"]).register(_astqAdapterXmldom2["default"]).register(_astqAdapterAsty2["default"]),this._funcs=new _astqFuncs2["default"];for(var t in _astqFuncsStd2["default"])this.func(t,_astqFuncsStd2["default"][t]);this._cache=new CacheLRU}return _createClass(e,[{key:"version",value:function(){return _astqVersion2["default"]}},{key:"adapter",value:function(e){if(1!==arguments.length)throw new Error("ASTQ#adapter: invalid number of arguments");return this._adapter.unregister(),this._adapter.register(e),this}},{key:"func",value:function(e,t){if(2!==arguments.length)throw new Error("ASTQ#func: invalid number of arguments");return this._funcs.register(e,t),this}},{key:"cache",value:function(e){if(1!==arguments.length)throw new Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(e),this}},{key:"compile",value:function(e,t){if(arguments.length<1)throw new Error("ASTQ#compile: too less arguments");if(arguments.length>2)throw new Error("ASTQ#compile: too many arguments");void 0===t&&(t=!1);var r=this._cache.get(e);return void 0===r&&(r=new _astqQuery2["default"],r.compile(e,t),this._cache.set(e,r)),r}},{key:"execute",value:function(e,t,r,a){if(arguments.length<2)throw new Error("ASTQ#execute: too less arguments");if(arguments.length>4)throw new Error("ASTQ#execute: too many arguments");void 0===r&&(r={}),void 0===a&&(a=!1);var s=this._adapter.select(e);if(void 0===s)throw new Error("ASTQ#execute: no suitable adapter found for node");return t.execute(e,s,r,this._funcs,a)}},{key:"query",value:function(e,t,r,a){if(arguments.length<2)throw new Error("ASTQ#query: too less arguments");if(arguments.length>4)throw new Error("ASTQ#query: too many arguments");return void 0===r&&(r={}),void 0===a&&(a=!1),this.execute(e,this.compile(t,a),r,a)}}]),e}();module.exports=ASTQ;
},{"./astq-adapter-asty.js":4,"./astq-adapter-mozast.js":5,"./astq-adapter-xmldom.js":6,"./astq-adapter.js":7,"./astq-funcs-std.js":8,"./astq-funcs.js":9,"./astq-query.js":12,"./astq-version.js":14,"cache-lru":2}]},{},[4,5,6,7,8,9,10,11,12,13,14,15])(15)
});


//# sourceMappingURL=astq.browser.map