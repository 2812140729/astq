/*
**  ASTq -- Abstract Syntax Tree (AST) Query Engine
**  Copyright (c) 2014-2015 Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ASTQ = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ASTY=t()}}(function(){return function t(e,n,r){function i(a,u){if(!n[a]){if(!e[a]){var f="function"==typeof _dereq_&&_dereq_;if(!u&&f)return f(a,!0);if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e){"use strict";var n=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(){r(this,t)}return n(t,null,{init:{value:function(t,e,n){if("undefined"==typeof t)throw new Error("init: invalid argument");if(this.ASTy=!0,this.T=t,this.L={L:0,C:0,O:0},this.A={},this.C=[],this.P=null,"object"==typeof e)for(var r in e)e.hasOwnProperty(r)&&this.set(r,e[r]);return"object"==typeof n&&n instanceof Array&&this.add(n),this},writable:!0,configurable:!0},type:{value:function(t){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=t,this;throw new Error("type: invalid number of arguments")},writable:!0,configurable:!0},pos:{value:function(t,e,n){if(0===arguments.length)return this.L;if(arguments.length<=3)return this.L.L=t||0,this.L.C=e||0,this.L.O=n||0,this;throw new Error("pos: invalid number of arguments")},writable:!0,configurable:!0},set:{value:function(){var t=this,e=arguments;if(1===arguments.length&&"object"==typeof arguments[0])!function(){var n=e;Object.keys(n[0]).forEach(function(e){t.A[e]=n[0][e]})}();else{if(2!==arguments.length)throw new Error("set: invalid arguments");this.A[arguments[0]]=arguments[1]}return this},writable:!0,configurable:!0},get:{value:function(t){if(1!==arguments.length)throw new Error("get: invalid number of arguments");if("string"!=typeof t)throw new Error("get: invalid argument");return this.A[t]},writable:!0,configurable:!0},attrs:{value:function(){return Object.keys(this.A)},writable:!0,configurable:!0},add:{value:function(){var t=this;if(0===arguments.length)throw new Error("add: missing argument(s)");var e=function(t,e){if(!("object"==typeof e&&"string"==typeof e.T&&"object"==typeof e.L&&"object"==typeof e.A&&"object"==typeof e.P&&"object"==typeof e.C&&e.C instanceof Array))throw new Error("add: invalid AST node: "+JSON.stringify(e));t.C.push(e),e.P=t};return null!==arguments&&Array.prototype.slice.call(arguments,0).forEach(function(n){"object"==typeof n&&n instanceof Array?n.forEach(function(n){e(t,n)}):null!==n&&e(t,n)}),this},writable:!0,configurable:!0},del:{value:function(){var t=this;if(0===arguments.length)throw new Error("del: invalid argument");return Array.prototype.slice.call(arguments,0).forEach(function(e){for(var n=!1,r=0;r<t.C.length;r++)if(t.C[r]===e){t.C.splice(r,1),e.P=null,n=!0;break}if(!n)throw new Error("del: child not found")}),this},writable:!0,configurable:!0},childs:{value:function(){return this.C},writable:!0,configurable:!0},parent:{value:function(){return this.P},writable:!0,configurable:!0}}),t}();e.exports=i},{}],2:[function(t,e){"use strict";var n=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(){r(this,t)}return n(t,null,{dump:{value:function(t){void 0===t&&(t=1/0);var e="";return this.walk(function(n,r){if(!(r>t)){for(var i=0;r>i;i++)e+="    ";e+=n.T+" ";var o=Object.keys(n.A);o.length>0&&!function(){e+="(";var t=!0;o.forEach(function(r){t?t=!1:e+=", ",e+=r+": ";var i=n.A[r];switch(typeof i){case"string":e+='"'+i.replace(/\n/,"\\n").replace(/"/,'\\"')+'"';break;case"object":e+=i instanceof RegExp?"/"+i.toString().replace(/^\//,"").replace(/\/$/,"").replace(/\//g,"\\/")+"/":JSON.stringify(i);break;default:e+=JSON.stringify(i)}}),e+=") "}(),e+="["+n.L.L+"/"+n.L.C+"]\n"}},"downward"),e},writable:!0,configurable:!0}}),t}();e.exports=i},{}],3:[function(t,e){"use strict";var n=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(){r(this,t)}return n(t,null,{merge:{value:function(t,e,n){var r=this;if("object"!=typeof t)throw new Error("merge: invalid AST node argument");if("undefined"==typeof e&&(e=!1),"undefined"==typeof n&&(n={}),e){var i=t.pos();this.pos(i.L,i.C,i.O)}return t.attrs().forEach(function(e){var i="undefined"!=typeof n[e]?n[e]:e;null!==i&&r.set(i,t.get(e))}),t.childs().forEach(function(t){r.add(t)}),this},writable:!0,configurable:!0}}),t}();e.exports=i},{}],4:[function(t,e){"use strict";var n={major:1,minor:0,micro:8,date:20150301};e.exports=n},{}],5:[function(t,e){"use strict";var n=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(){r(this,t)}return n(t,null,{walk:{value:function(t,e){"undefined"==typeof e&&(e="downward");var n=function(r,i,o){("downward"===e||"both"===e)&&t.call(null,r,i,o,"downward"),r.C.forEach(function(t){n(t,i+1,r)}),("upward"===e||"both"===e)&&t.call(null,r,i,o,"upward")};return n(this,0,null),this},writable:!0,configurable:!0}}),t}();e.exports=i},{}],6:[function(t,e){"use strict";var n=function(t){return t&&t.__esModule?t["default"]:t},r=function(t,e,n){e&&Object.defineProperties(t,e),n&&Object.defineProperties(t.prototype,n)},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=n(t("./asty-base.js")),a=n(t("./asty-merge.js")),u=n(t("./asty-walk.js")),f=n(t("./asty-dump.js")),s=n(t("./asty-version.js")),c=function(){function t(){var e=this;i(this,t),this.ASTYNode=function(){};var n=[[o,"init","type","pos","set","get","attrs","add","del","childs","parent"],[a,"merge"],[u,"walk"],[f,"dump"]];return n.forEach(function(t){var n=t[0].prototype;t.slice(1).forEach(function(t){e.ASTYNode.prototype[t]=n[t]})}),this}return r(t,null,{version:{value:function(){return s},writable:!0,configurable:!0},extend:{value:function(t){for(var e in t)t.hasOwnProperty(e)&&(this.ASTYNode.prototype[e]=t[e]);return this},writable:!0,configurable:!0},create:{value:function(t){return(new this.ASTYNode).init(t)},writable:!0,configurable:!0},isA:{value:function(t){return"object"==typeof t&&t instanceof this.ASTYNode&&"boolean"==typeof t.ASTy&&t.ASTy===!0},writable:!0,configurable:!0}}),t}();e.exports=c},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-version.js":4,"./asty-walk.js":5}]},{},[1,2,3,4,5,6])(6)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],2:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.CacheLRU=e()}}(function(){return function e(t,i,r){function n(u,l){if(!i[u]){if(!t[u]){var a="function"==typeof _dereq_&&_dereq_;if(!l&&a)return a(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=i[u]={exports:{}};t[u][0].call(f.exports,function(e){var i=t[u][1][e];return n(i?i:e)},f,f.exports,e,t,i,r)}return i[u].exports}for(var o="function"==typeof _dereq_&&_dereq_,u=0;u<r.length;u++)n(r[u]);return n}({1:[function(e,t){"use strict";var i=function(e,t,i){t&&Object.defineProperties(e,t),i&&Object.defineProperties(e.prototype,i)},r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(){return r(this,e),this._index={},this._LRU={newer:null},this._MRU={older:null},this._LRU.newer=this._MRU,this._MRU.older=this._LRU,this._cur=0,this._max=1/0,this._dispose=function(){},this}return i(e,null,{limit:{value:function(e){var t=this._max;return arguments.length>0&&(this._max=e,this._purge()),t},writable:!0,configurable:!0},dispose:{value:function(e){return this._dispose=e,this},writable:!0,configurable:!0},length:{value:function(){return this._cur},writable:!0,configurable:!0},keys:{value:function(){return this.each(function(e,t){this.push(t)},[])},writable:!0,configurable:!0},values:{value:function(){return this.each(function(e){this.push(e)},[])},writable:!0,configurable:!0},each:{value:function(e,t){arguments<2&&(t=this);for(var i=0,r=this._MRU.older;r!==this._LRU;)e.call(t,r.val,r.key,i++),r=r.older;return t},writable:!0,configurable:!0},has:{value:function(e){var t=this._index[e];return void 0!==t},writable:!0,configurable:!0},peek:{value:function(e){var t=this._index[e];return void 0===t?void 0:t.expires<Date.now()?void this.del(t.key):t.val},writable:!0,configurable:!0},touch:{value:function(e){var t=this._index[e];if(void 0===t)throw new Error("touch: no such item");return this._promote(t),this},writable:!0,configurable:!0},get:{value:function(e){var t=this._index[e];return void 0===t?void 0:t.expires<Date.now()?void this.del(t.key):(this._promote(t),t.val)},writable:!0,configurable:!0},set:{value:function(e,t,i){arguments.length<3&&(i=1/0),i+=Date.now();var r=this._index[e];if(void 0===r)r={older:null,newer:null,key:e,val:t,expires:i},this._index[e]=r,this._attach(r),this._cur++,this._purge();else{var n=r.val;r.val=t,this._promote(r),this._dispose.call(void 0,r.key,n,"set")}return this},writable:!0,configurable:!0},del:{value:function(e){var t=this._index[e];if(void 0===t)throw new Error("del: no such item");return delete this._index[e],this._detach(t),this._cur--,this._dispose.call(void 0,e,t.val,"del"),this},writable:!0,configurable:!0},clear:{value:function(){for(;this._cur>0;)this.del(this._LRU.newer.key);return this},writable:!0,configurable:!0},_purge:{value:function(){for(;this._cur>this._max;)this.del(this._LRU.newer.key)},writable:!0,configurable:!0},_promote:{value:function(e){this._detach(e),this._attach(e)},writable:!0,configurable:!0},_detach:{value:function(e){e.older.newer=e.newer,e.newer.older=e.older,e.older=null,e.newer=null},writable:!0,configurable:!0},_attach:{value:function(e){e.older=this._MRU.older,e.newer=this._MRU,e.newer.older=e,e.older.newer=e},writable:!0,configurable:!0}}),e}();t.exports=n},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],3:[function(_dereq_,module,exports){
(function (global){
!function(e,n,r){"function"==typeof define&&"undefined"!=typeof define.amd?define(n,function(){return r(e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=r(e):e[n]=r(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,"PEGUtil",function(){var e={};e.makeAST=function(e,n,r,t){return function(){return t.util.__makeAST.call(null,e(),n(),r(),arguments)}},e.makeUnroll=function(e,n,r,t){return function(o,u,l){if("object"!=typeof u||!(u instanceof Array))throw new t("unroll: invalid list argument for unrolling",typeof u,"Array",r(),e(),n());if("undefined"!=typeof l){"number"==typeof l&&(l=[l]);var a=[];null!==o&&a.push(o);for(var i=0;i<u.length;i++)for(var f=0;f<l.length;f++)a.push(u[i][l[f]]);return a}return null!==o&&u.unshift(o),u}};var n=function(e,n){var r=e.length,t=n-20;0>t&&(t=0);var o=n+20;o>r&&(o=r);var u=function(e){return e.charCodeAt(0).toString(16).toUpperCase()},l=function(e,n,r){return e.substr(n,r).replace(/\\/g,"\\\\").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+u(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+u(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+u(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+u(e)})};return{prolog:l(e,t,n-t),token:l(e,n,1),epilog:l(e,n+1,o-(n+1))}};return e.parse=function(r,t,o){if("object"!=typeof r)throw new Error("invalid parser object (not an object)");if("function"!=typeof r.parse)throw new Error('invalid parser object (no "parse" function)');if("string"!=typeof t)throw new Error("invalid input text (not a string)");if("undefined"!=typeof o&&"object"!=typeof o)throw new Error("invalid options (not an object)");"undefined"==typeof o&&(o={});var u={ast:null,error:null};try{var l;l="function"==typeof o.makeAST?o.makeAST:function(e,n,r,t){return{line:e,column:n,offset:r,args:t}};var a={util:{makeUnroll:e.makeUnroll,makeAST:e.makeAST,__makeAST:l}};"string"==typeof o.startRule&&(a.startRule=o.startRule),u.ast=r.parse(t,a),u.error=null}catch(i){u.ast=null;var f=function(e,n){return"undefined"!=typeof e?e:n};u.error={line:f(i.line,0),column:f(i.column,0),message:i.message,found:f(i.found,""),expected:f(i.expected,""),location:n(t,f(i.offset,0))}}return u},e.errorMessage=function(e,n){for(var r=e.location,t="line "+e.line+" (column "+e.column+"): ",o="",u=0;u<t.length+r.prolog.length;u++)o+="-";var l=t+r.prolog+r.token+r.epilog+"\n"+o+"^\n"+e.message+(n?"":"\n");return l},e});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],4:[function(_dereq_,module,exports){
"use strict";var _createClass=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ASTQAdapterASTY=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,{taste:{value:function(e){return"object"==typeof e&&"boolean"==typeof e.ASTy}},getParentNode:{value:function(e){return e.parent()}},getChildNodes:{value:function(e){return e.childs()}},getNodeType:{value:function(e){return e.type()}},getNodeAttrNames:{value:function(e){return e.attrs()}},getNodeAttrValue:{value:function(e,t){return e.get(t)}}}),e}();module.exports=ASTQAdapterASTY;
},{}],5:[function(_dereq_,module,exports){
"use strict";var _createClass=function(){function t(t,e){for(var r in e){var n=e[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(t,e)}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ASTQAdapterMozAST=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,{taste:{value:function(t){return"object"==typeof t&&null!==t&&"string"==typeof t.type&&""!==t.type}},getParentNode:{value:function(){throw new Error("Mozilla SpiderMonkey AST does not support parent node traversal")}},getChildNodes:{value:function(t){var e=this,r=[];for(var n in t)t.hasOwnProperty(n)&&this.taste(t[n])?r.push(t[n]):t.hasOwnProperty(n)&&"object"==typeof t[n]&&t[n]instanceof Array&&t[n].forEach(function(t){e.taste(t)&&r.push(t)});return r}},getNodeType:{value:function(t){return t.type}},getNodeAttrNames:{value:function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&"object"!=typeof t[r]&&"type"!==r&&"loc"!==r&&e.push(r);return e}},getNodeAttrValue:{value:function(t,e){return t.hasOwnProperty(e)&&"object"!=typeof t[e]&&"type"!==e&&"loc"!==e?t[e]:void 0}}}),t}();module.exports=ASTQAdapterMozAST;
},{}],6:[function(_dereq_,module,exports){
"use strict";var _createClass=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ASTQAdapterXMLDOM=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,{taste:{value:function(e){return"object"==typeof Node&&e instanceof Node&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}},getParentNode:{value:function(e){return e.parentNode}},getChildNodes:{value:function(e){return e.childNodes}},getNodeType:{value:function(e){return e.nodeName}},getNodeAttrNames:{value:function(e){return Array.prototype.slice.call(e.attributes,0).map(function(e){return e.nodeName})}},getNodeAttrValue:{value:function(e,t){return e.getAttribute(t)}}}),e}();module.exports=ASTQAdapterXMLDOM;
},{}],7:[function(_dereq_,module,exports){
"use strict";var _createClass=function(){function t(t,e){for(var r in e){var a=e[r];a.configurable=!0,a.value&&(a.writable=!0)}Object.defineProperties(t,e)}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),_classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ASTQAdapter=function(){function t(){return _classCallCheck(this,t),this._adapters=[],this}return _createClass(t,{register:{value:function(t){return this._adapters.unshift(t),this}},unregister:{value:function(t){if(void 0===t)this._adapters=[];else{for(var e=[],r=0;r<this._adapters.length;r++)this._adapters[r]!==t&&e.push(this._adapters[r]);this._adapters=e}return this}},select:{value:function(t){for(var e=0;e<this._adapters.length;e++)if(this._adapters[e].taste(t))return this._adapters[e];return void 0}}}),t}();module.exports=ASTQAdapter;
},{}],8:[function(_dereq_,module,exports){
"use strict";var stdfuncs={type:function(t,n){return t.getNodeType(n)},depth:function(t,n){for(var r=1,e=n;null!==(e=t.getParentNode(e));)r++;return r},pos:function(t,n){var r=t.getParentNode(n);if(null===r)return 1;for(var e=t.getChildNodes(r),u=0;u<e.length;u++)if(e[u]===n)return u+1;throw new Error("cannot find myself")},nth:function(t,n,r){r=parseInt(r,10);var e=t.getParentNode(n);if(null!==e){var u=t.getChildNodes(e);0>r&&(r=u-(r+1));for(var o=0;o<u.length;o++)if(u[o]===n)return o+1===r;return!1}return 1===r?!0:!1},first:function(t,n){return stdfuncs.nth(t,n,1)},last:function(t,n){return stdfuncs.nth(t,n,-1)},count:function(t,n,r){return"object"==typeof r&&r instanceof Array?r.length:"object"==typeof r?Object.keys(r).length:"string"==typeof r?r.length:String(r).length},substr:function(t,n,r,e,u){return String(r).substr(e,u)},lc:function(t,n,r){return String(r).toLowerCase()},uc:function(t,n,r){return String(r).toUpperCase()}};module.exports=stdfuncs;
},{}],9:[function(_dereq_,module,exports){
"use strict";var _createClass=function(){function n(n,t){for(var r in t){var e=t[r];e.configurable=!0,e.value&&(e.writable=!0)}Object.defineProperties(n,t)}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),_classCallCheck=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},ASTQFuncs=function(){function n(){return _classCallCheck(this,n),this._funcs={},this}return _createClass(n,{register:{value:function(n,t){this._funcs[n]=t}},run:{value:function(n,t){var r=this._funcs[n];if("function"!=typeof r)throw new Error('invalid function "'+n+'"');return r.apply(null,t)}}}),n}();module.exports=ASTQFuncs;
},{}],10:[function(_dereq_,module,exports){
"use strict";var _interopRequire=function(e){return e&&e.__esModule?e["default"]:e},_createClass=function(){function e(e,t){for(var r in t){var i=t[r];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(e,t)}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},util=_interopRequire(_dereq_("./astq-util.js")),ASTQQueryTrace=_interopRequire(_dereq_("./astq-query-trace.js")),ASTQQueryExec=function(e){function t(e,r,i,a){_classCallCheck(this,t),this.adapter=e,this.params=r,this.funcs=i,this.trace=a}return _inherits(t,e),_createClass(t,{execQuery:{value:function(e,t){var r=this;this.traceBegin(e,t);var i=[];return e.childs().forEach(function(e){i=i.concat(r.execPath(e,t))}),this.traceEnd(e,t,i),i}},execPath:{value:function(e,t){var r=this;this.traceBegin(e,t);var i=[t];return e.childs().forEach(function(e){var t=[];i.forEach(function(i){t=t.concat(r.execStep(e,i))}),i=t}),this.traceEnd(e,t,i),i}},execStep:{value:function(e,t){var r=this;this.traceBegin(e,t);var i=e.childs(),a=null,c=null,n=null,u=0;if(u<i.length&&"Axis"===i[u].type()&&(a=i[u++]),u<i.length&&"Match"===i[u].type()&&(c=i[u++]),u<i.length&&"Filter"===i[u].type()&&(n=i[u++]),null===c)throw new Error("no matching part in query step");var s=[],l=c.get("id"),h=function(e){var t=r.adapter.getNodeType(e);if("*"===l||l===t){var i=!0;null!==n&&(r.execFilter(n,e)||(i=!1)),i&&s.push(e)}};if(null!==a){var o=a.get("op");if("/"===o)this.adapter.getChildNodes(t).forEach(function(e){return h(e)});else if("//"===o)!function(){var e=function(t){h(t),r.adapter.getChildNodes(t).forEach(function(t){return e(t)})};r.adapter.getChildNodes(t).forEach(function(t){return e(t)})}();else if("-/"===o){var x=this.adapter.getParentNode(t);if(null!==x){for(var p=this.adapter.getChildNodes(x),d=null,f=0;f<p.length&&p[f]!==t;f++)d=p[f];h(d)}}else if("-//"===o){var E=this.adapter.getParentNode(t);if(null!==E)for(var p=this.adapter.getChildNodes(E),v=0;v<p.length&&p[v]!==t;v++)h(p[v])}else if("+/"===o){var g=this.adapter.getParentNode(t);if(null!==g){var p=this.adapter.getChildNodes(g),b=void 0;for(b=0;b<p.length&&p[b]!==t;b++);b<p.length&&(b++,h(p[b]))}}else if("+//"===o){var m=this.adapter.getParentNode(t);if(null!==m){var p=this.adapter.getChildNodes(m),y=void 0;for(y=0;y<p.length&&p[y]!==t;y++);if(y<p.length)for(y++;y<p.length;)h(p[y++])}}else if("../"===o){var B=this.adapter.getParentNode(t);null!==B&&h(B)}else if("..//"===o)for(var C=t;;){var k=this.adapter.getParentNode(C);if(null===k)break;h(k),C=k}}else h(t);return this.traceEnd(e,t,s),s}},execFilter:{value:function(e,t){this.traceBegin(e,t);var r=e.childs()[0],i=this.execExpr(r,t);return i=util.truthy(i),this.traceEnd(e,t,i),i}},execExpr:{value:function(e,t){switch(e.type()){case"ConditionalBinary":return this.execExprConditionalBinary(e,t);case"ConditionalTernary":return this.execExprConditionalTernary(e,t);case"Logical":return this.execExprLogical(e,t);case"Bitwise":return this.execExprBitwise(e,t);case"Relational":return this.execExprRelational(e,t);case"Arithmetical":return this.execExprArithmetical(e,t);case"Unary":return this.execExprUnary(e,t);case"FuncCall":return this.execExprFuncCall(e,t);case"Attribute":return this.execExprAttribute(e,t);case"Param":return this.execExprParam(e,t);case"LiteralString":return this.execExprLiteralString(e,t);case"LiteralRegExp":return this.execExprLiteralRegExp(e,t);case"LiteralNumber":return this.execExprLiteralNumber(e,t);case"LiteralValue":return this.execExprLiteralValue(e,t);case"Path":return this.execExprPath(e,t)}}},execExprConditionalBinary:{value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return util.truthy(r)||(r=this.execExpr(e.childs()[1],t)),this.traceEnd(e,t,r),r}},execExprConditionalTernary:{value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return r=util.truthy(r)?this.execExpr(e.childs()[1],t):this.execExpr(e.childs()[2],t),this.traceEnd(e,t,r),r}},execExprLogical:{value:function(e,t){this.traceBegin(e,t);var r=!1;switch(e.get("op")){case"&&":r=util.truthy(this.execExpr(e.childs()[0],t)),r&&(r=r&&util.truthy(this.execExpr(e.childs()[1],t)));break;case"||":r=util.truthy(this.execExpr(e.childs()[0],t)),r||(r=r||util.truthy(this.execExpr(e.childs()[1],t)))}return this.traceEnd(e,t,r),r}},execExprBitwise:{value:function(e,t){this.traceBegin(e,t);var r=util.coerce(this.execExpr(e.childs()[0],t),"number"),i=util.coerce(this.execExpr(e.childs()[1],t),"number"),a=void 0;switch(e.get("op")){case"&":a=r&i;break;case"|":a=r|i;break;case"<<":a=r<<i;break;case">>":a=r>>i}return this.traceEnd(e,t,a),a}},execExprRelational:{value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),i=this.execExpr(e.childs()[1],t),a=void 0;switch(e.get("op")){case"==":a=r===i;break;case"!=":a=r!==i;break;case"<=":a=util.coerce(r,"number")<=util.coerce(i,"number");break;case">=":a=util.coerce(r,"number")>=util.coerce(i,"number");break;case"<":a=util.coerce(r,"number")<util.coerce(i,"number");break;case">":a=util.coerce(r,"number")>util.coerce(i,"number");break;case"=~":a=null!==util.coerce(r,"string").match(util.coerce(i,"regexp"));break;case"!~":a=null===util.coerce(r,"string").match(util.coerce(i,"regexp"))}return this.traceEnd(e,t,a),a}},execExprArithmetical:{value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),i=this.execExpr(e.childs()[1],t),a=void 0;switch(e.get("op")){case"+":a="string"==typeof r?r+util.coerce(i,"string"):util.coerce(r,"number")+util.coerce(i,"number");break;case"-":a=util.coerce(r,"number")+util.coerce(i,"number");break;case"*":a=util.coerce(r,"number")*util.coerce(i,"number");break;case"/":a=util.coerce(r,"number")/util.coerce(i,"number");break;case"%":a=util.coerce(r,"number")%util.coerce(i,"number");break;case"**":a=Math.pow(util.coerce(r,"number"),util.coerce(i,"number"))}return this.traceEnd(e,t,a),a}},execExprUnary:{value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),i=void 0;switch(e.get("op")){case"!":i=!util.coerce(r,"boolean");break;case"~":i=~util.coerce(r,"number")}return this.traceEnd(e,t,i),i}},execExprFuncCall:{value:function(e,t){var r=this;this.traceBegin(e,t);var i=e.get("id"),a=[this.adapter,t];e.childs().forEach(function(e){a.push(r.execExpr(e,t))});var c=this.funcs.run(i,a);return this.traceEnd(e,t,c),c}},execExprAttribute:{value:function(e,t){this.traceBegin(e,t);var r=e.get("id"),i=this.adapter.getNodeAttrValue(t,r);return this.traceEnd(e,t,i),i}},execExprParam:{value:function(e,t){this.traceBegin(e,t);var r=e.get("id");if("undefined"==typeof this.params[r])throw new Error('invalid parameter "'+r+'"');var i=this.params[r];return this.traceEnd(e,t,i),i}},execExprLiteralString:{value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},execExprLiteralRegExp:{value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},execExprLiteralNumber:{value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},execExprLiteralValue:{value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},execExprPath:{value:function(e,t){this.traceBegin(e,t);var r=this.execPath(e,t);return this.traceEnd(e,t,r),r}}}),t}(ASTQQueryTrace);module.exports=ASTQQueryExec;
},{"./astq-query-trace.js":11,"./astq-util.js":13}],11:[function(_dereq_,module,exports){
"use strict";var _interopRequire=function(e){return e&&e.__esModule?e["default"]:e},_createClass=function(){function e(e,t){for(var r in t){var a=t[r];a.configurable=!0,a.value&&(a.writable=!0)}Object.defineProperties(e,t)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},util=_interopRequire(_dereq_("./astq-util.js")),ASTQQueryTrace=function(){function e(){_classCallCheck(this,e)}return _createClass(e,{prefixOf:{value:function(e,t){for(var r=0,a=e;null!==(a=a.parent());)r++;var i=util.pad("",4*r);for(r=0,a=t;null!==(a=this.adapter.getParentNode(a));)r++;var n=util.pad("",4*r);return{prefix1:i,prefix2:n}}},traceBegin:{value:function(e,t){if(this.trace){var r=this.prefixOf(e,t),a=r.prefix1,i=r.prefix2;console.log("ASTQ: execute: | "+util.pad(a+e.type()+" (",-60)+" | "+i+this.adapter.getNodeType(t))}}},traceEnd:{value:function(e,t,r){var a=this;if(this.trace){var i=this.prefixOf(e,t),n=i.prefix1,o=i.prefix2,u=void 0;void 0===r?u="undefined":"object"==typeof r&&r instanceof Array?(u="[",r.forEach(function(e){u+="node("+a.adapter.getNodeType(e)+"),"}),u=u.replace(/,$/,"")+"]"):u=typeof r+"("+r+")",u.length>60&&(u=u.substr(0,60)+"..."),console.log("ASTQ: execute: | "+util.pad(n+"): "+u,-60)+" | "+o+this.adapter.getNodeType(t))}}}}),e}();module.exports=ASTQQueryTrace;
},{"./astq-util.js":13}],12:[function(_dereq_,module,exports){
"use strict";var _interopRequire=function(t){return t&&t.__esModule?t["default"]:t},_createClass=function(){function t(t,e){for(var r in e){var n=e[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(t,e)}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ASTY=_dereq_("asty"),PEGUtil=_dereq_("pegjs-util"),ASTQQueryParse=function(){function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,e,r,n,s,u){this.message=t,this.expected=e,this.found=r,this.offset=n,this.line=s,this.column=u,this.name="SyntaxError"}function r(t){function r(){return ru}function n(){return i(ru).line}function s(){return i(ru).column}function u(t){throw l(t,null,ru)}function i(e){function r(e,r,n){var s,u;for(s=r;n>s;s++)u=t.charAt(s),"\n"===u?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===u||"\u2028"===u||"\u2029"===u?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return nu!==e&&(nu>e&&(nu=0,su={line:1,column:1,seenCR:!1}),r(su,nu,e),nu=e),su}function a(t){uu>eu||(eu>uu&&(uu=eu,iu=[]),iu.push(t))}function l(r,n,s){function u(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function a(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,s,u,i=new Array(t.length);for(u=0;u<t.length;u++)i[u]=t[u].description;return n=t.length>1?i.slice(0,-1).join(", ")+" or "+i[t.length-1]:i[0],s=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+s+" found."}var l=i(s),o=s<t.length?t.charAt(s):null;return null!==n&&u(n),new e(null!==r?r:a(n,o),n,o,s,l.line,l.column)}function o(){var t,e,r,n,s,u=36*eu+0,i=lu[u];return i?(eu=i.nextPos,i.result):(t=eu,e=V(),e!==$?(r=c(),r!==$?(n=V(),n!==$?(s=G(),s!==$?(ru=t,e=K(r),t=e):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J),lu[u]={nextPos:eu,result:t},t)}function c(){var e,r,n,s,u,i,l,o,c=36*eu+1,f=lu[c];if(f)return eu=f.nextPos,f.result;if(e=eu,r=p(),r!==$){for(n=[],s=eu,u=V(),u!==$?(44===t.charCodeAt(eu)?(i=W,eu++):(i=$,0===au&&a(X)),i!==$?(l=V(),l!==$?(o=p(),o!==$?(u=[u,i,l,o],s=u):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J);s!==$;)n.push(s),s=eu,u=V(),u!==$?(44===t.charCodeAt(eu)?(i=W,eu++):(i=$,0===au&&a(X)),i!==$?(l=V(),l!==$?(o=p(),o!==$?(u=[u,i,l,o],s=u):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J);n!==$?(ru=e,r=te(r,n),e=r):(eu=e,e=J)}else eu=e,e=J;return lu[c]={nextPos:eu,result:e},e}function p(){var t,e,r,n,s,u,i=36*eu+2,a=lu[i];if(a)return eu=a.nextPos,a.result;if(t=eu,e=f(),e!==$){for(r=[],n=eu,s=V(),s!==$?(u=h(),u!==$?(s=[s,u],n=s):(eu=n,n=J)):(eu=n,n=J);n!==$;)r.push(n),n=eu,s=V(),s!==$?(u=h(),u!==$?(s=[s,u],n=s):(eu=n,n=J)):(eu=n,n=J);r!==$?(ru=t,e=ee(e,r),t=e):(eu=t,t=J)}else eu=t,t=J;return lu[i]={nextPos:eu,result:t},t}function f(){var t,e,r,n,s,u,i=36*eu+3,a=lu[i];return a?(eu=a.nextPos,a.result):(t=eu,e=d(),e===$&&(e=re),e!==$?(r=V(),r!==$?(n=v(),n!==$?(s=V(),s!==$?(u=A(),u===$&&(u=re),u!==$?(ru=t,e=ne(e,n,u),t=e):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J),lu[i]={nextPos:eu,result:t},t)}function h(){var t,e,r,n,s,u,i=36*eu+4,a=lu[i];return a?(eu=a.nextPos,a.result):(t=eu,e=d(),e!==$?(r=V(),r!==$?(n=v(),n!==$?(s=V(),s!==$?(u=A(),u===$&&(u=re),u!==$?(ru=t,e=ne(e,n,u),t=e):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J)):(eu=t,t=J),lu[i]={nextPos:eu,result:t},t)}function d(){var e,r,n,s=36*eu+5,u=lu[s];return u?(eu=u.nextPos,u.result):(au++,e=eu,r=eu,t.substr(eu,2)===ue?(n=ue,eu+=2):(n=$,0===au&&a(ie)),n===$&&(47===t.charCodeAt(eu)?(n=ae,eu++):(n=$,0===au&&a(le)),n===$&&(t.substr(eu,3)===oe?(n=oe,eu+=3):(n=$,0===au&&a(ce)),n===$&&(t.substr(eu,2)===pe?(n=pe,eu+=2):(n=$,0===au&&a(fe)),n===$&&(t.substr(eu,3)===he?(n=he,eu+=3):(n=$,0===au&&a(de)),n===$&&(t.substr(eu,2)===ve?(n=ve,eu+=2):(n=$,0===au&&a(Ae)),n===$&&(t.substr(eu,4)===ye?(n=ye,eu+=4):(n=$,0===au&&a(xe)),n===$&&(t.substr(eu,3)===be?(n=be,eu+=3):(n=$,0===au&&a(Pe))))))))),n!==$&&(n=t.substring(r,eu)),r=n,r!==$&&(ru=e,r=ge(r)),e=r,au--,e===$&&(r=$,0===au&&a(se)),lu[s]={nextPos:eu,result:e},e)}function v(){var e,r,n=36*eu+6,s=lu[n];return s?(eu=s.nextPos,s.result):(e=eu,r=k(),r!==$&&(ru=e,r=Ce(r)),e=r,e===$&&(e=eu,42===t.charCodeAt(eu)?(r=me,eu++):(r=$,0===au&&a(Se)),r!==$&&(ru=e,r=Qe()),e=r),lu[n]={nextPos:eu,result:e},e)}function A(){var e,r,n,s,u,i,l=36*eu+7,o=lu[l];return o?(eu=o.nextPos,o.result):(e=eu,91===t.charCodeAt(eu)?(r=Ee,eu++):(r=$,0===au&&a(Re)),r!==$?(n=V(),n!==$?(s=y(),s!==$?(u=V(),u!==$?(93===t.charCodeAt(eu)?(i=Te,eu++):(i=$,0===au&&a(we)),i!==$?(ru=e,r=Fe(s),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),lu[l]={nextPos:eu,result:e},e)}function y(){var e,r,n,s,u,i,l,o,c,p,f=36*eu+8,h=lu[f];return h?(eu=h.nextPos,h.result):(e=eu,r=x(),r!==$?(n=V(),n!==$?(t.substr(eu,2)===Le?(s=Le,eu+=2):(s=$,0===au&&a(_e)),s!==$?(u=V(),u!==$?(i=x(),i!==$?(ru=e,r=qe(r,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=eu,r=x(),r!==$?(n=V(),n!==$?(63===t.charCodeAt(eu)?(s=Ne,eu++):(s=$,0===au&&a(ke)),s!==$?(u=V(),u!==$?(i=x(),i!==$?(l=V(),l!==$?(58===t.charCodeAt(eu)?(o=ze,eu++):(o=$,0===au&&a(Ie)),o!==$?(c=V(),c!==$?(p=x(),p!==$?(ru=e,r=Ue(r,i,p),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=x())),lu[f]={nextPos:eu,result:e},e)}function x(){var e,r,n,s,u,i,l=36*eu+9,o=lu[l];return o?(eu=o.nextPos,o.result):(e=eu,r=b(),r!==$?(n=V(),n!==$?(s=eu,t.substr(eu,2)===Ze?(u=Ze,eu+=2):(u=$,0===au&&a(je)),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=x(),i!==$?(ru=e,r=Ve(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=b()),lu[l]={nextPos:eu,result:e},e)}function b(){var e,r,n,s,u,i,l=36*eu+10,o=lu[l];return o?(eu=o.nextPos,o.result):(e=eu,r=P(),r!==$?(n=V(),n!==$?(s=eu,t.substr(eu,2)===Me?(u=Me,eu+=2):(u=$,0===au&&a(Be)),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=b(),i!==$?(ru=e,r=Ve(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=P()),lu[l]={nextPos:eu,result:e},e)}function P(){var e,r,n,s,u,i,l=36*eu+11,o=lu[l];return o?(eu=o.nextPos,o.result):(e=eu,r=g(),r!==$?(n=V(),n!==$?(s=eu,124===t.charCodeAt(eu)?(u=Ge,eu++):(u=$,0===au&&a(Oe)),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=P(),i!==$?(ru=e,r=Ye(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=g()),lu[l]={nextPos:eu,result:e},e)}function g(){var e,r,n,s,u,i,l=36*eu+12,o=lu[l];return o?(eu=o.nextPos,o.result):(e=eu,r=C(),r!==$?(n=V(),n!==$?(s=eu,94===t.charCodeAt(eu)?(u=$e,eu++):(u=$,0===au&&a(De)),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=g(),i!==$?(ru=e,r=Ye(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=C()),lu[l]={nextPos:eu,result:e},e)}function C(){var e,r,n,s,u,i,l=36*eu+13,o=lu[l];return o?(eu=o.nextPos,o.result):(e=eu,r=m(),r!==$?(n=V(),n!==$?(s=eu,38===t.charCodeAt(eu)?(u=He,eu++):(u=$,0===au&&a(Je)),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=C(),i!==$?(ru=e,r=Ye(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=m()),lu[l]={nextPos:eu,result:e},e)}function m(){var e,r,n,s,u,i,l=36*eu+14,o=lu[l];return o?(eu=o.nextPos,o.result):(e=eu,r=S(),r!==$?(n=V(),n!==$?(s=eu,t.substr(eu,2)===Ke?(u=Ke,eu+=2):(u=$,0===au&&a(We)),u===$&&(t.substr(eu,2)===Xe?(u=Xe,eu+=2):(u=$,0===au&&a(tr)),u===$&&(t.substr(eu,2)===er?(u=er,eu+=2):(u=$,0===au&&a(rr)),u===$&&(t.substr(eu,2)===nr?(u=nr,eu+=2):(u=$,0===au&&a(sr)),u===$&&(60===t.charCodeAt(eu)?(u=ur,eu++):(u=$,0===au&&a(ir)),u===$&&(62===t.charCodeAt(eu)?(u=ar,eu++):(u=$,0===au&&a(lr)),u===$&&(t.substr(eu,2)===or?(u=or,eu+=2):(u=$,0===au&&a(cr)),u===$&&(t.substr(eu,2)===pr?(u=pr,eu+=2):(u=$,0===au&&a(fr))))))))),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=m(),i!==$?(ru=e,r=hr(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=S()),lu[l]={nextPos:eu,result:e},e)}function S(){var e,r,n,s,u,i,l=36*eu+15,o=lu[l];return o?(eu=o.nextPos,o.result):(e=eu,r=Q(),r!==$?(n=V(),n!==$?(s=eu,t.substr(eu,2)===dr?(u=dr,eu+=2):(u=$,0===au&&a(vr)),u===$&&(t.substr(eu,2)===Ar?(u=Ar,eu+=2):(u=$,0===au&&a(yr))),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=S(),i!==$?(ru=e,r=Ye(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=Q()),lu[l]={nextPos:eu,result:e},e)}function Q(){var e,r,n,s,u,i,l=36*eu+16,o=lu[l];return o?(eu=o.nextPos,o.result):(e=eu,r=E(),r!==$?(n=V(),n!==$?(s=eu,43===t.charCodeAt(eu)?(u=xr,eu++):(u=$,0===au&&a(br)),u===$&&(45===t.charCodeAt(eu)?(u=Pr,eu++):(u=$,0===au&&a(gr))),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=Q(),i!==$?(ru=e,r=Cr(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=E()),lu[l]={nextPos:eu,result:e},e)}function E(){var e,r,n,s,u,i,l=36*eu+17,o=lu[l];return o?(eu=o.nextPos,o.result):(e=eu,r=R(),r!==$?(n=V(),n!==$?(s=eu,t.substr(eu,2)===mr?(u=mr,eu+=2):(u=$,0===au&&a(Sr)),u===$&&(42===t.charCodeAt(eu)?(u=me,eu++):(u=$,0===au&&a(Se)),u===$&&(47===t.charCodeAt(eu)?(u=ae,eu++):(u=$,0===au&&a(le)),u===$&&(37===t.charCodeAt(eu)?(u=Qr,eu++):(u=$,0===au&&a(Er))))),u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(u=V(),u!==$?(i=E(),i!==$?(ru=e,r=Cr(r,s,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=R()),lu[l]={nextPos:eu,result:e},e)}function R(){var e,r,n,s=36*eu+18,u=lu[s];return u?(eu=u.nextPos,u.result):(e=eu,r=eu,33===t.charCodeAt(eu)?(n=Rr,eu++):(n=$,0===au&&a(Tr)),n===$&&(126===t.charCodeAt(eu)?(n=wr,eu++):(n=$,0===au&&a(Fr))),n!==$&&(n=t.substring(r,eu)),r=n,r!==$?(n=T(),n!==$?(ru=e,r=Lr(r,n),e=r):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=T()),lu[s]={nextPos:eu,result:e},e)}function T(){var t,e=36*eu+19,r=lu[e];return r?(eu=r.nextPos,r.result):(t=w(),t===$&&(t=L(),t===$&&(t=_(),t===$&&(t=q(),t===$&&(t=N(),t===$&&(t=p()))))),lu[e]={nextPos:eu,result:t},t)}function w(){var e,r,n,s,u,i,l,o,c=36*eu+20,p=lu[c];return p?(eu=p.nextPos,p.result):(e=eu,r=k(),r!==$?(n=V(),n!==$?(40===t.charCodeAt(eu)?(s=_r,eu++):(s=$,0===au&&a(qr)),s!==$?(u=V(),u!==$?(i=F(),i===$&&(i=re),i!==$?(l=V(),l!==$?(41===t.charCodeAt(eu)?(o=Nr,eu++):(o=$,0===au&&a(kr)),o!==$?(ru=e,r=zr(r,i),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),lu[c]={nextPos:eu,result:e},e)}function F(){var e,r,n,s,u,i,l,o,c=36*eu+21,p=lu[c];if(p)return eu=p.nextPos,p.result;if(e=eu,r=y(),r!==$){for(n=[],s=eu,u=V(),u!==$?(44===t.charCodeAt(eu)?(i=W,eu++):(i=$,0===au&&a(X)),i!==$?(l=V(),l!==$?(o=y(),o!==$?(u=[u,i,l,o],s=u):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J);s!==$;)n.push(s),s=eu,u=V(),u!==$?(44===t.charCodeAt(eu)?(i=W,eu++):(i=$,0===au&&a(X)),i!==$?(l=V(),l!==$?(o=y(),o!==$?(u=[u,i,l,o],s=u):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J);n!==$?(ru=e,r=Ir(r,n),e=r):(eu=e,e=J)}else eu=e,e=J;return lu[c]={nextPos:eu,result:e},e}function L(){var e,r,n,s=36*eu+22,u=lu[s];return u?(eu=u.nextPos,u.result):(au++,e=eu,64===t.charCodeAt(eu)?(r=Zr,eu++):(r=$,0===au&&a(jr)),r!==$?(n=k(),n!==$?(ru=e,r=Vr(n),e=r):(eu=e,e=J)):(eu=e,e=J),au--,e===$&&(r=$,0===au&&a(Ur)),lu[s]={nextPos:eu,result:e},e)}function _(){var e,r,n,s,u,i,l=36*eu+23,o=lu[l];return o?(eu=o.nextPos,o.result):(au++,e=eu,123===t.charCodeAt(eu)?(r=Br,eu++):(r=$,0===au&&a(Gr)),r!==$?(n=V(),n!==$?(s=k(),s!==$?(u=V(),u!==$?(125===t.charCodeAt(eu)?(i=Or,eu++):(i=$,0===au&&a(Yr)),i!==$?(ru=e,r=$r(s),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),au--,e===$&&(r=$,0===au&&a(Mr)),lu[l]={nextPos:eu,result:e},e)}function q(){var t,e=36*eu+24,r=lu[e];return r?(eu=r.nextPos,r.result):(t=z(),t===$&&(t=U(),t===$&&(t=Z(),t===$&&(t=j()))),lu[e]={nextPos:eu,result:t},t)}function N(){var e,r,n,s,u,i,l=36*eu+25,o=lu[l];return o?(eu=o.nextPos,o.result):(e=eu,40===t.charCodeAt(eu)?(r=_r,eu++):(r=$,0===au&&a(qr)),r!==$?(n=V(),n!==$?(s=y(),s!==$?(u=V(),u!==$?(41===t.charCodeAt(eu)?(i=Nr,eu++):(i=$,0===au&&a(kr)),i!==$?(ru=e,r=Dr(s),e=r):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J)):(eu=e,e=J),lu[l]={nextPos:eu,result:e},e)}function k(){var e,r,n,s,u,i,l,o=36*eu+26,c=lu[o];if(c)return eu=c.nextPos,c.result;if(au++,e=eu,r=eu,n=eu,s=eu,au++,u=j(),au--,u===$?s=Jr:(eu=s,s=J),s!==$)if(Kr.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===au&&a(Wr)),u!==$){for(i=[],Xr.test(t.charAt(eu))?(l=t.charAt(eu),eu++):(l=$,0===au&&a(tn));l!==$;)i.push(l),Xr.test(t.charAt(eu))?(l=t.charAt(eu),eu++):(l=$,0===au&&a(tn));i!==$?(s=[s,u,i],n=s):(eu=n,n=J)}else eu=n,n=J;else eu=n,n=J;return n!==$&&(n=t.substring(r,eu)),r=n,r!==$&&(ru=e,r=en(r)),e=r,au--,e===$&&(r=$,0===au&&a(Hr)),lu[o]={nextPos:eu,result:e},e}function z(){var e,r,n,s,u,i=36*eu+27,l=lu[i];if(l)return eu=l.nextPos,l.result;if(au++,e=eu,34===t.charCodeAt(eu)?(r=nn,eu++):(r=$,0===au&&a(sn)),r!==$){for(n=[],s=I(),s===$&&(un.test(t.charAt(eu))?(s=t.charAt(eu),eu++):(s=$,0===au&&a(an)));s!==$;)n.push(s),s=I(),s===$&&(un.test(t.charAt(eu))?(s=t.charAt(eu),eu++):(s=$,0===au&&a(an)));n!==$?(34===t.charCodeAt(eu)?(s=nn,eu++):(s=$,0===au&&a(sn)),s!==$?(ru=e,r=ln(n),e=r):(eu=e,e=J)):(eu=e,e=J)}else eu=e,e=J;if(e===$)if(e=eu,39===t.charCodeAt(eu)?(r=on,eu++):(r=$,0===au&&a(cn)),r!==$){for(n=eu,s=[],t.substr(eu,2)===pn?(u=pn,eu+=2):(u=$,0===au&&a(fn)),u===$&&(hn.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===au&&a(dn)));u!==$;)s.push(u),t.substr(eu,2)===pn?(u=pn,eu+=2):(u=$,0===au&&a(fn)),u===$&&(hn.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===au&&a(dn)));s!==$&&(s=t.substring(n,eu)),n=s,n!==$?(39===t.charCodeAt(eu)?(s=on,eu++):(s=$,0===au&&a(cn)),s!==$?(ru=e,r=vn(n),e=r):(eu=e,e=J)):(eu=e,e=J)}else eu=e,e=J;return au--,e===$&&(r=$,0===au&&a(rn)),lu[i]={nextPos:eu,result:e},e}function I(){var e,r,n,s,u,i,l,o,c=36*eu+28,p=lu[c];return p?(eu=p.nextPos,p.result):(au++,e=eu,t.substr(eu,2)===yn?(r=yn,eu+=2):(r=$,0===au&&a(xn)),r!==$&&(ru=e,r=bn()),e=r,e===$&&(e=eu,t.substr(eu,2)===Pn?(r=Pn,eu+=2):(r=$,0===au&&a(gn)),r!==$&&(ru=e,r=Cn()),e=r,e===$&&(e=eu,39===t.charCodeAt(eu)?(r=on,eu++):(r=$,0===au&&a(cn)),r!==$&&(ru=e,r=mn()),e=r,e===$&&(e=eu,t.substr(eu,2)===Sn?(r=Sn,eu+=2):(r=$,0===au&&a(Qn)),r!==$&&(ru=e,r=En()),e=r,e===$&&(e=eu,t.substr(eu,2)===Rn?(r=Rn,eu+=2):(r=$,0===au&&a(Tn)),r!==$&&(ru=e,r=wn()),e=r,e===$&&(e=eu,t.substr(eu,2)===Fn?(r=Fn,eu+=2):(r=$,0===au&&a(Ln)),r!==$&&(ru=e,r=_n()),e=r,e===$&&(e=eu,t.substr(eu,2)===qn?(r=qn,eu+=2):(r=$,0===au&&a(Nn)),r!==$&&(ru=e,r=kn()),e=r,e===$&&(e=eu,t.substr(eu,2)===zn?(r=zn,eu+=2):(r=$,0===au&&a(In)),r!==$&&(ru=e,r=Un()),e=r,e===$&&(e=eu,t.substr(eu,2)===Zn?(r=Zn,eu+=2):(r=$,0===au&&a(jn)),r!==$&&(ru=e,r=Vn()),e=r,e===$&&(e=eu,t.substr(eu,2)===Mn?(r=Mn,eu+=2):(r=$,0===au&&a(Bn)),r!==$&&(ru=e,r=Gn()),e=r,e===$&&(e=eu,t.substr(eu,2)===On?(r=On,eu+=2):(r=$,0===au&&a(Yn)),r!==$?(n=eu,s=eu,$n.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===au&&a(Dn)),u!==$?($n.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===au&&a(Dn)),i!==$?(u=[u,i],s=u):(eu=s,s=J)):(eu=s,s=J),s!==$&&(s=t.substring(n,eu)),n=s,n!==$?(ru=e,r=Hn(n),e=r):(eu=e,e=J)):(eu=e,e=J),e===$&&(e=eu,t.substr(eu,2)===Jn?(r=Jn,eu+=2):(r=$,0===au&&a(Kn)),r!==$?(n=eu,s=eu,$n.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===au&&a(Dn)),u!==$?($n.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===au&&a(Dn)),i!==$?($n.test(t.charAt(eu))?(l=t.charAt(eu),eu++):(l=$,0===au&&a(Dn)),l!==$?($n.test(t.charAt(eu))?(o=t.charAt(eu),eu++):(o=$,0===au&&a(Dn)),o!==$?(u=[u,i,l,o],s=u):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J)):(eu=s,s=J),s!==$&&(s=t.substring(n,eu)),n=s,n!==$?(ru=e,r=Hn(n),e=r):(eu=e,e=J)):(eu=e,e=J)))))))))))),au--,e===$&&(r=$,0===au&&a(An)),lu[c]={nextPos:eu,result:e},e)}function U(){var e,r,n,s,u,i=36*eu+29,l=lu[i];if(l)return eu=l.nextPos,l.result;if(au++,e=eu,47===t.charCodeAt(eu)?(r=ae,eu++):(r=$,0===au&&a(le)),r!==$){for(n=eu,s=[],t.substr(eu,2)===Xn?(u=Xn,eu+=2):(u=$,0===au&&a(ts)),u===$&&(es.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===au&&a(rs)));u!==$;)s.push(u),t.substr(eu,2)===Xn?(u=Xn,eu+=2):(u=$,0===au&&a(ts)),u===$&&(es.test(t.charAt(eu))?(u=t.charAt(eu),eu++):(u=$,0===au&&a(rs)));s!==$&&(s=t.substring(n,eu)),n=s,n!==$?(47===t.charCodeAt(eu)?(s=ae,eu++):(s=$,0===au&&a(le)),s!==$?(ru=e,r=ns(n),e=r):(eu=e,e=J)):(eu=e,e=J)}else eu=e,e=J;return au--,e===$&&(r=$,0===au&&a(Wn)),lu[i]={nextPos:eu,result:e},e}function Z(){var e,r,n,s,u,i,l,o,c,p,f,h,d=36*eu+30,v=lu[d];if(v)return eu=v.nextPos,v.result;if(au++,e=eu,r=eu,us.test(t.charAt(eu))?(n=t.charAt(eu),eu++):(n=$,0===au&&a(is)),n===$&&(n=re),n!==$&&(n=t.substring(r,eu)),r=n,r!==$)if(t.substr(eu,2)===as?(n=as,eu+=2):(n=$,0===au&&a(ls)),n!==$){if(s=eu,u=[],os.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===au&&a(cs)),i!==$)for(;i!==$;)u.push(i),os.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===au&&a(cs));else u=J;u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(ru=e,r=ps(r,s),e=r):(eu=e,e=J)}else eu=e,e=J;else eu=e,e=J;if(e===$){if(e=eu,r=eu,us.test(t.charAt(eu))?(n=t.charAt(eu),eu++):(n=$,0===au&&a(is)),n===$&&(n=re),n!==$&&(n=t.substring(r,eu)),r=n,r!==$)if(t.substr(eu,2)===fs?(n=fs,eu+=2):(n=$,0===au&&a(hs)),n!==$){if(s=eu,u=[],ds.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===au&&a(vs)),i!==$)for(;i!==$;)u.push(i),ds.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===au&&a(vs));else u=J;u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(ru=e,r=As(r,s),e=r):(eu=e,e=J)}else eu=e,e=J;else eu=e,e=J;if(e===$){if(e=eu,r=eu,us.test(t.charAt(eu))?(n=t.charAt(eu),eu++):(n=$,0===au&&a(is)),n===$&&(n=re),n!==$&&(n=t.substring(r,eu)),r=n,r!==$)if(t.substr(eu,2)===ys?(n=ys,eu+=2):(n=$,0===au&&a(xs)),n!==$){if(s=eu,u=[],$n.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===au&&a(Dn)),i!==$)for(;i!==$;)u.push(i),$n.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===au&&a(Dn));else u=J;u!==$&&(u=t.substring(s,eu)),s=u,s!==$?(ru=e,r=bs(r,s),e=r):(eu=e,e=J)}else eu=e,e=J;else eu=e,e=J;if(e===$){if(e=eu,r=eu,n=eu,us.test(t.charAt(eu))?(s=t.charAt(eu),eu++):(s=$,0===au&&a(is)),s===$&&(s=re),s!==$){for(u=[],Ps.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===au&&a(gs));i!==$;)u.push(i),Ps.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===au&&a(gs));if(u!==$)if(46===t.charCodeAt(eu)?(i=Cs,eu++):(i=$,0===au&&a(ms)),i!==$){if(l=[],Ps.test(t.charAt(eu))?(o=t.charAt(eu),eu++):(o=$,0===au&&a(gs)),o!==$)for(;o!==$;)l.push(o),Ps.test(t.charAt(eu))?(o=t.charAt(eu),eu++):(o=$,0===au&&a(gs));else l=J;if(l!==$){if(o=eu,Ss.test(t.charAt(eu))?(c=t.charAt(eu),eu++):(c=$,0===au&&a(Qs)),c!==$)if(us.test(t.charAt(eu))?(p=t.charAt(eu),eu++):(p=$,0===au&&a(is)),p===$&&(p=re),p!==$){if(f=[],Ps.test(t.charAt(eu))?(h=t.charAt(eu),eu++):(h=$,0===au&&a(gs)),h!==$)for(;h!==$;)f.push(h),Ps.test(t.charAt(eu))?(h=t.charAt(eu),eu++):(h=$,0===au&&a(gs));else f=J;f!==$?(c=[c,p,f],o=c):(eu=o,o=J)}else eu=o,o=J;else eu=o,o=J;o===$&&(o=re),o!==$?(s=[s,u,i,l,o],n=s):(eu=n,n=J)}else eu=n,n=J}else eu=n,n=J;else eu=n,n=J}else eu=n,n=J;if(n!==$&&(n=t.substring(r,eu)),r=n,r!==$&&(ru=e,r=Es(r)),e=r,e===$){if(e=eu,r=eu,n=eu,us.test(t.charAt(eu))?(s=t.charAt(eu),eu++):(s=$,0===au&&a(is)),s===$&&(s=re),s!==$){if(u=[],Ps.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===au&&a(gs)),i!==$)for(;i!==$;)u.push(i),Ps.test(t.charAt(eu))?(i=t.charAt(eu),eu++):(i=$,0===au&&a(gs));else u=J;u!==$?(s=[s,u],n=s):(eu=n,n=J)}else eu=n,n=J;n!==$&&(n=t.substring(r,eu)),r=n,r!==$&&(ru=e,r=Rs(r)),e=r}}}}return au--,e===$&&(r=$,0===au&&a(ss)),lu[d]={nextPos:eu,result:e},e}function j(){var e,r,n=36*eu+31,s=lu[n];return s?(eu=s.nextPos,s.result):(au++,e=eu,t.substr(eu,4)===ws?(r=ws,eu+=4):(r=$,0===au&&a(Fs)),r!==$&&(ru=e,r=Ls()),e=r,e===$&&(e=eu,t.substr(eu,5)===_s?(r=_s,eu+=5):(r=$,0===au&&a(qs)),r!==$&&(ru=e,r=Ns()),e=r,e===$&&(e=eu,t.substr(eu,4)===ks?(r=ks,eu+=4):(r=$,0===au&&a(zs)),r!==$&&(ru=e,r=Is()),e=r,e===$&&(e=eu,t.substr(eu,3)===Us?(r=Us,eu+=3):(r=$,0===au&&a(Zs)),r!==$&&(ru=e,r=js()),e=r,e===$&&(e=eu,t.substr(eu,9)===Vs?(r=Vs,eu+=9):(r=$,0===au&&a(Ms)),r!==$&&(ru=e,r=Bs()),e=r)))),au--,e===$&&(r=$,0===au&&a(Ts)),lu[n]={nextPos:eu,result:e},e)}function V(){var t,e,r=36*eu+32,n=lu[r];if(n)return eu=n.nextPos,n.result;for(au++,t=[],e=M(),e===$&&(e=B());e!==$;)t.push(e),e=M(),e===$&&(e=B());return au--,t===$&&(e=$,0===au&&a(Gs)),lu[r]={nextPos:eu,result:t},t}function M(){var e,r,n,s,u,i,l=36*eu+33,o=lu[l];if(o)return eu=o.nextPos,o.result;if(au++,e=eu,t.substr(eu,2)===Ys?(r=Ys,eu+=2):(r=$,0===au&&a($s)),r!==$){for(n=[],s=eu,u=eu,au++,t.substr(eu,2)===Ds?(i=Ds,eu+=2):(i=$,0===au&&a(Hs)),au--,i===$?u=Jr:(eu=u,u=J),u!==$?(t.length>eu?(i=t.charAt(eu),eu++):(i=$,0===au&&a(Js)),i!==$?(u=[u,i],s=u):(eu=s,s=J)):(eu=s,s=J);s!==$;)n.push(s),s=eu,u=eu,au++,t.substr(eu,2)===Ds?(i=Ds,eu+=2):(i=$,0===au&&a(Hs)),au--,i===$?u=Jr:(eu=u,u=J),u!==$?(t.length>eu?(i=t.charAt(eu),eu++):(i=$,0===au&&a(Js)),i!==$?(u=[u,i],s=u):(eu=s,s=J)):(eu=s,s=J);n!==$?(t.substr(eu,2)===Ds?(s=Ds,eu+=2):(s=$,0===au&&a(Hs)),s!==$?(r=[r,n,s],e=r):(eu=e,e=J)):(eu=e,e=J)}else eu=e,e=J;return au--,e===$&&(r=$,0===au&&a(Os)),lu[l]={nextPos:eu,result:e},e}function B(){var e,r,n=36*eu+34,s=lu[n];if(s)return eu=s.nextPos,s.result;if(au++,e=[],Ws.test(t.charAt(eu))?(r=t.charAt(eu),eu++):(r=$,0===au&&a(Xs)),r!==$)for(;r!==$;)e.push(r),Ws.test(t.charAt(eu))?(r=t.charAt(eu),eu++):(r=$,0===au&&a(Xs));else e=J;return au--,e===$&&(r=$,0===au&&a(Ks)),lu[n]={nextPos:eu,result:e},e}function G(){var e,r,n=36*eu+35,s=lu[n];return s?(eu=s.nextPos,s.result):(au++,e=eu,au++,t.length>eu?(r=t.charAt(eu),eu++):(r=$,0===au&&a(Js)),au--,r===$?e=Jr:(eu=e,e=J),au--,e===$&&(r=$,0===au&&a(tu)),lu[n]={nextPos:eu,result:e},e)}var O,Y=arguments.length>1?arguments[1]:{},$={},D={query:o},H=o,J=$,K=function(t){return t},W=",",X={type:"literal",value:",",description:'","'},te=function(t,e){return cu("Query").add(ou(t,e,3))},ee=function(t,e){return cu("Path").add(ou(t,e,1))},re=null,ne=function(t,e,r){return cu("Step").add(t,e,r)},se={type:"other",description:"axis"},ue="//",ie={type:"literal",value:"//",description:'"//"'},ae="/",le={type:"literal",value:"/",description:'"/"'},oe="+//",ce={type:"literal",value:"+//",description:'"+//"'},pe="+/",fe={type:"literal",value:"+/",description:'"+/"'},he="-//",de={type:"literal",value:"-//",description:'"-//"'},ve="-/",Ae={type:"literal",value:"-/",description:'"-/"'},ye="..//",xe={type:"literal",value:"..//",description:'"..//"'},be="../",Pe={type:"literal",value:"../",description:'"../"'},ge=function(t){return cu("Axis").set({op:t})},Ce=function(t){return cu("Match").merge(t)},me="*",Se={type:"literal",value:"*",description:'"*"'},Qe=function(){return cu("Match").set({id:"*"})},Ee="[",Re={type:"literal",value:"[",description:'"["'},Te="]",we={type:"literal",value:"]",description:'"]"'},Fe=function(t){return cu("Filter").add(t)},Le="?:",_e={type:"literal",value:"?:",description:'"?:"'},qe=function(t,e){return cu("ConditionalBinary").add(t,e)},Ne="?",ke={type:"literal",value:"?",description:'"?"'},ze=":",Ie={type:"literal",value:":",description:'":"'},Ue=function(t,e,r){return cu("ConditionalTernary").add(t,e,r)},Ze="||",je={type:"literal",value:"||",description:'"||"'},Ve=function(t,e,r){return cu("Logical").set({op:e}).add(t,r)},Me="&&",Be={type:"literal",value:"&&",description:'"&&"'},Ge="|",Oe={type:"literal",value:"|",description:'"|"'},Ye=function(t,e,r){return cu("Bitwise").set({op:e}).add(t,r)},$e="^",De={type:"literal",value:"^",description:'"^"'},He="&",Je={type:"literal",value:"&",description:'"&"'},Ke="==",We={type:"literal",value:"==",description:'"=="'},Xe="!=",tr={type:"literal",value:"!=",description:'"!="'},er="<=",rr={type:"literal",value:"<=",description:'"<="'},nr=">=",sr={type:"literal",value:">=",description:'">="'},ur="<",ir={type:"literal",value:"<",description:'"<"'},ar=">",lr={type:"literal",value:">",description:'">"'},or="=~",cr={type:"literal",value:"=~",description:'"=~"'},pr="!~",fr={type:"literal",value:"!~",description:'"!~"'},hr=function(t,e,r){return cu("Relational").set({op:e}).add(t,r)},dr="<<",vr={type:"literal",value:"<<",description:'"<<"'},Ar=">>",yr={type:"literal",value:">>",description:'">>"'},xr="+",br={type:"literal",value:"+",description:'"+"'},Pr="-",gr={type:"literal",value:"-",description:'"-"'},Cr=function(t,e,r){return cu("Arithmetical").set({op:e}).add(t,r)},mr="**",Sr={type:"literal",value:"**",description:'"**"'},Qr="%",Er={type:"literal",value:"%",description:'"%"'},Rr="!",Tr={type:"literal",value:"!",description:'"!"'},wr="~",Fr={type:"literal",value:"~",description:'"~"'},Lr=function(t,e){return cu("Unary").set({op:t}).add(e)},_r="(",qr={type:"literal",value:"(",description:'"("'},Nr=")",kr={type:"literal",value:")",description:'")"'},zr=function(t,e){return cu("FuncCall").merge(t).add(e)},Ir=function(t,e){return ou(t,e,3)},Ur={type:"other",description:"node attribute"},Zr="@",jr={type:"literal",value:"@",description:'"@"'},Vr=function(t){return cu("Attribute").merge(t)},Mr={type:"other",description:"query parameter reference"},Br="{",Gr={type:"literal",value:"{",description:'"{"'},Or="}",Yr={type:"literal",value:"}",description:'"}"'},$r=function(t){return cu("Param").merge(t)},Dr=function(t){return t},Hr={type:"other",description:"identifier"},Jr=void 0,Kr=/^[a-zA-Z_]/,Wr={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},Xr=/^[a-zA-Z0-9_\-]/,tn={type:"class",value:"[a-zA-Z0-9_\\-]",description:"[a-zA-Z0-9_\\-]"},en=function(t){return cu("Identifier").set({id:t})},rn={type:"other",description:"quoted string literal"},nn='"',sn={type:"literal",value:'"',description:'"\\""'},un=/^[^"]/,an={type:"class",value:'[^"]',description:'[^"]'},ln=function(t){return cu("LiteralString").set({value:t.join("")})},on="'",cn={type:"literal",value:"'",description:'"\'"'},pn="\\'",fn={type:"literal",value:"\\'",description:'"\\\\\'"'},hn=/^[^']/,dn={type:"class",value:"[^']",description:"[^']"},vn=function(t){return cu("LiteralString").set({value:t.replace(/\\'/g,"'")})},An={type:"other",description:"escaped string character"},yn="\\\\",xn={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},bn=function(){return"\\"},Pn='\\"',gn={type:"literal",value:'\\"',description:'"\\\\\\""'},Cn=function(){return'"'},mn=function(){return"'"},Sn="\\b",Qn={type:"literal",value:"\\b",description:'"\\\\b"'},En=function(){return"\b"},Rn="\\v",Tn={type:"literal",value:"\\v",description:'"\\\\v"'},wn=function(){return""},Fn="\\f",Ln={type:"literal",value:"\\f",description:'"\\\\f"'},_n=function(){return"\f"},qn="\\t",Nn={type:"literal",value:"\\t",description:'"\\\\t"'},kn=function(){return"	"},zn="\\r",In={type:"literal",value:"\\r",description:'"\\\\r"'},Un=function(){return"\r"},Zn="\\n",jn={type:"literal",value:"\\n",description:'"\\\\n"'},Vn=function(){return"\n"},Mn="\\e",Bn={type:"literal",value:"\\e",description:'"\\\\e"'},Gn=function(){return""},On="\\x",Yn={type:"literal",value:"\\x",description:'"\\\\x"'},$n=/^[0-9a-fA-F]/,Dn={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},Hn=function(t){return String.fromCharCode(parseInt(t,16))},Jn="\\u",Kn={type:"literal",value:"\\u",description:'"\\\\u"'},Wn={type:"other",description:"regular expression literal"},Xn="\\/",ts={type:"literal",value:"\\/",description:'"\\\\/"'},es=/^[^\/]/,rs={type:"class",value:"[^\\/]",description:"[^\\/]"},ns=function(t){var e;try{e=new RegExp(t.replace(/\\\//g,"/"))}catch(r){u(r.message)}return cu("LiteralRegExp").set({value:e})},ss={type:"other",description:"numeric literal"},us=/^[+\-]/,is={type:"class",value:"[+\\-]",description:"[+\\-]"},as="0b",ls={type:"literal",value:"0b",description:'"0b"'},os=/^[01]/,cs={type:"class",value:"[01]",description:"[01]"},ps=function(t,e){return cu("LiteralNumber").set({value:parseInt(t+e,2)})},fs="0o",hs={type:"literal",value:"0o",description:'"0o"'},ds=/^[0-7]/,vs={type:"class",value:"[0-7]",description:"[0-7]"},As=function(t,e){return cu("LiteralNumber").set({value:parseInt(t+e,8)})},ys="0x",xs={type:"literal",value:"0x",description:'"0x"'},bs=function(t,e){return cu("LiteralNumber").set({value:parseInt(t+e,16)})},Ps=/^[0-9]/,gs={type:"class",value:"[0-9]",description:"[0-9]"},Cs=".",ms={type:"literal",value:".",description:'"."'},Ss=/^[eE]/,Qs={type:"class",value:"[eE]",description:"[eE]"},Es=function(t){return cu("LiteralNumber").set({value:parseFloat(t)})},Rs=function(t){return cu("LiteralNumber").set({value:parseInt(t,10)})},Ts={type:"other",description:"global value"},ws="true",Fs={type:"literal",value:"true",description:'"true"'},Ls=function(){return cu("LiteralValue").set({value:!0})},_s="false",qs={type:"literal",value:"false",description:'"false"'},Ns=function(){return cu("LiteralValue").set({value:!1})},ks="null",zs={type:"literal",value:"null",description:'"null"'},Is=function(){return cu("LiteralValue").set({value:null})},Us="NaN",Zs={type:"literal",value:"NaN",description:'"NaN"'},js=function(){return cu("LiteralValue").set({value:0/0})},Vs="undefined",Ms={type:"literal",value:"undefined",description:'"undefined"'},Bs=function(){return cu("LiteralValue").set({value:void 0})},Gs={type:"other",description:"optional blank"},Os={type:"other",description:"multi-line comment"},Ys="/*",$s={type:"literal",value:"/*",description:'"/*"'},Ds="*/",Hs={type:"literal",value:"*/",description:'"*/"'},Js={type:"any",description:"any character"},Ks={type:"other",description:"any whitespaces"},Ws=/^[ \t\r\n]/,Xs={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},tu={type:"other",description:"end of file"},eu=0,ru=0,nu=0,su={line:1,column:1,seenCR:!1},uu=0,iu=[],au=0,lu={};if("startRule"in Y){if(!(Y.startRule in D))throw new Error("Can't start parsing from rule \""+Y.startRule+'".');H=D[Y.startRule]}var ou=Y.util.makeUnroll(n,s,r,e),cu=Y.util.makeAST(n,s,r,Y);if(O=H(),O!==$&&eu===t.length)return O;throw O!==$&&eu<t.length&&a({type:"end",description:"end of input"}),l(null,iu,uu)}return t(e,Error),{SyntaxError:e,parse:r}}(),ASTQQueryExec=_interopRequire(_dereq_("./astq-query-exec.js")),ASTQQuery=function(){function t(e){_classCallCheck(this,t),this.asty=new ASTY,this.ast=null,e&&this.compile(e)}return _createClass(t,{compile:{value:function(t,e){var r=this;e&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+t);var n=PEGUtil.parse(ASTQQueryParse,t,{startRule:"query",makeAST:function(t,e,n,s){return r.asty.create.apply(r.asty,s).pos(t,e,n)}});if(null!==n.error)throw new Error("ASTQ: compile: query parsing failed:\n"+PEGUtil.errorMessage(n.error,!0).replace(/^/gm,"ERROR: "));return this.ast=n.ast,e&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ")),this}},dump:{value:function(){return this.ast.dump()}},execute:{value:function(t,e,r,n,s){s&&console.log("ASTQ: execute: +--------------------------------------------------------------+----------------------------------------");var u=new ASTQQueryExec(e,r,n,s);return u.execQuery(this.ast,t)}}}),t}();module.exports=ASTQQuery;
},{"./astq-query-exec.js":10,"asty":1,"pegjs-util":3}],13:[function(_dereq_,module,exports){
"use strict";var _createClass=function(){function e(e,r){for(var n in r){var a=r[n];a.configurable=!0,a.value&&(a.writable=!0)}Object.defineProperties(e,r)}return function(r,n,a){return n&&e(r.prototype,n),a&&e(r,a),r}}(),_classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},ASTQUtil=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,{pad:{value:function r(e,n){var a=0>n?-n:n;if(e.length>a)e=e.substr(0,a);else{var r=Array(a+1-e.length).join(" ");e=0>n?e+r:r+e}return e}},truthy:{value:function(e){var r=void 0;switch(typeof e){case"boolean":r=e;break;case"number":r=0!==e&&!isNaN(e);break;case"string":r=""!==e;break;case"object":r=!1,null!==e&&(r=!0,e instanceof Array&&(r=e.length>0));break;default:r=!1}return r}},coerce:{value:function(e,r){if(typeof e!==r)try{switch(r){case"boolean":e=Boolean(e);break;case"number":e=Number(e);break;case"string":e=String(e);break;case"regexp":e=new RegExp(e)}}catch(n){throw new Error("cannot coerce value into type "+r)}return e}}}),e}();module.exports=ASTQUtil;
},{}],14:[function(_dereq_,module,exports){
"use strict";var version={major:1,minor:2,micro:9,date:20150308};module.exports=version;
},{}],15:[function(_dereq_,module,exports){
"use strict";var _interopRequire=function(e){return e&&e.__esModule?e["default"]:e},_createClass=function(){function e(e,r){for(var t in r){var n=r[t];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,r)}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},CacheLRU=_dereq_("cache-lru"),ASTQAdapter=_interopRequire(_dereq_("./astq-adapter.js")),ASTQAdapterASTY=_interopRequire(_dereq_("./astq-adapter-asty.js")),ASTQAdapterMOZAST=_interopRequire(_dereq_("./astq-adapter-mozast.js")),ASTQAdapterXMLDOM=_interopRequire(_dereq_("./astq-adapter-xmldom.js")),ASTQFuncs=_interopRequire(_dereq_("./astq-funcs.js")),ASTQFuncsSTD=_interopRequire(_dereq_("./astq-funcs-std.js")),ASTQQuery=_interopRequire(_dereq_("./astq-query.js")),ASTQVersion=_interopRequire(_dereq_("./astq-version.js")),ASTQ=function(){function e(){_classCallCheck(this,e),this._adapter=new ASTQAdapter,this._adapter.register(ASTQAdapterMOZAST),this._adapter.register(ASTQAdapterXMLDOM),this._adapter.register(ASTQAdapterASTY),this._funcs=new ASTQFuncs;for(var r in ASTQFuncsSTD)this.func(r,ASTQFuncsSTD[r]);this._cache=new CacheLRU}return _createClass(e,{version:{value:function(){return ASTQVersion}},adapter:{value:function(e){var r=function(){return e.apply(this,arguments)};return r.toString=function(){return e.toString()},r}(function(e){if(1!==arguments.length)throw new Error("ASTQ#adapter: invalid number of arguments");return this._adapter.unregister(),this._adapter.register(e),this})},func:{value:function(e){var r=function(){return e.apply(this,arguments)};return r.toString=function(){return e.toString()},r}(function(e,r){if(2!==arguments.length)throw new Error("ASTQ#func: invalid number of arguments");return this._funcs.register(e,r),this})},cache:{value:function(e){if(1!==arguments.length)throw new Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(e),this}},compile:{value:function(e,r){if(arguments.length<1)throw new Error("ASTQ#compile: too less arguments");if(arguments.length>2)throw new Error("ASTQ#compile: too many arguments");void 0===r&&(r=!1);var t=this._cache.get(e);return void 0===t&&(t=new ASTQQuery,t.compile(e,r),this._cache.set(e,t)),t}},execute:{value:function(e,r,t,n){if(arguments.length<2)throw new Error("ASTQ#execute: too less arguments");if(arguments.length>4)throw new Error("ASTQ#execute: too many arguments");void 0===t&&(t={}),void 0===n&&(n=!1);var i=this._adapter.select(e);if(void 0===i)throw new Error("ASTQ#execute: no suitable adapter found for node");return r.execute(e,i,t,this._funcs,n)}},query:{value:function(e,r,t,n){if(arguments.length<2)throw new Error("ASTQ#query: too less arguments");if(arguments.length>4)throw new Error("ASTQ#query: too many arguments");return void 0===t&&(t={}),void 0===n&&(n=!1),this.execute(e,this.compile(r,n),t,n)}}}),e}();module.exports=ASTQ;
},{"./astq-adapter-asty.js":4,"./astq-adapter-mozast.js":5,"./astq-adapter-xmldom.js":6,"./astq-adapter.js":7,"./astq-funcs-std.js":8,"./astq-funcs.js":9,"./astq-query.js":12,"./astq-version.js":14,"cache-lru":2}]},{},[4,5,6,7,8,9,10,11,12,13,14,15])(15)
});


//# sourceMappingURL=astq.browser.map